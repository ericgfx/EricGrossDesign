//<script>
if (!(window.bouncex&&bouncex.website)) { 
	(function(){ 		var pushedData = [];
	 	if(window.bouncex && bouncex.push && bouncex.length){	 		pushedData = bouncex;
	 	} 
	 	window.bouncex = {};
	 	bouncex.pushedData = pushedData;
	 	
		bouncex.website = {"ei":0,"ally":0,"cookie_name":"bounceClientVisit2679","vars":[{"name":"page_type","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n  if (jQuery('.top-shell .category').length > 0) return 'article';\n  else if (jQuery('.ad-device-slot').attr('data-page-name') === 'Gallery-Unfiltered') return 'news';\n  else if (jQuery('.autonomy-content').length > 0 || window.location.pathname === '\/galleries') return 'category';\n})();"}],"els":false,"acts":[],"ct":"bind_to_domain","tcjs":"","cjs":"","force_https":false,"waypoints":false,"content_width":"0","gai":"","swids":null,"ots":0,"sd":0,"ljq":"auto","aco":{"first_party_limit":"3500","local_storage":"1"},"id":2679,"campaign_id":0,"uwc":1,"domain":"gettyimages.com","BCU":"\/\/assets.bounceexchange.com\/assets\/bounce\/css\/bouncev2.fe6ed2d9bf.css","biu":"assets.bounceexchange.com","dgu":"pixel.cdnwidget.com","dge":true,"dgp":false,"dgs":{"trafficPercentage":100,"tagData":{"id":"c.js","async":"true","src":"\/\/pixel.cdnwidget.com\/cdn\/c.min.js","data-gm":"1","data-fire":"1"}},"bau":"api.bounceexchange.com","ple":false,"fbe":true,"beu":"events.bouncex.net","is_preview":false,"mas":2,"map":1,"gar":true,"casl":true,"ete":true,"etjs":"","ettm":true,"cput":true,"gbi":{"rblocks":null},"gbi_enabled":1,"pt":false,"burls":[{"prop":"contains","val":"foto.gettyimages.com"}],"ibx":{"cjs":"","miw":"0","miw_exclude":null,"muu":0,"mibcx":0,"te":0,"tjs":"","cart_rep":{"get":"","set":""},"ulpj":[]},"ba":{"enabled":0,"fbte":1}};
		bouncex.tag = 'tag2';
		bouncex.v2css = '@charset \"UTF-8\";.bx-client-body,.bxc svg:not(:root){overflow:hidden}.bxc a,.bxc a:active,.bxc a:focus,.bxc a:hover,.bxc.bx-base .bx-close:hover{text-decoration:none}.bxc,.bxc button,.bxc select{text-transform:none}.bxc body{margin:0}.bxc article,.bxc aside,.bxc details,.bxc figcaption,.bxc figure,.bxc footer,.bxc header,.bxc hgroup,.bxc main,.bxc menu,.bxc nav,.bxc section,.bxc summary{display:block}.bxc audio,.bxc canvas,.bxc progress,.bxc video{display:inline-block;vertical-align:baseline}.bxc audio:not([controls]){display:none;height:0}.bxc [hidden],.bxc template{display:none}.bxc a{background-color:transparent}.bxc a:active,.bxc a:hover{outline:0}.bxc abbr[title]{border-bottom:1px dotted}.bxc b,.bxc strong{font-weight:700}.bxc dfn{font-style:italic}.bxc h1{font-size:2em;margin:.67em 0}.bxc mark{background:#ff0;color:#000}.bxc small{font-size:80%}.bxc sub,.bxc sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.bxc sup{top:-.5em}.bxc sub{bottom:-.25em}.bxc img{border:0}.bxc figure{margin:1em 40px}.bxc hr{box-sizing:content-box;height:0}.bxc pre{overflow:auto}.bxc code,.bxc kbd,.bxc pre,.bxc samp{font-family:monospace,monospace;font-size:1em}.bxc button,.bxc input,.bxc optgroup,.bxc select,.bxc textarea{color:inherit;font:inherit;margin:0}.bxc button{overflow:visible}.bxc button,.bxc input[type=button],.bxc input[type=reset],.bxc input[type=submit]{-webkit-appearance:button;cursor:pointer}.bxc button[disabled],.bxc input[disabled]{cursor:default}.bxc button::-moz-focus-inner,.bxc input::-moz-focus-inner{border:0;padding:0}.bxc input{line-height:normal}.bxc input[type=checkbox],.bxc input[type=radio]{box-sizing:border-box;padding:0}.bxc input[type=number]::-webkit-inner-spin-button,.bxc input[type=number]::-webkit-outer-spin-button{height:auto}.bxc input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}.bxc input[type=search]::-webkit-search-cancel-button,.bxc input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.bxc fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}.bxc legend{border:0;padding:0}.bxc textarea{overflow:auto}.bx-client-overlay,.bx-client-overlay-ios{overflow:hidden!important}.bxc optgroup{font-weight:700}.bxc table{border-collapse:collapse;border-spacing:0}.bxc td,.bxc th{padding:0}.bxc{/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */-ms-text-size-adjust:auto;-webkit-text-size-adjust:auto;font-family:Helvetica,sans-serif;font-size:0;text-align:center;text-indent:0;text-overflow:clip;text-rendering:optimizeLegibility;text-shadow:none;line-height:1;letter-spacing:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:normal}.bx-blur,.bx-blur-redacted,.bx-blur-textshadow{-moz-user-select:none!important;-webkit-user-select:none!important;-ms-user-select:none!important;cursor:default!important;pointer-events:none!important}.bxc *{box-sizing:border-box}.bxc a{color:inherit;display:inline-block}.bxc a:focus{outline:0}.bxc form,.bxc p{margin:0}.bxc img,.bxc svg{display:inline-block;max-width:100%;height:auto}.bxc button,.bxc input,.bxc select,.bxc textarea{display:block;text-rendering:inherit}.bxc iframe{display:none}.bx-client-overlay-ios{position:absolute!important;top:0!important;right:0!important;bottom:0!important;left:0!important;-webkit-overflow-scrolling:touch!important;margin-top:0!important;margin-bottom:0!important;-webkit-transition:none!important;transition:none!important}.bx-client-body{position:fixed;-webkit-overflow-scrolling:touch;width:100%}.bxc.bx-base.bx-type-conversionbar.bx-impress-in .bx-slab,.bxc.bx-base.bx-type-conversionbar.bx-impress-out .bx-slab,.bxc.bx-base.bx-type-liquidscreen.bx-impress-in .bx-slab,.bxc.bx-base.bx-type-liquidscreen.bx-impress-out .bx-slab{overflow:hidden}.bx-blur-redacted{-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)\"!important;opacity:.2!important}.bx-blur-hide{display:none!important}.bx-blur-textshadow{color:transparent!important;opacity:.4!important}.bx-blur-textshadow *{color:transparent!important;text-shadow:inherit!important}.bx-blur{-webkit-filter:blur(4px)!important;filter:blur(4px)!important;opacity:.6!important}.bxc.bx-base{display:block!important;visibility:hidden}.bxc.bx-base.bx-impress{visibility:visible!important}.bxc.bx-base .bx-matte,.bxc.bx-base .bx-powered,.bxc.bx-base .bx-shroud{display:none;pointer-events:auto}.bxc.bx-base .bx-hover-shroud,.bxc.bx-base .bx-slab{pointer-events:none}.bxc.bx-base .bx-hover-shroud,.bxc.bx-base .bx-shroud{position:fixed;width:100%;height:100%;top:0;left:0}.bxc.bx-base .bx-powered{position:fixed;bottom:10px;left:10px}.bxc.bx-base .bx-align{max-width:100%;max-height:100%;pointer-events:auto}.bxc.bx-base.bx-type-conversionbar.bx-pusher.bx-impress,.bxc.bx-base.bx-type-liquidscreen.bx-pusher.bx-impress,.bxc.bx-base.bx-type-nanobar.bx-pusher.bx-impress{pointer-events:none;visibility:hidden}.bxc.bx-base .bx-creative{position:relative;display:inline-block;max-width:100%;max-height:none;height:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden}.bxc.bx-base .bx-step{display:none}.bxc.bx-base .bx-step.bx-active-step{display:block}.bxc.bx-base.bx-width-full .bx-align,.bxc.bx-base.bx-width-full .bx-creative{width:100%}.bxc.bx-base.bx-width-full .bx-wrap{margin:0 auto}.bxc.bx-base.bx-type-agilityzone{display:none!important;clear:both}.bxc.bx-base.bx-type-agilityzone.bx-impress{display:block!important}.bxc.bx-base.bx-type-agilityzone.bx-hover-shroud-on .bx-creative{z-index:2147483643}.bxc.bx-base.bx-type-agilityzone .bx-hover-shroud{z-index:2147483642}.bxc.bx-base.bx-type-agilityzone .bx-close{z-index:auto}.bxc.bx-base.bx-type-annotation .bx-align{position:relative;z-index:2147483643}.bxc.bx-base.bx-type-annotation .bx-hover-shroud{z-index:2147483642}.bxc.bx-base.bx-type-annotation .bx-creative{position:absolute;bottom:0;left:50%;max-width:none}.bxc.bx-base.bx-type-annotation.bx-annotation-cm .bx-creative{-webkit-transform:translate(-50%,50%);-ms-transform:translate(-50%,50%);transform:translate(-50%,50%)}.bxc.bx-base.bx-type-annotation.bx-annotation-ct .bx-creative{-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0)}.bxc.bx-base.bx-type-annotation.bx-annotation-rt .bx-creative{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.bxc.bx-base.bx-type-annotation.bx-annotation-rm .bx-creative{-webkit-transform:translate(0,50%);-ms-transform:translate(0,50%);transform:translate(0,50%)}.bxc.bx-base.bx-type-annotation.bx-annotation-rb .bx-creative{-webkit-transform:translate(0,100%);-ms-transform:translate(0,100%);transform:translate(0,100%)}.bxc.bx-base.bx-type-annotation.bx-annotation-cb .bx-creative{-webkit-transform:translate(-50%,100%);-ms-transform:translate(-50%,100%);transform:translate(-50%,100%)}.bxc.bx-base.bx-type-annotation.bx-annotation-lb .bx-creative{-webkit-transform:translate(-100%,100%);-ms-transform:translate(-100%,100%);transform:translate(-100%,100%)}.bxc.bx-base.bx-type-annotation.bx-annotation-lm .bx-creative{-webkit-transform:translate(-100%,50%);-ms-transform:translate(-100%,50%);transform:translate(-100%,50%)}.bxc.bx-base.bx-type-annotation.bx-annotation-lt .bx-creative{-webkit-transform:translate(-100%,0);-ms-transform:translate(-100%,0);transform:translate(-100%,0)}.bxc.bx-base.bx-type-conversionbar.bx-pusher.bx-impress .bx-slab{visibility:hidden;position:relative;height:auto}.bxc.bx-base.bx-type-conversionbar.bx-pusher.bx-impress .bx-align{position:relative}.bxc.bx-base.bx-type-conversionbar .bx-slab{position:fixed;bottom:0;left:0;z-index:2147483643;height:100%;height:100vh;width:100%;text-align:center;overflow-x:hidden}.bxc.bx-base.bx-type-conversionbar .bx-hover-shroud{z-index:2147483642}.bxc.bx-base.bx-type-conversionbar .bx-align{position:absolute;bottom:0;width:100%}.bxc.bx-base.bx-type-nanobar.bx-pusher.bx-impress .bx-slab{visibility:hidden;position:relative}.bxc.bx-base.bx-type-nanobar.bx-pusher.bx-impress .bx-align{position:relative}.bxc.bx-base.bx-type-nanobar .bx-slab{position:fixed;top:0;left:0;z-index:2147483643;height:100%;width:100%;text-align:center;overflow-x:hidden}.bxc.bx-base.bx-type-nanobar .bx-hover-shroud{z-index:2147483642}.bxc.bx-base.bx-type-nanobar .bx-align{position:absolute;top:0;width:100%}.bxc.bx-base.bx-type-liquidscreen{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.bxc.bx-base.bx-type-liquidscreen.bx-pusher.bx-impress .bx-slab{visibility:hidden;position:relative}.bxc.bx-base.bx-type-liquidscreen .bx-slab{position:absolute;top:0;left:0;z-index:2147483637;width:100%;overflow-x:hidden}.bxc.bx-base.bx-type-liquidscreen .bx-creative{width:100%}.bxc.bx-base.bx-type-liquidscreen .bx-creative:before{min-height:100vh}.bxc.bx-base.bx-type-conversioncorner .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper .bx-align,.bxc.bx-base.bx-type-nanotab .bx-align,.bxc.bx-base.bx-type-railbar .bx-align{display:inline-block}.bxc.bx-base.bx-type-conversioncorner .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper .bx-slab,.bxc.bx-base.bx-type-nanotab .bx-slab,.bxc.bx-base.bx-type-railbar .bx-slab{position:fixed;left:0;z-index:2147483642;width:100%;height:100%;text-align:left}.bxc.bx-base.bx-type-conversioncorner .bx-slab:before,.bxc.bx-base.bx-type-dynamicwallpaper .bx-slab:before,.bxc.bx-base.bx-type-nanotab .bx-slab:before,.bxc.bx-base.bx-type-railbar .bx-slab:before{content:\"\";display:inline-block;width:0;height:100%;vertical-align:middle}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-ct .bx-align,.bxc.bx-base.bx-type-conversioncorner.bx-fixed-lt .bx-align,.bxc.bx-base.bx-type-conversioncorner.bx-fixed-rt .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-ct .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-lt .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-rt .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-ct .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-lt .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-rt .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-ct .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-lt .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-rt .bx-align{vertical-align:top}.bxc.bx-base.bx-type-conversioncorner .bx-hover-shroud,.bxc.bx-base.bx-type-dynamicwallpaper .bx-hover-shroud,.bxc.bx-base.bx-type-nanotab .bx-hover-shroud,.bxc.bx-base.bx-type-railbar .bx-hover-shroud{z-index:2147483641}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-lt .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-lt .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-lt .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-lt .bx-slab{top:0;text-align:left}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-ct .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-ct .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-ct .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-ct .bx-slab{top:0;text-align:center}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-rt .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-rt .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-rt .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-rt .bx-slab{top:0;text-align:right}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-cm .bx-align,.bxc.bx-base.bx-type-conversioncorner.bx-fixed-lm .bx-align,.bxc.bx-base.bx-type-conversioncorner.bx-fixed-rm .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-cm .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-lm .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-rm .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-cm .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-lm .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-rm .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-cm .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-lm .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-rm .bx-align{vertical-align:middle}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-lm .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-lm .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-lm .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-lm .bx-slab{top:0;text-align:left}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-cm .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-cm .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-cm .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-cm .bx-slab{top:0;text-align:center}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-rm .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-rm .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-rm .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-rm .bx-slab{top:0;text-align:right}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-cb .bx-align,.bxc.bx-base.bx-type-conversioncorner.bx-fixed-lb .bx-align,.bxc.bx-base.bx-type-conversioncorner.bx-fixed-rb .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-cb .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-lb .bx-align,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-rb .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-cb .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-lb .bx-align,.bxc.bx-base.bx-type-nanotab.bx-fixed-rb .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-cb .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-lb .bx-align,.bxc.bx-base.bx-type-railbar.bx-fixed-rb .bx-align{vertical-align:bottom}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-lb .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-lb .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-lb .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-lb .bx-slab{bottom:0;height:100vh;text-align:left}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-cb .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-cb .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-cb .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-cb .bx-slab{bottom:0;height:100vh;text-align:center}.bxc.bx-base.bx-type-conversioncorner.bx-fixed-rb .bx-slab,.bxc.bx-base.bx-type-dynamicwallpaper.bx-fixed-rb .bx-slab,.bxc.bx-base.bx-type-nanotab.bx-fixed-rb .bx-slab,.bxc.bx-base.bx-type-railbar.bx-fixed-rb .bx-slab{bottom:0;height:100vh;text-align:right}.bxc.bx-base.bx-type-dynamicwallpaper .bx-align,.bxc.bx-base.bx-type-nanotab .bx-align,.bxc.bx-base.bx-type-railbar .bx-align{vertical-align:middle}.bxc.bx-base.bx-type-conversioncorner .bx-align{vertical-align:bottom}.bxc.bx-base.bx-type-dynamicwallpaper .bx-slab{z-index:2147483643}.bxc.bx-base.bx-type-dynamicwallpaper .bx-shroud{opacity:0;z-index:2147483642}.bxc.bx-base.bx-type-dynamicwallpaper.bx-impress .bx-shroud{display:block}.bxc.bx-base.bx-type-overlay .bx-slab{position:fixed;top:0;right:0;left:0;z-index:2147483645;height:100%;overflow-x:hidden;overflow-y:auto;text-align:center;pointer-events:auto}.bx-client-overlay-ios .bxc.bx-base.bx-type-overlay .bx-slab{position:absolute}.bxc.bx-base.bx-type-overlay .bx-slab:before{content:\"\";display:inline-block;width:0;height:100%;vertical-align:middle;margin-right:-.25em}.bxc.bx-base.bx-type-overlay.bx-impress-in .bx-slab,.bxc.bx-base.bx-type-overlay.bx-impress-out .bx-slab{overflow:hidden}.bxc.bx-base.bx-type-overlay .bx-shroud{z-index:2147483644}.bx-client-overlay-ios .bxc.bx-base.bx-type-overlay .bx-shroud{position:absolute;bottom:0;height:100vh}.bxc.bx-base.bx-type-overlay .bx-powered{z-index:2147483646}.bxc.bx-base.bx-type-overlay .bx-align{display:inline-block;vertical-align:middle;padding:6px}.bxc.bx-base.bx-type-overlay .bx-creative{z-index:2147483645}.bxc.bx-base.bx-type-overlay .bx-creative:before{min-height:300px}.bxc.bx-base.bx-type-overlay.bx-impress .bx-powered,.bxc.bx-base.bx-type-overlay.bx-impress .bx-shroud{display:block}@-webkit-keyframes bx-fx-checked-bounce{0%,100%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(.8);transform:scale(.8)}}@keyframes bx-fx-checked-bounce{0%,100%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(.8);transform:scale(.8)}}@-webkit-keyframes bx-fx-invalid-shake{0%,100%{-webkit-transform:translateX(0);transform:translateX(0)}12.5%{-webkit-transform:translateX(-6px) rotateY(-5deg);transform:translateX(-6px) rotateY(-5deg)}37.5%{-webkit-transform:translateX(5px) rotateY(4deg);transform:translateX(5px) rotateY(4deg)}62.5%{-webkit-transform:translateX(-3px) rotateY(-2deg);transform:translateX(-3px) rotateY(-2deg)}87.5%{-webkit-transform:translateX(2px) rotateY(1deg);transform:translateX(2px) rotateY(1deg)}}@keyframes bx-fx-invalid-shake{0%,100%{-webkit-transform:translateX(0);transform:translateX(0)}12.5%{-webkit-transform:translateX(-6px) rotateY(-5deg);transform:translateX(-6px) rotateY(-5deg)}37.5%{-webkit-transform:translateX(5px) rotateY(4deg);transform:translateX(5px) rotateY(4deg)}62.5%{-webkit-transform:translateX(-3px) rotateY(-2deg);transform:translateX(-3px) rotateY(-2deg)}87.5%{-webkit-transform:translateX(2px) rotateY(1deg);transform:translateX(2px) rotateY(1deg)}}.bxc.bx-base.bx-fx-invalid-shake .bx-slab{-webkit-perspective:1800px;perspective:1800px}.bxc.bx-base.bx-fx-invalid-shake .bx-align{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.bxc.bx-base.bx-impress.bx-fx-invalid-shake .bx-align{-webkit-animation:bx-fx-invalid-shake .4s ease-in-out;animation:bx-fx-invalid-shake .4s ease-in-out}@-webkit-keyframes bx-fx-fade{0%{opacity:0}100%{opacity:1}}@keyframes bx-fx-fade{0%{opacity:0}100%{opacity:1}}.bxc.bx-base.bx-fx-fade.bx-impress-in .bx-creative{-webkit-animation:bx-fx-fade 1s ease;animation:bx-fx-fade 1s ease}.bxc.bx-base.bx-fx-fade.bx-impress-out .bx-creative{-webkit-animation:bx-fx-fade 1s ease reverse;animation:bx-fx-fade 1s ease reverse}.bxc.bx-base .bx-shroud{background-color:#000;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=75)\";opacity:.75}.bxc.bx-base .bx-hover-shroud{background-color:#000;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";opacity:0;-webkit-transition:.4s opacity ease-in-out;transition:.4s opacity ease-in-out}.bxc.bx-base.bx-hover-shroud-on .bx-hover-shroud{-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)\";opacity:.7}.bxc.bx-base .bx-creative{margin:0 auto;text-align:center;background-color:#fff;background-size:cover;background-repeat:no-repeat;background-position:50% 50%}.bxc.bx-base .bx-creative:before{content:\"\";display:inline-block;width:0;vertical-align:middle}.bxc.bx-base .bx-step,.bxc.bx-base .bx-wrap,.bxc.bx-base form{text-align:inherit}.bxc.bx-base .bx-wrap{display:inline-block;vertical-align:middle;margin:0 auto;width:650px;padding:10px}@media only screen{.bxc.bx-base .bx-wrap{max-width:100%}}.bxc.bx-base .bx-group,.bxc.bx-base .bx-row{display:inline-block;width:100%;vertical-align:middle}.bxc.bx-base .bx-row>.bx-el,.bxc.bx-base .bx-row>:first-child{float:none;height:auto;background-position:50% 50%;background-repeat:no-repeat;background-size:cover}.bxc.bx-base .bx-row-html{font-size:16px}.bxc.bx-base .bx-row-html iframe{display:block}.bxc.bx-base .bx-row-image{line-height:0}.bxc.bx-base .bx-row-image img{width:100%}.bxc.bx-base .bx-row-text{color:#a1a1a1;font-size:14px;cursor:default;line-height:0}.bxc.bx-base .bx-row-text>*{line-height:1}.bxc.bx-base .bx-row-text a{color:inherit;display:inline-block}.bxc.bx-base .bx-row-line .bx-lineshape{height:1px;background-color:#a1a1a1}.bxc.bx-base .bx-row-select{position:relative;border:0 transparent;font-size:14px;border-radius:0;box-shadow:none;outline:0}.bxc.bx-base .bx-row-select .bx-select{position:relative;display:inline-block;width:100%;padding:1.5em;border:1px solid #c4c4c4;color:#a0a0a0;background-color:#fff}.bxc.bx-base .bx-row-select .bx-select:before{content:\"\\00a0\"}.bxc.bx-base .bx-row-select .bx-select:after{content:\"◄►\";position:absolute;top:53%;right:15px;font-size:8px;letter-spacing:2px;color:#bdbdbd;font-family:Arial;-webkit-transform:translateY(-50%) rotate(90deg);-ms-transform:translateY(-50%) rotate(90deg);transform:translateY(-50%) rotate(90deg);pointer-events:none}.bxc.bx-base .bx-row-select .bx-select:active,.bxc.bx-base .bx-row-select .bx-select:focus{border:1px solid #91c7ed;color:#464545;background-color:#e6f5ff;outline:0}.bxc.bx-base .bx-row-select .bx-selectelem{position:absolute;top:0;right:0;bottom:0;left:0;outline:0;margin:0;width:100%;border-radius:0;border:0;padding:inherit;background-color:transparent;color:inherit;font-weight:inherit;text-transform:inherit;letter-spacing:inherit;cursor:context-menu;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;-o-appearance:none;appearance:none}.bxc.bx-base .bx-row-select .bx-selectelem::-ms-expand{display:none}.bxc.bx-base .bx-row-select option{color:initial;font-weight:initial;font-family:initial}.bxc.bx-base .bx-row-timer{color:#a0a0a0;font-size:24px;font-weight:100;cursor:default}.bxc.bx-base .bx-row-timer .bx-row-timer-digits{color:#a1a1a1}.bxc.bx-base .bx-row-coupon{color:#a0a0a0;font-size:24px;font-weight:100;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.bxc.bx-base .bx-row-radio .bx-label{display:inline-block;cursor:pointer;position:relative;padding:0;color:#a1a1a1;font-size:14px}.bxc.bx-base .bx-row-radio .bx-labeltext{vertical-align:middle}.bxc.bx-base .bx-row-radio .bx-radioelem{position:absolute;left:0;width:1px;height:1px;overflow:hidden;opacity:0}.bxc.bx-base .bx-row-radio .bx-radioelem+.bx-radioshape{border-radius:50%;display:inline-block;vertical-align:middle;margin-right:6px;background-color:#dedede;box-shadow:inset 0 1px 3px 0 rgba(0,0,0,.2),0 1px 0 0 rgba(255,255,255,.3);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);width:18px;height:18px}.bxc.bx-base .bx-row-radio .bx-radioelem:checked+.bx-radioshape{fill:#f3f3f3;background-color:#3A98FB;text-shadow:0 0 1px rgba(0,0,0,.2);-webkit-animation:bx-fx-checked-bounce .3s;animation:bx-fx-checked-bounce .3s}.bxc.bx-base .bx-row-radio .bx-radioelem:focus+.bx-radioshape{box-shadow:0 0 0 2px #91c7ed}.bxc.bx-base .bx-row-radio .bx-radioelem+.bx-radioshape .bx-radio-svg{display:none}.bxc.bx-base .bx-row-radio .bx-radioelem:checked+.bx-radioshape .bx-radio-svg{display:block}.bxc.bx-base .bx-row-radio.bx-radiosize-lrg .bx-radioelem+.bx-radioshape{width:24px;height:24px}.bxc.bx-base .bx-row-radio.bx-radiosize-lrgr .bx-radioelem+.bx-radioshape{width:36px;height:36px}.bxc.bx-base .bx-row-checkbox .bx-label{display:inline-block;cursor:pointer;position:relative;padding:0;color:#a1a1a1;font-size:14px}.bxc.bx-base .bx-row-checkbox .bx-labeltext{vertical-align:middle}.bxc.bx-base .bx-row-checkbox .bx-checkelem{position:absolute;left:0;width:1px;height:1px;overflow:hidden;opacity:0}.bxc.bx-base .bx-row-checkbox .bx-checkelem+.bx-checkshape{border-radius:3px;display:inline-block;vertical-align:middle;background-color:#dedede;box-shadow:inset 0 1px 3px 0 rgba(0,0,0,.2),0 1px 0 0 rgba(255,255,255,.3);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);width:18px;height:18px;margin-right:6px}.bxc.bx-base .bx-row-checkbox .bx-checkelem:focus+.bx-checkshape{box-shadow:0 0 0 2px #91c7ed}.bxc.bx-base .bx-row-checkbox .bx-checkelem:checked+.bx-checkshape{stroke:#f3f3f3;background-color:#3A98FB;text-shadow:0 0 1px rgba(0,0,0,.2);-webkit-animation:bx-fx-checked-bounce .25s;animation:bx-fx-checked-bounce .25s}.bxc.bx-base .bx-row-checkbox .bx-checkelem+.bx-checkshape .bx-check-svg{display:none;fill:none;stroke-width:3}.bxc.bx-base .bx-row-checkbox .bx-checkelem:checked+.bx-checkshape .bx-check-svg{display:block}.bxc.bx-base .bx-row-checkbox.bx-checksize-lrg .bx-checkelem+.bx-checkshape{width:24px;height:24px}.bxc.bx-base .bx-row-checkbox.bx-checksize-lrgr .bx-checkelem+.bx-checkshape{width:36px;height:36px}.bxc.bx-base .bx-row-checkbox.bx-check-round .bx-checkelem+.bx-checkshape .bx-check-svg{stroke-width:3;stroke-linecap:round;stroke-linejoin:round}.bxc.bx-base .bx-row-checkbox.bx-check-sharp .bx-checkelem+.bx-checkshape .bx-check-svg{stroke:none;fill:#fff}.bxc.bx-base .bx-row-submit .bx-button{width:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;text-align:center;cursor:pointer;background-color:#666;border:none;font-size:20px;border-radius:0;color:#fff;padding:1em}.bxc.bx-base .bx-row-submit .bx-button:hover{outline:0}.bxc.bx-base .bx-row-submit .bx-button:focus{outline:1px}.bxc.bx-base .bx-row-submit .bx-button:active{outline:0;top:1px}.bxc.bx-base .bx-row-input [type=\"\"],.bxc.bx-base .bx-row-input [type=color],.bxc.bx-base .bx-row-input [type=date],.bxc.bx-base .bx-row-input [type=datetime-local],.bxc.bx-base .bx-row-input [type=datetime],.bxc.bx-base .bx-row-input [type=email],.bxc.bx-base .bx-row-input [type=month],.bxc.bx-base .bx-row-input [type=number],.bxc.bx-base .bx-row-input [type=password],.bxc.bx-base .bx-row-input [type=search],.bxc.bx-base .bx-row-input [type=tel],.bxc.bx-base .bx-row-input [type=text],.bxc.bx-base .bx-row-input [type=time],.bxc.bx-base .bx-row-input [type=url],.bxc.bx-base .bx-row-input [type=week],.bxc.bx-base .bx-row-textarea .bx-textarea{width:100%;height:auto;font-size:14px;text-align:left;border-radius:0;outline:0;box-shadow:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #c4c4c4;color:#a0a0a0;background-color:#fff;padding:1.5em;background-position:10px 50%;background-repeat:no-repeat;background-size:auto;-ms-transition:none!important;-webkit-transition:padding .07s ease-in-out;transition:padding .07s ease-in-out}.bxc.bx-base .bx-row-input [type=\"\"]::-ms-clear,.bxc.bx-base .bx-row-input [type=color]::-ms-clear,.bxc.bx-base .bx-row-input [type=date]::-ms-clear,.bxc.bx-base .bx-row-input [type=datetime-local]::-ms-clear,.bxc.bx-base .bx-row-input [type=datetime]::-ms-clear,.bxc.bx-base .bx-row-input [type=email]::-ms-clear,.bxc.bx-base .bx-row-input [type=month]::-ms-clear,.bxc.bx-base .bx-row-input [type=number]::-ms-clear,.bxc.bx-base .bx-row-input [type=password]::-ms-clear,.bxc.bx-base .bx-row-input [type=search]::-ms-clear,.bxc.bx-base .bx-row-input [type=tel]::-ms-clear,.bxc.bx-base .bx-row-input [type=text]::-ms-clear,.bxc.bx-base .bx-row-input [type=time]::-ms-clear,.bxc.bx-base .bx-row-input [type=url]::-ms-clear,.bxc.bx-base .bx-row-input [type=week]::-ms-clear,.bxc.bx-base .bx-row-textarea .bx-textarea::-ms-clear{width:0;height:0}.bxc.bx-base .bx-row-input [type=\"\"]:hover,.bxc.bx-base .bx-row-input [type=color]:hover,.bxc.bx-base .bx-row-input [type=date]:hover,.bxc.bx-base .bx-row-input [type=datetime-local]:hover,.bxc.bx-base .bx-row-input [type=datetime]:hover,.bxc.bx-base .bx-row-input [type=email]:hover,.bxc.bx-base .bx-row-input [type=month]:hover,.bxc.bx-base .bx-row-input [type=number]:hover,.bxc.bx-base .bx-row-input [type=password]:hover,.bxc.bx-base .bx-row-input [type=search]:hover,.bxc.bx-base .bx-row-input [type=tel]:hover,.bxc.bx-base .bx-row-input [type=text]:hover,.bxc.bx-base .bx-row-input [type=time]:hover,.bxc.bx-base .bx-row-input [type=url]:hover,.bxc.bx-base .bx-row-input [type=week]:hover,.bxc.bx-base .bx-row-textarea .bx-textarea:hover{cursor:auto}.bxc.bx-base .bx-row-input [type=\"\"]:focus,.bxc.bx-base .bx-row-input [type=color]:focus,.bxc.bx-base .bx-row-input [type=date]:focus,.bxc.bx-base .bx-row-input [type=datetime-local]:focus,.bxc.bx-base .bx-row-input [type=datetime]:focus,.bxc.bx-base .bx-row-input [type=email]:focus,.bxc.bx-base .bx-row-input [type=month]:focus,.bxc.bx-base .bx-row-input [type=number]:focus,.bxc.bx-base .bx-row-input [type=password]:focus,.bxc.bx-base .bx-row-input [type=search]:focus,.bxc.bx-base .bx-row-input [type=tel]:focus,.bxc.bx-base .bx-row-input [type=text]:focus,.bxc.bx-base .bx-row-input [type=time]:focus,.bxc.bx-base .bx-row-input [type=url]:focus,.bxc.bx-base .bx-row-input [type=week]:focus,.bxc.bx-base .bx-row-textarea .bx-textarea:focus{border-color:#91c7ed;background-color:#e6f5ff;color:#464545;outline:0}.bxc.bx-base .bx-inputwrap{position:relative}.bxc.bx-base .bx-inputwrap .bx-placeholder{position:absolute;top:7px;right:22px;left:22px;z-index:1;display:block;line-height:normal;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";opacity:0;pointer-events:none;-ms-transition:none!important;-webkit-transition:opacity .1s ease-out;transition:opacity .1s ease-out}.bxc.bx-base .bx-inputwrap .bx-placeholdertext{display:block;color:#a0a0a0;font-size:10px;line-height:normal;text-align:left}.bxc.bx-base .bx-vbox,.bxc.bx-base .bx-vtext{display:none;font-size:10px;text-align:left;line-height:1.35;position:absolute;z-index:3}.bxc.bx-base .bx-row.bx-has-focus .bx-placeholdertext{color:#91c7ed}.bxc.bx-base .bx-row-placeholder-top.bx-has-text .bx-placeholder{-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)\";opacity:1}.bxc.bx-base .bx-row-placeholder-top.bx-has-text .bx-input,.bxc.bx-base .bx-row-placeholder-top.bx-has-text .bx-textarea{padding-top:2em;padding-bottom:1em}.bxc.bx-base .bx-vtext{padding:4px;padding-bottom:inherit;bottom:0;pointer-events:none;text-transform:none;font-style:normal;font-weight:400;letter-spacing:normal;font-family:Helvetica,Arial,sans-serif}#bcx_power a,#bcx_power a span,.bxc.bx-base .bx-powered{font-family:\'Segoe UI\',\'Open Sans\',\'Helvetica Neue\',Helvetica,Arial}.bxc.bx-base .bx-vbox{padding:4px;margin-top:-4px;margin-right:-4px;margin-left:-4px;color:#e9a6a6;border:1px solid #e9a6a6;background:#faebeb}.bxc.bx-base .bx-row-validation .bx-vbox,.bxc.bx-base .bx-row-validation .bx-vtext,.bxc.bx-base .bx-row-validation.bx-row-checkbox .bx-vtext,.bxc.bx-base .bx-row-validation.bx-row-radio .bx-vtext{display:block}.bxc.bx-base .bx-row-validation{position:relative}.bxc.bx-base .bx-row-validation .bx-select,.bxc.bx-base .bx-row-validation .bx-textarea,.bxc.bx-base .bx-row-validation [type=\"\"],.bxc.bx-base .bx-row-validation [type=color],.bxc.bx-base .bx-row-validation [type=date],.bxc.bx-base .bx-row-validation [type=datetime-local],.bxc.bx-base .bx-row-validation [type=datetime],.bxc.bx-base .bx-row-validation [type=email],.bxc.bx-base .bx-row-validation [type=month],.bxc.bx-base .bx-row-validation [type=number],.bxc.bx-base .bx-row-validation [type=password],.bxc.bx-base .bx-row-validation [type=search],.bxc.bx-base .bx-row-validation [type=tel],.bxc.bx-base .bx-row-validation [type=text],.bxc.bx-base .bx-row-validation [type=time],.bxc.bx-base .bx-row-validation [type=url],.bxc.bx-base .bx-row-validation [type=week]{border-color:#e9a6a6;background-color:#faebeb;color:#a0a0a0}.bxc.bx-base .bx-row-validation .bx-vtext{color:#E46161}.bxc.bx-base .bx-row-validation.bx-has-focus .bx-vtext{color:#91c7ed}.bxc.bx-base .bx-carb-trap.bx-input{opacity:0;width:0;height:0;padding:0;border:0;overflow:hidden}.bxc.bx-base .bx-gbi-frame{display:none}.bxc.bx-base.bx-impress .bx-gbi-frame{display:block}.bxc.bx-base .bx-close{z-index:2147483647;text-align:center;vertical-align:middle;display:none;position:absolute;cursor:pointer;top:12px;right:12px;width:26px;height:26px;border-width:0;border-radius:50%;padding:2px;background-color:transparent;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;stroke-width:2px;stroke:#b3b3b3;stroke-linejoin:miter;stroke-miterlimit:10;stroke-linecap:butt}.bxc.bx-base .bx-close:focus{box-shadow:0 0 0 2px #91c7ed}.bxc.bx-base .bx-close.bx-close-outside{position:fixed}.bxc.bx-base.bx-has-close-inside .bx-close.bx-close-inside,.bxc.bx-base.bx-has-close-outside .bx-close.bx-close-outside{display:block}.bxc.bx-base .bx-close .bx-close-xsvg{display:block;stroke:inherit;stroke-width:inherit;stroke-opacity:inherit;stroke-miterlimit:inherit;stroke-linecap:inherit;stroke-linejoin:inherit;stroke-dasharray:inherit;stroke-dashoffset:inherit}.bxc.bx-base .bx-powered{color:#fff;font-size:13px}.bxc.bx-base .bx-powered a{text-decoration:none;text-transform:none}.bxc.bx-base .bx-powered a span{text-decoration:underline}.bxc.bx-base .bx-tail{position:absolute;display:block;width:30px;height:30px;fill:#fff}.bxc.bx-base .bx-tail-placement- .bx-tail,.bxc.bx-base .bx-tail-placement-none .bx-tail,.bxc.bx-base .bx-tail-placement-off .bx-tail{display:none}.bxc.bx-base .bx-tail-placement-top .bx-tail{top:0;left:50%;-webkit-transform:translate(-50%,-100%) rotate(180deg);-ms-transform:translate(-50%,-100%) rotate(180deg);transform:translate(-50%,-100%) rotate(180deg)}.bxc.bx-base .bx-tail-placement-right .bx-tail{top:50%;right:0;-webkit-transform:translate(100%,-50%) rotate(270deg);-ms-transform:translate(100%,-50%) rotate(270deg);transform:translate(100%,-50%) rotate(270deg)}.bxc.bx-base .bx-tail-placement-bottom .bx-tail{bottom:0;left:50%;-webkit-transform:translate(-50%,100%);-ms-transform:translate(-50%,100%);transform:translate(-50%,100%)}.bxc.bx-base .bx-tail-placement-left .bx-tail{top:50%;left:0;-webkit-transform:translate(-100%,-50%) rotate(90deg);-ms-transform:translate(-100%,-50%) rotate(90deg);transform:translate(-100%,-50%) rotate(90deg)}.bxc.bx-base .bx-tail-placement-topright .bx-tail{top:0;right:0;-webkit-transform:translate(50%,-50%) rotate(225deg);-ms-transform:translate(50%,-50%) rotate(225deg);transform:translate(50%,-50%) rotate(225deg)}.bxc.bx-base .bx-tail-placement-bottomright .bx-tail{top:100%;right:0;-webkit-transform:translate(50%,-50%) rotate(315deg);-ms-transform:translate(50%,-50%) rotate(315deg);transform:translate(50%,-50%) rotate(315deg)}.bxc.bx-base .bx-tail-placement-bottomleft .bx-tail{top:100%;left:0;-webkit-transform:translate(-50%,-50%) rotate(45deg);-ms-transform:translate(-50%,-50%) rotate(45deg);transform:translate(-50%,-50%) rotate(45deg)}.bxc.bx-base .bx-tail-placement-topleft .bx-tail{top:0;left:0;-webkit-transform:translate(-50%,-50%) rotate(135deg);-ms-transform:translate(-50%,-50%) rotate(135deg);transform:translate(-50%,-50%) rotate(135deg)}.bxc.bx-base .bx-ally-label,.bxc.bx-base .bx-ally-tab-decoy,.bxc.bx-base .bx-ally-title{width:1px;height:1px;padding:0;border:0;overflow:hidden;opacity:0;position:fixed;z-index:-1}.bcx_middle_fix,.bxc.bx-base .bx-ally-label{position:absolute}.bxc.bx-ally .bx-close:focus,.bxc.bx-ally .bx-row-checkbox .bx-checkelem:focus+.bx-checkshape,.bxc.bx-ally .bx-row-radio .bx-radioelem:focus+.bx-radioshape{box-shadow:none}.bxc.bx-ally .bx-row-checkbox .bx-checkelem:focus+.bx-checkshape,.bxc.bx-ally .bx-row-input [type=\"\"]:focus,.bxc.bx-ally .bx-row-input [type=color]:focus,.bxc.bx-ally .bx-row-input [type=date]:focus,.bxc.bx-ally .bx-row-input [type=datetime-local]:focus,.bxc.bx-ally .bx-row-input [type=datetime]:focus,.bxc.bx-ally .bx-row-input [type=email]:focus,.bxc.bx-ally .bx-row-input [type=month]:focus,.bxc.bx-ally .bx-row-input [type=number]:focus,.bxc.bx-ally .bx-row-input [type=password]:focus,.bxc.bx-ally .bx-row-input [type=search]:focus,.bxc.bx-ally .bx-row-input [type=tel]:focus,.bxc.bx-ally .bx-row-input [type=text]:focus,.bxc.bx-ally .bx-row-input [type=time]:focus,.bxc.bx-ally .bx-row-input [type=url]:focus,.bxc.bx-ally .bx-row-input [type=week]:focus,.bxc.bx-ally .bx-row-radio .bx-radioelem:focus+.bx-radioshape,.bxc.bx-ally .bx-row-select .bx-selectelem:focus,.bxc.bx-ally .bx-row-submit .bx-button:focus,.bxc.bx-ally .bx-row-textarea .bx-textarea:focus,.bxc.bx-ally a:focus,.bxc.bx-ally button:focus,.bxc.bx-ally form:focus{outline:#91c7ed solid 3px}.bcx_container.bcx_overlay{top:0;left:0;overflow:hidden;width:100%;height:100%;z-index:2147483645}.bcx_middle_fix{top:0;left:0;width:100%;height:100%}.bouncex_lightbox{width:100%;height:100%;opacity:0;-webkit-transition:all .4s;-moz-transition:all .4s;transition:all .4s}.bcx_container.bcx_overlay,.bouncex_header_bottom,.bouncex_header_top{position:fixed;filter:inherit}.bouncex_header_bottom,.bouncex_header_top{width:100%;z-index:2147483644}#bcx_power{position:absolute;bottom:20px;left:20px;z-index:2147483646;color:#fff!important}#bcx_power a,#bcx_power a span{color:#fff!important;font-size:15px;text-decoration:none}#bcx_power a span{text-decoration:underline}.bouncex_header_top{top:0}.bouncex_header_bottom,.bouncex_header_top{left:0}.bouncex_header_bottom.bcx_middle,.bouncex_header_top.bcx_middle{top:50%}.bouncex_header_bottom.right,.bouncex_header_top.right{right:0;left:auto}.bouncex_header_bottom.bcx_center .bcx_inner,.bouncex_header_bottom.center .bcx_inner,.bouncex_header_top.bcx_center .bcx_inner,.bouncex_header_top.center .bcx_inner{margin:0 auto}.bouncex_header_bottom.left_content,.bouncex_header_bottom.right_content,.bouncex_header_top.left_content,.bouncex_header_top.right_content{left:50%;right:auto}.bouncex_middle{position:absolute;top:50%;left:50%;z-index:2147483645}.bcx_callout{position:absolute;z-index:2147483643}.bouncex_header_bottom{bottom:0}a.bouncex_close{width:34px;height:34px;display:block;position:absolute;right:0;top:0;z-index:2147483647;background:url(https://assets.bounceexchange.com/assets/global/images/close.png) no-repeat}a.bouncex_close span{font-size:0;visibility:hidden;color:transparent}.bouncex_close{margin:-25px}.bcx_close_overlay{margin:-15px}a.bouncex_close.bcx_close_modern{margin:.65em;padding:4px;background-size:50% 50%;background-position:50% 50%;border:1px solid transparent;box-sizing:content-box}a.bouncex_close.bcx_close_modern:after{content:url(https://assets.bounceexchange.com/assets/uploads/users/279/3zsHvZVu.png);display:none}a.bouncex_close.bcx_close_modern:hover{background-color:#e79792;border-radius:50%;background-image:url(https://assets.bounceexchange.com/assets/uploads/users/279/3zsHvZVu.png)}a.bouncex_close.size_50{width:17px;height:17px;background-image:url(https://assets.bounceexchange.com/assets/global/images/close50.png)}a.bouncex_close.size_50.bcx_close_modern{width:8.5px;height:8.5px}a.bouncex_close.size_75{width:26px;height:26px;background-image:url(https://assets.bounceexchange.com/assets/global/images/close75.png)}a.bouncex_close.size_75.bcx_close_modern{width:13px;height:13px}a.bouncex_close.size_100.bcx_close_modern{width:17px;height:17px}a.bouncex_close.size_150{width:51px;height:51px;background-image:url(https://assets.bounceexchange.com/assets/global/images/close150.png)}a.bouncex_close.size_150.bcx_close_modern{width:25.5px;height:25.5px}a.bouncex_close.size_200{width:68px;height:68px;background-image:url(https://assets.bounceexchange.com/assets/global/images/close200.png)}a.bouncex_close.bcx_close_black{background-image:url(//assets.bounceexchange.com/assets/global/images/close-black.png)}a.bouncex_close.bcx_close_fill,a.bouncex_close.bcx_close_gray{background-image:url(//assets.bounceexchange.com/assets/global/images/close-gray.png)}a.bouncex_close.bcx_close_white{background-image:url(//assets.bounceexchange.com/assets/global/images/close-white.png)}a.bouncex_close.bcx_close_fill{background-color:#e4e4e4;border-radius:50%}a.bouncex_close.size_200.bcx_close_modern{width:34px;height:34px}a.bouncex_close.bcx_close_header_bottom,a.bouncex_close.bcx_close_header_top{top:5px;right:5px;margin:0}a.bouncex_close.bcx_close_header_bottom.left,a.bouncex_close.bcx_close_header_bottom.left_content,a.bouncex_close.bcx_close_header_top.left,a.bouncex_close.bcx_close_header_top.left_content,a.bouncex_close.bcx_close_overlay.top_left{left:5px}.bcx_container{display:none}.bcx_container a,.bcx_container img{border:0}.bcx_container .bcx_inner{position:relative;width:100%;height:100%}.bcx_container .bcx_inner .bcx_ie_fix{position:absolute;top:0;left:0;width:100%;height:10px;z-index:5;background-image:url(about:blank);display:block}#bcx_form .wmode.wafter,.bcx_rslide .bcx_inner{display:none}.bcx_container .bcx_inner iframe{overflow:hidden;z-index:1;top:0;left:0;width:100%;height:100%;position:absolute}.bcx_container.bcx_overlay button,.bcx_container.bcx_overlay form,.bcx_container.bcx_overlay input,.bcx_container.bcx_overlay select{margin:0;padding:0;border:none;background:0 0}.bouncex_abs_error{position:absolute;color:#ff1919;z-index:999999;font-size:12px;font-style:normal;font-family:sans-serif;font-weight:500}.bcx_container iframe{width:100%!important;height:100%!important;padding:0!important}.bcx_el select:focus option{color:#000}#bcx_frame_body{margin:0;padding:0;overflow:hidden}#bcx_frame_body a,#bcx_frame_body img{border:none}#bcx_form{position:relative}#bcx_form .wmode{position:absolute}#bcx_form .form_slide{position:relative;width:100%;height:100%}.bcx_el.dd select option:hover{background-color:#eee!important}.bcx_el input:focus{outline:0}.bcx_el select::-webkit-scrollbar{-webkit-appearance:none}.bcx_el select::-webkit-scrollbar:vertical{width:11px}.bcx_el select::-webkit-scrollbar:horizontal{height:11px}.bcx_el select::-webkit-scrollbar-thumb{border-radius:8px;border:2px solid #fff;background-color:rgba(0,0,0,.5)}.bcx_el select::-webkit-scrollbar-track{background-color:#fff;border-radius:8px}.wmode{-webkit-transition:all .5s ease-out;-moz-transition:all .5s ease-out;-ms-transform:all .5s ease-out;transition:all .5s ease-out}.bcx_fslide .wmode{left:100%}.bcx_fslide .wmode.wbefore{left:0}.bcx_ffade .wmode{opacity:.25}.bcx_ffade .wmode.wbefore{opacity:1}.bcx_r3dbrotate,.bcx_r3dlrotate,.bcx_r3dsign,.bcx_r3dslit,.bcx_rfall,.bcx_rh3dflip,.bcx_rrotate,.bcx_rslidefall,.bcx_rv3dflip{-webkit-perspective:1300px;-moz-perspective:1300px;perspective:1300px}.bcx_rblur .bcx_outer{-webkit-transform:translateY(-5%);-moz-transform:translateY(-5%);-ms-transform:translateY(-5%);transform:translateY(-5%);opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}.bcx_r3dlrotate .bcx_outer,.bcx_rjustme .bcx_outer{-webkit-transition:all .3s;-moz-transition:all .3s}.bcx_rblur.bcx_after .bcx_outer{-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);opacity:1}.bcx_r3dlrotate .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translateZ(100px) translateX(-30%) rotateY(90deg);-moz-transform:translateZ(100px) translateX(-30%) rotateY(90deg);-ms-transform:translateZ(100px) translateX(-30%) rotateY(90deg);transform:translateZ(100px) translateX(-30%) rotateY(90deg);-webkit-transform-origin:0 100%;-moz-transform-origin:0 100%;transform-origin:0 100%;opacity:0;transition:all .3s}.bcx_r3dlrotate.bcx_after .bcx_outer{-webkit-transform:translateZ(0) translateX(0) rotateY(0);-moz-transform:translateZ(0) translateX(0) rotateY(0);-ms-transform:translateZ(0) translateX(0) rotateY(0);transform:translateZ(0) translateX(0) rotateY(0);opacity:1}.bcx_r3dbrotate .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translateY(100%) rotateX(90deg);-moz-transform:translateY(100%) rotateX(90deg);-ms-transform:translateY(100%) rotateX(90deg);transform:translateY(100%) rotateX(90deg);-webkit-transform-origin:0 100%;-moz-transform-origin:0 100%;transform-origin:0 100%;opacity:0;-webkit-transition:all .3s ease-out;-moz-transition:all .3s ease-out;transition:all .3s ease-out}.bcx_r3dbrotate.bcx_after .bcx_outer{-webkit-transform:translateY(0) rotateX(0);-moz-transform:translateY(0) rotateX(0);-ms-transform:translateY(0) rotateX(0);transform:translateY(0) rotateX(0);opacity:1}.bcx_r3dslit .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translateZ(-3000px) rotateY(90deg);-moz-transform:translateZ(-3000px) rotateY(90deg);-ms-transform:translateZ(-3000px) rotateY(90deg);transform:translateZ(-3000px) rotateY(90deg);opacity:0}.bcx_r3dslit.bcx_after .bcx_outer{-webkit-animation:slit .7s forwards ease-out;-moz-animation:slit .7s forwards ease-out;animation:slit .7s forwards ease-out}@-webkit-keyframes slit{50%{-webkit-transform:translateZ(-250px) rotateY(89deg);opacity:.5;-webkit-animation-timing-function:ease-out}100%{-webkit-transform:translateZ(0) rotateY(0);opacity:1}}@-moz-keyframes slit{50%{-moz-transform:translateZ(-250px) rotateY(89deg);opacity:.5;-moz-animation-timing-function:ease-out}100%{-moz-transform:translateZ(0) rotateY(0);opacity:1}}@keyframes slit{50%{transform:translateZ(-250px) rotateY(89deg);opacity:1;animation-timing-function:ease-in}100%{transform:translateZ(0) rotateY(0);opacity:1}}.bcx_rjustme .bcx_outer{-webkit-transform:scale(.8);-moz-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8);opacity:0;transition:all .3s;background:0 0}.bcx_r3dsign .bcx_outer,.bcx_rv3dflip .bcx_outer{-webkit-transition:all .3s;-moz-transition:all .3s}.bcx_rjustme.bcx_after .bcx_outer{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1}.bcx_r3dsign .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:rotateX(-60deg);-moz-transform:rotateX(-60deg);-ms-transform:rotateX(-60deg);transform:rotateX(-60deg);-webkit-transform-origin:50% 0;-moz-transform-origin:50% 0;transform-origin:50% 0;opacity:0;transition:all .3s}.bcx_r3dsign.bcx_after .bcx_outer{-webkit-transform:rotateX(0);-moz-transform:rotateX(0);-ms-transform:rotateX(0);transform:rotateX(0);opacity:1}.bcx_rv3dflip .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:rotateX(-70deg);-moz-transform:rotateX(-70deg);-ms-transform:rotateX(-70deg);transform:rotateX(-70deg);transition:all .3s;opacity:0}.bcx_rv3dflip.bcx_after .bcx_outer{-webkit-transform:rotateX(0);-moz-transform:rotateX(0);-ms-transform:rotateX(0);transform:rotateX(0);opacity:1}.bcx_rh3dflip .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:rotateY(-70deg);-moz-transform:rotateY(-70deg);-ms-transform:rotateY(-70deg);transform:rotateY(-70deg);-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s;opacity:0}.bcx_rh3dflip.bcx_after .bcx_outer{-webkit-transform:rotateY(0);-moz-transform:rotateY(0);-ms-transform:rotateY(0);transform:rotateY(0);opacity:1}.bcx_rslidefall .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translate(30%) translateZ(600px) rotate(10deg);-moz-transform:translate(30%) translateZ(600px) rotate(10deg);-ms-transform:translate(30%) translateZ(600px) rotate(10deg);transform:translate(30%) translateZ(600px) rotate(10deg);opacity:0}.bcx_rslidefall.bcx_after .bcx_outer{-webkit-transition:all .3s ease-in;-moz-transition:all .3s ease-in;transition:all .3s ease-in;-webkit-transform:translate(0) translateZ(0) rotate(0);-moz-transform:translate(0) translateZ(0) rotate(0);-ms-transform:translate(0) translateZ(0) rotate(0);transform:translate(0) translateZ(0) rotate(0);opacity:1}.bcx_rfall .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translateZ(600px) rotateX(20deg);-moz-transform:translateZ(600px) rotateX(20deg);-ms-transform:translateZ(600px) rotateX(20deg);transform:translateZ(600px) rotateX(20deg);opacity:0}.bcx_rfall.bcx_after .bcx_outer{-webkit-transition:all .3s ease-in;-moz-transition:all .3s ease-in;transition:all .3s ease-in;-webkit-transform:translateZ(0) rotateX(0);-moz-transform:translateZ(0) rotateX(0);-ms-transform:translateZ(0) rotateX(0);transform:translateZ(0) rotateX(0);opacity:1}.bcx_rsuperscale .bcx_outer{-webkit-transform:scale(2);-moz-transform:scale(2);-ms-transform:scale(2);transform:scale(2);opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}.bcx_rsuperscale.bcx_after .bcx_outer{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1}.bcx_rfadescale .bcx_outer{-webkit-transform:scale(.7);-moz-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}.bcx_rfadescale.bcx_after .bcx_outer{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1}.bcx_rrslide .bcx_outer{-webkit-transform:translateX(20%);-moz-transform:translateX(20%);-ms-transform:translateX(20%);transform:translateX(20%);opacity:0;-webkit-transition:all .3s cubic-bezier(.25,.5,.5,.9);-moz-transition:all .3s cubic-bezier(.25,.5,.5,.9);transition:all .3s cubic-bezier(.25,.5,.5,.9)}.bcx_rrslide.bcx_after .bcx_outer{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);opacity:1}.bcx_rbslide .bcx_outer{-webkit-transform:translateY(20%);-moz-transform:translateY(20%);-ms-transform:translateY(20%);transform:translateY(20%);opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}.bcx_rbslide.bcx_after .bcx_outer{-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);opacity:1}.bcx_rnews .bcx_outer{-webkit-transform:scale(0) rotate(720deg);-moz-transform:scale(0) rotate(720deg);-ms-transform:scale(0) rotate(720deg);transform:scale(0) rotate(720deg);opacity:0;-webkit-transition:all .5s;-moz-transition:all .5s;transition:all .5s}.bcx_rgen .bcx_outer,.bcx_rscale .bcx_outer{-webkit-transition:all .3s;-moz-transition:all .3s}.bcx_rnews.bcx_after .bcx_outer{-webkit-transform:scale(1) rotate(0);-moz-transform:scale(1) rotate(0);-ms-transform:scale(1) rotate(0);transform:scale(1) rotate(0);opacity:1}.bcx_rgen .bcx_outer{opacity:0;transition:all .3s}.bcx_rgen.bcx_after .bcx_outer{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1}.bcx_rscale .bcx_outer{-webkit-transform:scale(4);-moz-transform:scale(2);-ms-transform:scale(2);transform:scale(2);opacity:0;transition:all .3s}.bcx_rscale.bcx_after .bcx_outer{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1}.bcx_rrotate .bcx_outer{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translateZ(100px) translateX(-30%) rotateY(90deg);-moz-transform:translateZ(100px) translateX(-30%) rotateY(90deg);-ms-transform:translateZ(100px) translateX(-30%) rotateY(90deg);transform:translateZ(100px) translateX(-30%) rotateY(90deg);-webkit-transform-origin:0 100%;-moz-transform-origin:0 100%;transform-origin:0 100%;opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}.bcx_rrotate.bcx_after .bcx_inner{-webkit-transform:translateZ(0) translateX(0) rotateY(0);-moz-transform:translateZ(0) translateX(0) rotateY(0);-ms-transform:translateZ(0) translateX(0) rotateY(0);transform:translateZ(0) translateX(0) rotateY(0);opacity:1}.bcx_rslide.bcx_after .bcx_inner{display:block;animation:animationFrames ease 1s;animation-iteration-count:1;animation-fill-mode:forwards;-webkit-animation:animationFrames ease 1s;-webkit-animation-iteration-count:1;-webkit-animation-fill-mode:forwards;-moz-animation:animationFrames ease 1s;-moz-animation-iteration-count:1;-moz-animation-fill-mode:forwards;-o-animation:animationFrames ease 1s;-o-animation-iteration-count:1;-o-animation-fill-mode:forwards;-ms-animation:animationFrames ease 1s;-ms-animation-iteration-count:1;-ms-animation-fill-mode:forwards}.bcx_rrrslide .bcx_inner{display:none}.bcx_rrrslide.bcx_after .bcx_inner{display:block;animation:animationFramesRight ease 1s;animation-iteration-count:1;animation-fill-mode:forwards;-webkit-animation:animationFramesRight ease 1s;-webkit-animation-iteration-count:1;-webkit-animation-fill-mode:forwards;-moz-animation:animationFramesRight ease 1s;-moz-animation-iteration-count:1;-moz-animation-fill-mode:forwards;-o-animation:animationFramesRight ease 1s;-o-animation-iteration-count:1;-o-animation-fill-mode:forwards;-ms-animation:animationFramesRight ease 1s;-ms-animation-iteration-count:1;-ms-animation-fill-mode:forwards}@keyframes animationFrames{0%{left:-1500px;top:0;opacity:0;transform:rotate(0) scaleX(1) scaleY(1)}60%{left:30px;opacity:1}80%{left:-10px}100%{left:0;top:0;opacity:1;transform:rotate(0) scaleX(1) scaleY(1)}}@-moz-keyframes animationFrames{0%{left:-1500px;top:0;opacity:0;-moz-transform:rotate(0) scaleX(1) scaleY(1)}60%{left:30px;opacity:1}80%{left:-10px}100%{left:0;top:0;opacity:1;-moz-transform:rotate(0) scaleX(1) scaleY(1)}}@-webkit-keyframes animationFrames{0%{left:-1500px;top:0;opacity:0;-webkit-transform:rotate(0) scaleX(1) scaleY(1)}60%{left:30px;opacity:1}80%{left:-10px}100%{left:0;top:0;opacity:1;-webkit-transform:rotate(0) scaleX(1) scaleY(1)}}@-o-keyframes animationFrames{0%{left:-1500px;top:0;opacity:0;-o-transform:rotate(0) scaleX(1) scaleY(1)}60%{left:30px;opacity:1}80%{left:-10px}100%{left:0;top:0;opacity:1;-o-transform:rotate(0) scaleX(1) scaleY(1)}}@keyframes animationFramesRight{0%{right:-1500px;top:0;opacity:0;transform:rotate(0) scaleX(1) scaleY(1)}60%{right:30px;opacity:1}80%{right:-10px}100%{right:0;top:0;opacity:1;transform:rotate(0) scaleX(1) scaleY(1)}}@-moz-keyframes animationFramesRight{0%{right:-1500px;top:0;opacity:0;-moz-transform:rotate(0) scaleX(1) scaleY(1)}60%{right:30px;opacity:1}80%{right:-10px}100%{right:0;top:0;opacity:1;-moz-transform:rotate(0) scaleX(1) scaleY(1)}}@-webkit-keyframes animationFramesRight{0%{right:-1500px;top:0;opacity:0;-webkit-transform:rotate(0) scaleX(1) scaleY(1)}60%{right:30px;opacity:1}80%{right:-10px}100%{right:0;top:0;opacity:1;-webkit-transform:rotate(0) scaleX(1) scaleY(1)}}@-o-keyframes animationFramesRight{0%{right:-1500px;top:0;opacity:0;-o-transform:rotate(0) scaleX(1) scaleY(1)}60%{right:30px;opacity:1}80%{right:-10px}100%{right:0;top:0;opacity:1;-o-transform:rotate(0) scaleX(1) scaleY(1)}}';
		bouncex.$ = window.jQuery;
		bouncex.env = 'production';
		var bcx_init=function(){perf.times("bcx_init");init_browser();if(!can_init())return;init_public_functions();init_errs_reporting();bouncex.local_storage_enabled=can_local_store();bouncex.cookie_too_large=false;if(!bouncex.local_storage_enabled&&bouncex.website.ct!="multi_cookie")if(!checkCookieEligibility())bouncex.cookie_too_large=true;var proto=bouncex.website.force_https?"https:":window.location.protocol;bouncex.sau="https://"+bouncex.website.bau;if(bouncex.website.beu.indexOf("127.0.0.1")!==-1)bouncex.seu=
"http://"+bouncex.website.beu;else bouncex.seu="https://"+bouncex.website.beu;bouncex.au=proto+"//"+bouncex.website.bau;bouncex.eu=proto+"//"+bouncex.website.beu;tryCatch(init_cookie_functions)();var referrer=document.referrer;bouncex.referrer="";bouncex.is_google_pla=0;if(referrer){bouncex.referrer=encodeURIComponent(referrer.split("/")[2]);if(referrer.indexOf("google.")>-1)bouncex.is_google_pla=+(referrer.indexOf("ctype=5")>-1)}bouncex.calling_url=encodeURIComponent(window.location.href);bouncex.ssl=
window.location.protocol=="https:";bouncex.cookie_domain=false;if(bouncex.website.uwc||bouncex.website.ct=="multi_cookie"||bouncex.website.ct=="fp_local_storage")if(bouncex.calling_url.indexOf(bouncex.website.domain)>0)bouncex.cookie_domain=bouncex.website.domain;init_visit_cookie();init_ibx();if(bouncex.website.ba.enabled)initBa();if(bouncex.website.is_preview){var wsize=wndsize();var resolution=wsize.width+"x"+wsize.height;baddjs(bouncex.au+"/bounce/initp.js?campaign_id="+bouncex.website.campaign_id+
"&resolution="+resolution)}else if(!bouncex.local_storage_enabled&&!bouncex.local_storage_initialized)init_post_cookie();else;bouncex.eventLog=[];bouncex.passiveEventRegistry={};if(sessionStorage){var bxDashUrl=sessionStorage.getItem("bxDashUrl");if(bxDashUrl&&bxDashUrl.indexOf("bounceexchange.com")!==-1)baddjs(bxDashUrl)}};function init_debug(){bouncex.debug=bouncex.cookie.hcs_bxtest||bouncex.calling_url.indexOf("bxtest")!==-1?true:false}
function init_post_cookie(){init_cookie();perf.times("init_post_cookie");bouncex.cookieReady=true;initPushedData();if(bouncex.website.bpush)bouncex.psh.init_supported();if(typeof window.bxconv==="object")report_conversion_sync(window.bxconv);init_debug();bcxReady(function(){init_page_types();CustomVariables.init();if(bouncex.website.gbi_enabled)bouncex.website.gbi_enabled=canShowGbi();bcx_str=make_include_string();baddjs(bcx_str)})}
function sanitizeMetadata(sanitizedEventName,metadata,nonNamespacedParams){var sanitizedMetadata={};nonNamespacedParams=nonNamespacedParams||[];for(k in metadata)if(metadata.hasOwnProperty(k)){var sanitizedKey=k.trim().toLowerCase();if(sanitizedKey.indexOf(":")===-1&&nonNamespacedParams.indexOf(sanitizedKey)===-1)sanitizedKey=sanitizedEventName+":"+sanitizedKey;var sanitizedValue=metadata[k];if(typeof sanitizedValue==="string")sanitizedValue=sanitizedValue.trim();sanitizedMetadata[sanitizedKey]=sanitizedValue}return sanitizedMetadata}
function pushItemEvent(sanitizedEventName,metadata){var sanitizedMetadata=sanitizeMetadata(sanitizedEventName,metadata);if(bouncex.website.ete==1){if(!bouncex.et.item.validate(sanitizedMetadata))return false;if(bouncex.et.item.requireImageLoad&&sanitizedMetadata["item:imageurl"]){var image=new Image;image.onload=function(){event_stream_report(sanitizedEventName,sanitizedMetadata)};image.src=sanitizedMetadata["item:imageurl"]}else event_stream_report(sanitizedEventName,sanitizedMetadata)}else event_stream_report(sanitizedEventName,
sanitizedMetadata)}function pushRequestemailEvent(sanitizedEventName,metadata){var nonNamespacedParams=["email","campaignid","parentcampaignid"];var sanitizedMetadata=sanitizeMetadata(sanitizedEventName,metadata,nonNamespacedParams);if(!sanitizedMetadata.campaignid||!sanitizedMetadata.email||!bouncex.utils.validate.email(sanitizedMetadata.email))return false;sanitizedMetadata["user:email"]=sanitizedMetadata.email;event_stream_report(sanitizedEventName,sanitizedMetadata)}
function pushRequestpushEvent(sanitizedEventName,metadata){var nonNamespacedParams=["campaignid","parentcampaignid"];var sanitizedMetadata=sanitizeMetadata(sanitizedEventName,metadata,nonNamespacedParams);if(!sanitizedMetadata.campaignid)return false;event_stream_report(sanitizedEventName,sanitizedMetadata)}
function pushUserEvent(sanitizedEventName,metadata){if(!metadata.email&&!metadata.emailHash)return false;if(metadata.email&&!bouncex.utils.validate.email(metadata.email))return false;metadata["user:gcr"]=bouncex&&bouncex.cookie?bouncex.cookie.gcr:99;metadata["agent"]="js";metadata["eq"]=1;var nonNamespacedParams=["agent","eq","campaignid"];var sanitizedMetadata=sanitizeMetadata(sanitizedEventName,metadata,nonNamespacedParams);event_stream_report(sanitizedEventName,sanitizedMetadata);bouncex.cookie.uid=
1;setBounceCookie();bouncex.utils.cookies.create({name:"__ibxu",value:"1",domain:"."+bouncex.utils.cookies.domain,days:365})}
function processPushedData(eventName,metadata){metadata=metadata||{};var sanitizedEventName=eventName.trim().toLowerCase();if(sanitizedEventName=="conversion")report_conversion_sync(metadata,"pushdata");else if(sanitizedEventName=="bx-load-hide")bouncex.usd=metadata;else if(sanitizedEventName==="item")pushItemEvent(sanitizedEventName,metadata);else if(eventName=="requestemail")pushRequestemailEvent(sanitizedEventName,metadata);else if(eventName=="requestpush")pushRequestpushEvent(sanitizedEventName,
metadata);else if(eventName=="user")pushUserEvent(sanitizedEventName,metadata);else{var sanitizedMetadata=sanitizeMetadata(sanitizedEventName,metadata);event_stream_report(sanitizedEventName,sanitizedMetadata)}}function initPushedData(){var pushedDataLength=bouncex.pushedData.length;for(var i=0;i<pushedDataLength;i++)processPushedData(bouncex.pushedData[i][0],bouncex.pushedData[i][1]);bouncex.pushedData=[]}
bouncex.push=function(pushData){if(bouncex.cookieReady)processPushedData(pushData[0],pushData[1]);else bouncex.pushedData.push(pushData)};
function can_init(){if(document.visibilityState)if(document.visibilityState==="prerender"){addEvent(document,"visibilitychange",function visibilityListener(){if(document.visibilityState!=="prerender"){removeEvent(document,"visibilitychange",visibilityListener);bcx_init()}});bouncex.prerendered=true;return false}if(bouncex.baddjs)return false;if(!JSON.parse)return false;if(!window["postMessage"])return false;if(!bouncex.website.ei&&window!=window.top)return false;if(!areCookiesEnabled())return false;
if(bouncex.browser.prerenderio)return false;if(bouncex.browser.msie&&bouncex.browser.msie<11)return false;if(bouncex.website.burls.length)for(var k in bouncex.website.burls)if(bouncex.website.burls.hasOwnProperty(k)){var burl=bouncex.website.burls[k];if(burl.prop.indexOf("contains")!=-1){var c=window.location.href.indexOf(burl.val);if(burl.prop=="contains"&&c!=-1||burl.prop=="not_contains"&&c==-1)return false}else if(burl.prop.indexOf("regex_match")!=-1){var m=(new RegExp(burl.val,"gi")).test(window.location.href);
if(burl.prop=="regex_match"&&m||burl.prop=="not_regex_match"&&!m)return false}}if(bouncex.website.ct==="fp_local_storage"&&!fpLocalStorageAvailable())return false;return true}
function init_visit_cookie(){var c=getBounceVisitCookie();if(c)bouncex.visit_cookie=bouncex.parseJSON(c);if(!bouncex.visit_cookie){bouncex.visit_cookie={};bouncex.visit_cookie.lp=bouncex.calling_url.substring(0,500).replace(/\+/g,"%2B").replace(/\%[A-F0-9]?[^A-F0-9]/,"");bouncex.visit_cookie.r=bouncex.referrer;bouncex.visit_cookie.ueh=getParam("ueh")||undefined;setBounceVisitCookie()}else if(!bouncex.visit_cookie.ueh){bouncex.visit_cookie.ueh=getParam("ueh")||undefined;if(bouncex.visit_cookie.ueh)setBounceVisitCookie()}}
function init_cookie(){bouncex.cookie=getBounceCookie();if(!bouncex.cookie.vid){if(bouncex.website.ct=="fp_local_storage")bouncex.cookie=getBounceCookieSingle();else bouncex.cookie=getBounceCookieFPLocalStorage();if(bouncex.cookie.vid)setBounceCookie()}if(bouncex.website.ct=="fp_local_storage")addEvent(window,"storage",function(data){if(data.key==bouncex.website.cookie_name&&data.newValue)bouncex.cookie=bouncex.getBounceCookie()},false)}
function init_cookie_functions(){perf.times("init_cookie_functions");if(bouncex.local_storage_enabled){window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieLocalStorage;window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieLocalStorage;init_cookie_localstorage()}else if(bouncex.website.ct=="multi_cookie"){window.MultiCookie=MultiCookie;window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieMulti;window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieMulti}else if(bouncex.website.ct==
"fp_local_storage"){window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieFPLocalStorage;window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieFPLocalStorage}else{window.getBounceCookie=bouncex.getBounceCookie=getBounceCookieSingle;window.setBounceCookie=bouncex.setBounceCookie=setBounceCookieSingle}window.setBounceVisitCookie=setBounceVisitCookie;window.getBounceVisitCookie=getBounceVisitCookie;window.clearBounceCookie=clearBounceCookie;bouncex.stringify_cookie=stringify_cookie;bouncex.lz=
bouncex.lz||function(){var f=String.fromCharCode;var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}var LZString={compressToURI:function(input){if(input==null)return"";return LZString._compress(input,6,function(a){return keyStrUriSafe.charAt(a)})},
decompressFromURI:function(input){if(input==null)return"";if(input=="")return null;try{input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})}catch(e){bouncex.err(e,{source:"decompressFromURI"});return""}},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(uncompressed==null)return"";var i,value,
context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,
context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-
1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==
bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));
context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=
0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=
0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=
context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==
bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=value>>1}while(true){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}else context_data_position++}return context_data.join("")},decompress:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,32768,
function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],i,w,bits,resb,maxpower,power,c,data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1)dictionary[i]=i;bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>
0?1:0)*power;power<<=1}switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:
0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length)return"";bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==
0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join("")}if(enlargeIn==0){enlargeIn=
Math.pow(2,numBits);numBits++}if(dictionary[c])entry=dictionary[c];else if(c===dictSize)entry=w+w.charAt(0);else return null;result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}}}};return LZString}()}function can_local_store(){if(bouncex.browser.ios&&bouncex.browser.chrome)return false;return bouncex.website.aco.local_storage}
function setLocalStorageCookie(msg_cookie){var cookie_one_or_many=bouncex.parseJSON(decodeURIComponent(msg_cookie));if(cookie_one_or_many&&cookie_one_or_many[bouncex.website.id]){bouncex.cookies=cookie_one_or_many;bouncex.cookie=cookie_one_or_many[bouncex.website.id]}else if(cookie_one_or_many&&cookie_one_or_many.vpv){bouncex.cookie=cookie_one_or_many;bouncex.cookies[bouncex.website.id]=bouncex.cookie}else{cookie_one_or_many[bouncex.website.id]={};bouncex.cookies=cookie_one_or_many}}
function localStorageFrameSuccess(){var cookie_listener=function(message){if(message.origin=="https://"+bouncex.website.biu&&typeof message.data=="string"){var messageData=message.data;if(messageData=="third_party_cookies_disabled")localStorageFail();else if(messageData.indexOf("epCookieValue=")===0){var epid=parseInt(message.data.replace("epCookieValue=",""));bouncex.ibx._push("bx_ep_lookup",{key:epid,val:{__src:"bx_ep_lookup"}})}else if(messageData.indexOf("bcx_message=true")<0){var msg_cookie=
message.data;if(!bouncex.local_storage_initialized){bouncex.local_storage_initialized=true;bouncex.cookie={};bouncex.cookies={};if(msg_cookie)setLocalStorageCookie(msg_cookie);else{if(bouncex.website.ct=="multi_cookie")bouncex.cookie=getBounceCookieMulti();else bouncex.cookie=getBounceCookieSingle();clearBounceCookie(true)}init_post_cookie()}else setLocalStorageCookie(msg_cookie)}}};addEvent(window,"message",cookie_listener)}
function addLocalStorageFrame(){try{document.body.appendChild(bouncex.local_storage_frame);localStorageFrameSuccess()}catch(e){setTimeout2(localStorageFail,0)}}function localStorageFail(){bouncex.local_storage_enabled=false;init_cookie_functions();if(!bouncex.local_storage_initialized){bouncex.local_storage_initialized=true;init_post_cookie()}}
function init_cookie_localstorage(){var local_storage_frame_url="https://"+bouncex.website.biu+"/assets/bounce/local_storage_frame7.min.html"+"#"+bouncex.website.id+(bouncex.website.swids?"&"+bouncex.website.swids:"");bouncex.local_storage_frame=document.createElement("IFRAME");bouncex.local_storage_frame.style["display"]="none";bouncex.local_storage_frame.setAttribute("id","bcx_local_storage_frame");bouncex.local_storage_frame.setAttribute("src",local_storage_frame_url);if(document.body)addLocalStorageFrame();
else var wait_for_body_interval=setInterval2(function(){if(document.body){clearTimeout(wait_for_body_interval);addLocalStorageFrame()}},100)}
function init_public_functions(){window.console||(window.console={log:function(){return{}}});bouncex.setv=bouncex.setVar=CustomVariables.setVar.bind(CustomVariables);bouncex.setVarAndReload=CustomVariables.setVarAndReload.bind(CustomVariables);bouncex.getVar=CustomVariables.getVar.bind(CustomVariables);bouncex.log=function(){var log=console.log.bind?console.log.bind(console):window.console.log;if(bouncex.debug)log.apply(null,arguments)};bouncex.trace=function(){if(bouncex.debug&&console.trace)console.trace()};
bouncex.perf=perf;bouncex.loadBounceCss=loadBounceCss;bouncex.updateQS=updateQS;bouncex.make_include_string=make_include_string;bouncex.baddjs=baddjs;bouncex.wndsize=wndsize;bouncex.init=init;bouncex.reloadCampaignsTimeout=false;bouncex.lastReloadCampaigns=0;bouncex.bcxReady=bcxReady;bouncex.stringify=stringify;bouncex.parseJSON=parseJSON;bouncex.addCss=addCss;bouncex.createIframe=createIframe;bouncex.unload_campaigns=unload_campaigns;bouncex.unload_campaign=unload_campaign;bouncex.reload_campaigns=
reload_campaigns;bouncex.nextStep=nextStep;bouncex.submitCampaignStep=submitCampaignStep;bouncex.setJumpStep=setJumpStep;bouncex.placeCampaign=placeCampaign;bouncex.alignCampaign=alignCampaign;(function(g){"window"in g&&"document"in g&&function(){function h(a){a=String(a);var d=0,e=[],b=0,c=0,f;a=a.replace(/\s/g,"");0===a.length%4&&(a=a.replace(/=+$/,""));if(1===a.length%4)throw Error("InvalidCharacterError");if(/[^+/0-9A-Za-z]/.test(a))throw Error("InvalidCharacterError");for(;d<a.length;)f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d)),
b=b<<6|f,c+=6,24===c&&(e.push(String.fromCharCode(b>>16&255)),e.push(String.fromCharCode(b>>8&255)),e.push(String.fromCharCode(b&255)),b=c=0),d+=1;12===c?e.push(String.fromCharCode(b>>4&255)):18===c&&(b>>=2,e.push(String.fromCharCode(b>>8&255)),e.push(String.fromCharCode(b&255)));return e.join("")}function k(a){a=String(a);var d=0,e=[],b,c,f,g;if(/[^\x00-\xFF]/.test(a))throw Error("InvalidCharacterError");for(;d<a.length;)b=a.charCodeAt(d++),c=a.charCodeAt(d++),f=a.charCodeAt(d++),g=b>>2,b=(b&3)<<
4|c>>4,c=(c&15)<<2|f>>6,f&=63,d===a.length+2?f=c=64:d===a.length+1&&(f=64),e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f));return e.join("")}"atob"in g&&"btoa"in g||(g.atob=h,g.btoa=k)}()})(window);bouncex.repressCampaigns=repressCampaigns}
function init_browser(){var nav=navigator.userAgent;bouncex.browser={};bouncex.browser.webkit=/WebKit/.test(nav);bouncex.browser.firefox=/Firefox/.test(nav);bouncex.browser.msie=/Trident\/7\.|MSIE/.test(nav);bouncex.browser.opera=/Opera|OPR\//.test(nav);if(bouncex.browser.msie&&nav.indexOf("MSIE")>0)bouncex.browser.msie=parseInt(nav.split("MSIE")[1]);if(bouncex.browser.msie&&nav.indexOf("rv:")>0)bouncex.browser.msie=parseInt(nav.split("rv:")[1]);bouncex.browser.edge=/Edge/.test(nav);if(bouncex.browser.edge)bouncex.browser.edge=
parseInt(nav.split("Edge/")[1]);bouncex.browser.prerenderio=nav.indexOf("Prerender")>-1;bouncex.browser.android=nav.indexOf("Android")>-1;bouncex.browser.iphone=nav.indexOf("iPhone")>-1;bouncex.browser.ipad=nav.indexOf("iPad")>-1;bouncex.browser.ios8=false;bouncex.browser.ios9=false;bouncex.browser.ios=false;if(bouncex.browser.iphone||bouncex.browser.ipad){bouncex.browser.ios=parseInt(nav.split("Version/")[1]);bouncex.browser.ios9=bouncex.browser.ios===9;bouncex.browser.ios8=bouncex.browser.ios===
8;bouncex.browser.chrome=/CriOS/.test(nav);if(bouncex.browser.chrome)bouncex.browser.ios=parseInt(nav.split("CriOS/")[1])>47?9:false}else bouncex.browser.chrome=/Chrome/.test(nav);bouncex.browser.safari=!!(nav.indexOf("Safari")!=-1&&nav.indexOf("Chrome")==-1);if(bouncex.browser.safari&&nav.indexOf("Version/")>0)bouncex.browser.safari=parseInt(nav.split("Version/")[1].replace(".",""));if(bouncex.browser.chrome&&nav.indexOf("Chrome/")>0)bouncex.browser.chrome=parseInt(nav.split("Chrome/")[1]);if(bouncex.browser.firefox&&
nav.indexOf("Firefox/")>0)bouncex.browser.firefox=parseInt(nav.split("Firefox/")[1]);bouncex.browser.dnt=navigator.doNotTrack||window.doNotTrack}
function init_post_campaign_public_function(){bouncex.setBounceCookie=function(){setBounceCookie()};bouncex.initActivationFuncs=function(){init_activation_funcs()};bouncex.contains=jQuery.contains&&(jQuery().jquery.indexOf("1.4.")==-1&&!(jQuery().jquery.indexOf("1.8.")>-1))?jQuery.contains:eval("document.contains||document.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true}}}return false};");bouncex.close_ad=
function(ca_id,silent,no_report){close_ad(ca_id,silent,no_report)};bouncex.report=function(ca_id,eventname,extra){if(!bouncex.campaigns[ca_id])return;return report(ca_id,eventname,extra)};bouncex.report_submit=function(ca_id,obj,complete){return report_submit(ca_id,obj,complete)};bouncex.report_ga=function(action,label,bypass){report_ga(action,label,bypass)};bouncex.report_conversion=function(obj,source){report_conversion(obj,source)};window.close_bouncex_ad=close_ad;bouncex.fs=fs;bouncex.by_parent_id=
function(pid){return by_parent_id(pid)};bouncex.show_ad=function(ca_id){trigger_ad("manual",ca_id)};bouncex.align_callout=align_callout_public;bouncex.destroy_ad=destroy_ad;bouncex.unload_campaigns=unload_campaigns;bouncex.reload_campaigns=reload_campaigns;bouncex.reportGa=reportGa;bouncex.loadBrandStyles=loadBrandStyles;bouncex.loadWebfonts=loadWebfonts;bouncex.activate_action=activate_action;bouncex.activate_campaign=activate_campaign}
function initBa(){bouncex.ba={fbel:[],fbrc:0,fbto:null,lip:{}}}
function init_ibx(){bouncex.ibx={wsid:bouncex.website.id,_event_store:[],_item_store:[],uid:null,bxl:null,crt:null,token:null,mode:1,cvar:{},_init:function(){this.vid=bouncex.cookie.vid;this.token=bouncex.cookie.did;this.uid=this._get("user");this.mode=this._get("mode");this.bxl=this._get("bx_lookup");this.crt=this._get("cart");this._cart("set");this._clkthrough();this._espemailid();this._emailhash();this._log("initialized");this._log("mode: "+this.mode+" | "+"token: "+this.token)},user:function(key,
val){if(!this._validate(key)){this._log("invalid email");return}this.set("user",1);var cart=this._cart("get");if(cart){val=val||{};val.__cart=cart}this._push("user",{key:key,val:val});var params={};params["user:email"]=key;params["user:source"]=val.__src;params["user:gcr"]=bouncex&&bouncex.cookie?bouncex.cookie.gcr:99;params["agent"]="js";if(val.campaign)params["campaignid"]=val.campaign;params["eq"]=1;event_stream_report("user",params)},track:function(type,key,val,segment){if(!type||!key){this._log("type and key must be set");
return}if(this["_"+type+"_store"])this["_"+type+"_store"].push({key:JSON.stringify(val)});if(!segment)segment="";var pushobj={key:key,val:val,segment:segment};this._push(type,pushobj);var params={};var eventname=key;if(type=="item"){eventname="item";params["item:segment"]=segment;params["item:category"]=segment;params["item:id"]=key;params["item:url"]=val.__url;params["item:imageurl"]=val.creative;params["item:imagewidth"]=val.__width;params["item:imageheight"]=val.__height;params["stringvalue"]=
key}if(type=="cart")eventname="cart";for(var k in val)if(val.hasOwnProperty(k)&&k.substring(0,2)!="__")params[eventname+":"+k]=val[k];if(val&&val.stringvalue)params["stringvalue"]=val.stringvalue;params["eq"]=1;event_stream_report(eventname,params)},conv_params:function(){var params=this._auto_add({ibx_mode:this._get("mode"),ibx_clicks:this._get("clickstr")});if(params.ibx_clicks){this._cookies.create("__ibxc0",params.ibx_clicks);this._cookies.destroy("__ibxc")}this._log("conv_params: "+(params.ibx_clicks?
params.ibx_clicks:"[none]"));return this._qs(params)},set:function(what,val){switch(what){case "user":this.uid=val;this._cookies.create("__ibxu",val);break;case "mode":if(val==0||val==1){this.mode=val;this._cookies.create("__ibxm",val)}break;case "bx_lookup":this.bxl=val;this._cookies.create("__ibxl",val);break;case "cart":this.crt=val;this._cookies.create("__ibxcr",val,.5);break}return val},dump:function(what){this._log(what+" = "+this._get(what))},_get:function(what){var val;switch(what){case "events":val=
this._event_store;break;case "items":val=this._item_store;break;case "token":val=btoa(bouncex.cookie.did);break;case "user":val=parseInt(this._cookies.read("__ibxu"));if(isNaN(val))val=0;break;case "mode":val=this._cookies.read("__ibxm")==="0"?0:1;break;case "clickstr":val=this._cookies.read("__ibxc");break;case "clicks":val=(val=this._cookies.read("__ibxc"))?val.split(","):[];break;case "bx_lookup":val=parseInt(this._cookies.read("__ibxl"));if(isNaN(val))val=0;break;case "cart":val=parseInt(this._cookies.read("__ibxcr"));
if(isNaN(val))val=0;break;default:val="invalid"}return val},_push:function(type,obj){var logkey,qs="type="+type+"&wsid="+this.wsid+"&gcr="+bouncex.cookie.gcr+"&vid="+bouncex.cookie.vid+"&mode=1";qs+="&device_id="+encodeURIComponent(bouncex.cookie.did);obj.val=JSON.stringify(this._auto_add(obj.val||{}));qs=qs+"&"+this._qs(obj);logkey=typeof obj.key!="undefined"?": "+obj.key:"";this._log(type.toUpperCase()+logkey+" // "+qs);if(type=="cart"||type=="isr"||type=="bx_ep_lookup"||type=="bx_lookup"){var url=
bouncex.sau+"/ibx/ping?"+qs;var img=document.createElement("img");img.src=url}},_auto_add:function(obj){obj=obj||{};if(!obj.hasOwnProperty("__url"))obj.__url=location.href;if(!obj.hasOwnProperty("__referrer"))obj.__referrer=document.referrer;return obj},_bx_lookup:function(){if(this.bxl)return;if(bouncex.cookie.es&&bouncex.cookie.campaigns&&!bouncex.ibx.uid){var cs=bouncex.cookie.campaigns;var vid=null;for(var cid in cs)if(cs.hasOwnProperty(cid)&&cs[cid].ls&&cs[cid].lavid)vid=cs[cid].lavid;if(vid){var val=
{vid:vid,__src:"bx_lookup"};var cart=this._cart("get");if(cart)val.__cart=cart;this._push("bx_lookup",{key:vid,val:val})}}this.set("bx_lookup",1)},_cart:function(action){var cart=false;switch(action){case "get":try{cart=eval(bouncex.website.ibx.cart_rep.get)}catch(e){cart=false;this._log(e)}break;case "set":if(this.crt||location.href.indexOf("ibx_cart")==-1)return false;cart=this._getparam("ibx_cart");if(cart){eval(bouncex.website.ibx.cart_rep.set);this.set("cart",1)}cart=this.crt;break}return cart},
_clkthrough:function(){var click=this._getparam("ibx_source"),clicks;if(click)try{clicks=this._get("clickstr");if(!clicks)clicks=click;else if(clicks.indexOf(click)!=-1){this._log("click-through: "+click+" (DUPLICATE)");return}else clicks+=","+click;this._cookies.create("__ibxc",clicks);this._log("click-through: "+click)}catch(err){this._log(err)}},_emailhash:function(){var val=bouncex.visit_cookie.ueh;if(val)event_stream_report("user",{"agent":"js","user:emailhash":val,"user:source":"ibx_clickthrough"})},
_espemailid:function(){if(bouncex.website.ibx.ulpj){var params={"user:source":"esp-email-id","agent":"js"};var valFound=false;for(var urlParam in bouncex.website.ibx.ulpj)if(bouncex.website.ibx.ulpj.hasOwnProperty(urlParam)){var val=this._getparam(urlParam);if(val){valFound=true;params["user:"+bouncex.website.ibx.ulpj[urlParam]]=val}}if(valFound)event_stream_report("user",params)}},_log:function(msg){if(this.mode==0)bouncex.log("ibx: "+msg)},_validate:function(em){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return re.test(em)},_quick_validate:function(em){return em==null?false:em.indexOf(".")>2&&em.indexOf("@")>0},_qs:function(o){var a=[],s="";for(var k in o){if(!o.hasOwnProperty(k))continue;a.push(k+"="+encodeURIComponent(o[k]))}return a.join("&")},_cookies:{domain:window.bouncex.cookie_domain,create:function(name,value,time){if(!time)time=365;var dt=new Date;dt.setTime(dt.getTime()+time*24*60*60*1E3);var exp="; expires="+dt.toGMTString(),cookie_domain=this.domain?"domain=."+this.domain+";":"";document.cookie=
name+"="+value+exp+"; path=/;"+cookie_domain},read:function(name){var t=name+"=",vars=document.cookie.split(";");for(var r=0;r<vars.length;r++){var i=vars[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},destroy:function(name){this.create(name,"",-1)}},_getparam:getParam}}function init_website_custom_js(){if(bouncex.website.cjs)try{eval(bouncex.website.cjs)}catch(err){bouncex.err(err,{source:"bouncex.website.cjs"})}}
function init_ibx_tracking(){if(bouncex.website.ibx.te&&bouncex.website.ibx.te==1){if(bouncex.website.ibx.miw==1)try{var selector="input:not([type=button],[type=submit],[type=reset],[type=hidden],[type=radio],[type=checkbox],[type=image],[type=password], #privy-container input, #dwfrm_giftcert_purchase_recipientEmail, #dwfrm_wishlist_search_email)";if(bouncex.website.ibx.miw_exclude)selector+=":not("+bouncex.website.ibx.miw_exclude+")";if(jQuery.fn.on)jQuery(document).on("blur",selector,function(){var source=
jQuery(this).attr("id");bouncex.ibx.user(jQuery(this).val(),{__src:source})});else bouncex.body.delegate(selector,"blur",function(){var source=jQuery(this).attr("id");bouncex.ibx.user(jQuery(this).val(),{__src:source})})}catch(err){bouncex.err(err,{source:"ibx tracking"})}if(bouncex.website.ibx.muu==1)try{var urlUserMatch=location.href.match(/([a-zA-Z0-9._\+-]+(?:@|%40)[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(urlUserMatch)bouncex.ibx.user(decodeURIComponent(urlUserMatch[0]),{__src:"URL"})}catch(err){bouncex.err(err)}try{eval(bouncex.website.ibx.tjs)}catch(err){bouncex.err(err,
{source:"bouncex.website.ibx.tjs"})}bouncex.ibx._bx_lookup()}}function init_event_tracking(){if(bouncex.website.ete==1){if(bouncex.website.ettm==1&&!bouncex.debug)return;bouncex.et.init()}}
bouncex.psh={swr:{},init:function(){this.initialized=true;this._clickthrough();if(this.type==="sw"&&this.getCurrentPermission()==="granted"&&bouncex.ssl)this.installServiceWorker().then(function(){bouncex.psh.swr.pushManager.getSubscription().then(function(subscription){if(!subscription)bouncex.psh.subscribe()})})},_clickthrough:function(){var click=bouncex.utils.getParam("psh_click");if(click){var clicks=bouncex.cookie.pcs||{};var timestamp=Math.floor((new Date).getTime()/1E3);clicks[click]=timestamp;
bouncex.cookie.pcs=clicks;setBounceCookie()}},init_supported:function(){this.type=this.getType();this.supported=!!this.type},getCurrentPermission:function(){if(this.type==="sw")return Notification.permission},getCookiePermission:function(verboseValue){var cookieValue;if(verboseValue=="granted")cookieValue=1;else if(verboseValue=="denied")cookieValue=0;return cookieValue},getType:function(){if(bouncex.browser.safari&&window.safari&&window.safari.pushNotification)return false;if(navigator.serviceWorker&&
Notification.permission==="denied")return false;return navigator.serviceWorker?"sw":false},setPermission:function(verbosePermission){if(verbosePermission==="default")delete bouncex.cookie.bp;else bouncex.cookie.bp=bouncex.psh.getCookiePermission(verbosePermission);setBounceCookie()},injectManifest:function(){var link=document.createElement("link");link.rel="manifest";link.href="/bx-manifest.json";document.head.appendChild(link)},requestOptIn:function(ca_id){if(this.initialized===true){if(this.supported&&
this.type==="sw")return this.requestOptInSW(ca_id);return Promise.resolve("denied")}return Promise.resolve("Push not initialized, ensure push is enabled in website settings.")},requestOptInSW:function(ca_id){var permission=bouncex.psh.getCurrentPermission();if(permission!=="default")return Promise.resolve(permission);var promptPayload={"notifypush:cookie":JSON.stringify(bouncex.cookie),campaignid:ca_id};bouncex.psh.report("prompt",promptPayload);return Notification.requestPermission().then(function(permission){if(permission===
"granted")return new Promise(function(resolve){return bouncex.psh.installServiceWorker().then(function(){return bouncex.psh.subscribe(ca_id)}).then(resolve)["catch"](function(err){resolve(err)})});else if(permission==="denied"){var pushData={"notifypush:type":"sw",campaignid:ca_id};bouncex.psh.setPermission(permission);bouncex.psh.report("optin_denied",pushData)}return Promise.resolve(permission)})},installServiceWorker:function(){return new Promise(function(resolve,reject){bouncex.psh.injectManifest();
navigator.serviceWorker.register("/bx-sw.js",{scope:"/"}).then(function(swr){bouncex.psh.swr=swr;resolve()})["catch"](function(err){reject("Error installing service worker")})})},isServiceWorkerReady:function(){return navigator.serviceWorker.ready},subscribe:function(ca_id){return bouncex.psh.isServiceWorkerReady().then(function(){return bouncex.psh.swr.pushManager.subscribe({userVisibleOnly:true}).then(function(result){var permission=bouncex.psh.getCurrentPermission();var pushData={"notifypush:type":"sw",
"notifypush:subscription":JSON.stringify(result),"notifypush:token":result.endpoint,campaignid:ca_id};bouncex.psh.setPermission(permission);bouncex.psh.report("optin_granted",pushData);return{permission:permission,result:result}},function(error){return{permission:bouncex.psh.getCurrentPermission(),result:error}})})},report:function(type,eventData){var defaults={agent:"user",source:"notifypush"};var data=jQuery.extend({},defaults,eventData);event_stream_report(type,data)}};
function init_errs_reporting(){bouncex.err=reportErr;bouncex.tryCatch=tryCatch;addEvent(window,"error",function errorListener(ev){if(ev.filename&&ev.filename.indexOf("bounceexchange")>-1||ev.error&&ev.error.stack&&ev.error.stack.indexOf("bounceexchange")>-1){var source=bouncex.calling_url.indexOf("bounceexchange.com")>-1?"core app":"window listener";ev.preventDefault();ev.stopImmediatePropagation();bouncex.err(ev.error,{source:source})}},false)}
function reportErr(err,data){var message=err.stack?err.stack.split("\n").filter(function(trace){return trace.indexOf("init1")===-1}).join("\n"):err.message||err;var metaData=data||{};var params={"debug:code":err.name||"custom","debug:location":metaData.source||metaData.location||"","debug:message":message,"debug:url":bouncex.calling_url,"debug:custom_variable":metaData.cvar||metaData.custom_variable||"","campaignid":metaData.ca_id||metaData.campaign_id||""};if(bouncex.calling_url.indexOf("bounceexchange.com")>
-1||typeof bouncex.state!=="undefined"&&perf.errsArr.indexOf(params["debug:message"])===-1){bouncex.log("%c bx log: "+params["debug:message"],"color: #388EFA;");perf.errsArr.push(params["debug:message"]);perf.errs(params)}}function tryCatch(func,data){if(typeof func!=="function")return;if(!func._wrapped)func._wrapped=function(){try{return func.apply(this,arguments)}catch(e){data=data||{};data.source=data.source||func.name||"tryCatch wrapper";bouncex.err(e,data)}};return func._wrapped}
function canShowGbi(){var div=document.createElement("div");div.innerHTML="&nbsp;";div.className=bouncex.lz.decompressFromURI("IYEwzgRgNg9gxgayA");document.body.appendChild(div);var height=div.offsetHeight;document.body.removeChild(div);return height!==0}
function attachClickReportingToIframe(container,ca_id){bouncex.on(container,"mouseenter.gbi_click_events_"+ca_id,function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+ca_id,function(){bouncex.report(ca_id,"click")})});bouncex.events[ca_id]["gbi_click"]=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+ca_id)};bouncex.on(container,"mouseleave.gbi_click_events_"+ca_id,bouncex.events[ca_id]["gbi_click"])}
bouncex.gbi={wrapContentInIframe:function(container,payloadHTML,ca_id){var oldFrame=container.find("iframe");if(oldFrame.length)oldFrame.remove();var style="";var provider=bouncex.campaigns[ca_id].gbi.provider;var ratio=1;if(!bouncex.campaigns[ca_id].ng&&this.providerApi[provider].getRatio){ratio=this.providerApi[provider].getRatio(ca_id);if(ratio!==1){ratio*=.9;style+="-webkit-transform: scale("+ratio+");transform: scale("+ratio+");"}}else if(bouncex.campaigns[ca_id].ng&&bouncex.campaigns[ca_id].gbi&&
(bouncex.campaigns[ca_id].gbi.config.shrinkToFit||bouncex.campaigns[ca_id].gbi.config.shrinkToFitWindow)&&(bouncex.campaigns[ca_id].type==="overlay"||bouncex.campaigns[ca_id].type==="agilityzone")){var resizeDataForV2=bouncex.gbi.getResizeDataForV2(ca_id);ratio=resizeDataForV2.scaleRatio;if(ratio<1){style+="-webkit-transform: scale("+ratio+");transform: scale("+ratio+");";container.css({"width":resizeDataForV2.scaledWidth+"px","height":resizeDataForV2.scaledHeight+"px"})}}var gbiFrame=jQuery('<iframe target="_blank" class="bx-gbi-frame" frameborder="0" horizontalscrolling="no" verticalscrolling="no" width="100%" height="100%" vspace="0" hspace="0" marginwidth="0" scrolling="no" marginheight="0" allowTransparency="true"></iframe>');
container.append(gbiFrame);var doc=gbiFrame.get(0).contentWindow.document;doc.open();var iframeHTML='<html><head><base target="_blank"/></head><body marginwidth="0" marginheight="0" style="-webkit-transform-origin: 0 0;transform-origin: 0 0;'+style+'">'+payloadHTML+"</body>";doc.write(iframeHTML);doc.close();return doc},init:function(ca_id){bouncex.campaigns[ca_id].gbi.impressionPixels=new Array;bouncex.campaigns[ca_id].gbi.clickPixels=new Array},fail:function(ca_id,msg){bouncex.campaigns[ca_id].failed=
true;this.clearRequestAssets(ca_id);this.log(ca_id,msg,true)},log:function(ca_id,msg,fail){var campaign=ca_id?"("+ca_id+")":"";var provider="("+(bouncex.campaigns[ca_id]?bouncex.campaigns[ca_id].gbi.provider||"no provider":"stack")+")";bouncex.log("%c gbi "+campaign+provider+": "+msg,"color: "+(fail?"#FF0000":"#00F"));bouncex.trace()},request:function(ca_id){bouncex.gbi.init(ca_id);var api=bouncex.gbi.providerApi[bouncex.campaigns[ca_id].gbi.provider];if(!api)bouncex.gbi.fail(ca_id,"undefined provider "+
bouncex.campaigns[ca_id].gbi.provider);try{if(api.request)api.request(ca_id);else bouncex.gbi.fetch(ca_id)}catch(err){bouncex.gbi.fail(ca_id,err)}},fetch:function(ca_id){var api=bouncex.gbi.providerApi[bouncex.campaigns[ca_id].gbi.provider];return bouncex.gbi.doAjaxRequest(api.getFetchOptions(ca_id))},doAjaxRequest:function(options){options.crossDomain=true;options.global=false;var vernums=jQuery.fn.jquery.split(".");options.xhrFields={withCredentials:true};if(parseInt(vernums[0])<=1&&parseInt(vernums[1])<=
5){options.beforeSend=function(xhr){xhr.withCredentials=true};options.xhr=function(){var xhr=jQuery.ajaxSettings.xhr();var setRequestHeader=xhr.setRequestHeader;xhr.setRequestHeader=function(name,value){if(name=="X-Requested-With")return;setRequestHeader.call(this,name,value)};return xhr}}bouncex.gbi.ajaxRequest=jQuery.ajax(options)},report:function(ca_id,eventname,extra){bouncex.gbi.log(ca_id,'reporting event "'+eventname+'"');if(bouncex.campaigns[ca_id].gbi.provider){var pixels="";if(eventname==
"pop"){if(bouncex.campaigns[ca_id].gbi.impressionPixels&&bouncex.campaigns[ca_id].gbi.impressionPixels.length>0)pixels+=bouncex.campaigns[ca_id].gbi.impressionPixels.join("")}else if(eventname=="click")if(bouncex.campaigns[ca_id].gbi.clickPixels&&bouncex.campaigns[ca_id].gbi.clickPixels.length>0)pixels+=bouncex.campaigns[ca_id].gbi.clickPixels.join("");if(pixels)if(bouncex.campaigns[ca_id].gbi.provider=="oubr"){var config=bouncex.campaigns[ca_id].gbi.config;var options={url:bouncex.campaigns[ca_id].gbi.impressionPixels[0],
method:"GET",timeout:15E3,beforeSend:function(xhr){xhr.setRequestHeader("Authorization","API_KEY "+config["API_KEY"])},success:function(response){bouncex.gbi.log(ca_id,'reporting provider pixel for "'+eventname+'"')},error:function(XHR,textStatus,errorThrown){bouncex.gbi.log(ca_id,'error for reporting provider pixel for "'+eventname+'"')}};bouncex.gbi.doAjaxRequest(options)}else{jQuery(pixels).hide().appendTo(bouncex.body);bouncex.gbi.log(ca_id,'reporting provider pixel for "'+eventname+'"')}}var stackId=
bouncex.campaigns[ca_id].gbi.stack_id;if(stackId&&(eventname=="eligible"||eventname=="pop")){var stack=bouncex.gbi.stacks[stackId];var stackCampaigns=stack.campaigns;var controlLeader=bouncex.campaigns[stack.leader_id].ttype=="control";for(var priority in stackCampaigns){var stackCaId=stackCampaigns[priority];var isStackSelf=stackCaId==ca_id;var isStackLeader=stackCaId==bouncex.gbi.stacks[stackId].leader_id;if(eventname=="pop"&&!isStackSelf&&isStackLeader)noteCookieAdShown(stackCaId);if(eventname==
"eligible"&&(isStackSelf||isStackLeader)||eventname=="pop"&&isStackSelf)buildReport(stackCaId,eventname,extra);if(eventname=="pop"){var newEventname="trypop";var moreExtra={};moreExtra["trypop:provider"]=bouncex.campaigns[stackCaId].gbi.provider||"none";buildReport(stackCaId,newEventname,moreExtra)}if(isStackSelf)break}}else buildReport(ca_id,eventname,extra)},requestCompleteMultiple:function(ca_id,html,onsuccess){var ca=bouncex.campaigns[ca_id];bouncex.gbi.log(ca_id,"have a bid with multiple units");
var api=bouncex.gbi.providerApi[ca.gbi.provider];api.buildHTML(ca_id,ca.gbi.lastResponse);loadImages(ca.images,function(){bouncex.gbi.log(ca_id,"images loaded");activateGbiCampaign(ca_id);if(onsuccess)onsuccess()})},requestCompleteSingle:function(ca_id,html,onsuccess){var ca=bouncex.campaigns[ca_id];bouncex.gbi.log(ca_id,"have a bid with a single unit");var container;if(ca.ng)container=bouncex.campaigns[ca_id].obj1.find(".bx-step-"+(ca.gbi.step||1)).find(".bx-group-placeholder").eq(0);else{var containerType=
"overlay";if(ca.bottom!=="none")containerType="bottom";else if(ca.ctop!=="none")containerType="top";else if(ca.callout!=="none")containerType="callout";var container=jQuery("#campaign_"+ca_id+"_container_"+containerType).find(".bcx_inner")}var frameDoc;try{frameDoc=bouncex.gbi.wrapContentInIframe(container,html,ca_id)}catch(err){bouncex.gbi.fail(ca_id,"failed to wrap content in iframe "+err);return false}attachClickReportingToIframe(container,ca_id);loadImages(jQuery(frameDoc).find("img").filter(":visible"),
function(){bouncex.gbi.log(ca_id,"image loaded");activateGbiCampaign(ca_id);if(onsuccess)onsuccess()})},requestCompleteSingleVideo:function(ca_id,vastData){var ca=bouncex.campaigns[ca_id];ca.gbi.playerLoadAttempts=ca.gbi.playerLoadAttempts?ca.gbi.playerLoadAttempts:1;if(ca.gbi.playerLoadAttempts>50){bouncex.gbi.fail(ca_id,"jwplayer failed to load after 5 seconds");return false}if(typeof bouncex.jwplayer==="undefined"){ca.gbi.playerLoadAttempts++;setTimeout2(function(){bouncex.gbi.requestCompleteSingleVideo(ca_id,
vastData)},100);return false}bouncex.gbi.log(ca_id,"have a bid with a single vast unit");var playerConfig=bouncex.gbi.getPlayerConfig(ca_id,vastData);var container=ca.obj1.find(".bx-step-"+(ca.gbi.step||1)).find(".bx-group-placeholder").eq(0);var id=container.attr("id");if((ca.gbi.config.shrinkToFit||ca.gbi.config.shrinkToFitWindow)&&(ca.type==="overlay"||ca.type==="agilityzone")){var resizeDataForV2=bouncex.gbi.getResizeDataForV2(ca_id);if(resizeDataForV2.scaleRatio<1){playerConfig.width=resizeDataForV2.scaledWidth;
playerConfig.height=resizeDataForV2.scaledHeight;container.css({width:resizeDataForV2.scaledWidth,height:resizeDataForV2.scaledHeight})}}ca.gbi.player=bouncex.jwplayer(id);ca.gbi.player.setup(playerConfig);ca.gbi.player.on("adClick",function(){bouncex.report(ca_id,"click")});ca.gbi.player.on("adError",function(data){bouncex.gbi.log(ca_id,data.message?"ad error: "+data.message:"ad error")});ca.gbi.contentLoaded=true},getPlayerConfig:function(ca_id,vastData){var campaign=bouncex.campaigns[ca_id];var playerConfig=
campaign.gbi.config.videoPlayerConfig||{};var isInlineVast=/^[\s]*<VAST/i.test(vastData);var vastKey=isInlineVast?"vastxml":"tag";var $adPlaceholder=campaign.obj1.find(".bx-group-placeholder").eq(0);playerConfig.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4";playerConfig.advertising=playerConfig.advertising||{};playerConfig.advertising.client="vast";playerConfig.advertising.vpaidcontrols=true;playerConfig.advertising[vastKey]=vastData;playerConfig.mute=true;playerConfig.width=
playerConfig.width||$adPlaceholder.width();playerConfig.height=playerConfig.height||$adPlaceholder.height();campaign.gbi.config.playOnImpression=true;campaign.gbi.config.videoPlayerConfig=playerConfig;return playerConfig},cancelRequest:function(ca_id){bouncex.gbi.log(ca_id,"cancelling request");if(bouncex.gbi.ajaxRequest)bouncex.gbi.ajaxRequest.abort();bouncex.gbi.init(ca_id)},clearRequestAssets:function(ca_id){if(bouncex.events[ca_id]["gbiRequest"]){clearInterval(bouncex.events[ca_id]["gbiRequest"]);
delete bouncex.events[ca_id]["gbiRequest"]}},getResizeDataForV2:function(ca_id){var ca=bouncex.campaigns[ca_id];var config=bouncex.campaigns[ca_id].gbi.config;var unitSize;var extraPadding=((parseInt(ca.obj1.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt(ca.obj1.find(".bx-align").css("padding-left"),10)||0))*2;var scaleRatio=1;if(ca.gbi.isVideo)unitSize={w:config.videoPlayerConfig.width,h:config.videoPlayerConfig.height};else unitSize=config.imp[0].banner;if(ca.type==="agilityzone"&&ca.calloutTarget.length)scaleRatio=
(ca.calloutTarget.width()-extraPadding)/unitSize.w;else if(ca.type==="overlay"){var widthRatio=(bouncex.wndsize().width-extraPadding)/unitSize.w;var heightRatio=(bouncex.wndsize().height-extraPadding)/unitSize.h;scaleRatio=widthRatio>heightRatio?heightRatio:widthRatio}return{scaleRatio:scaleRatio,scaledWidth:unitSize.w*scaleRatio,scaledHeight:unitSize.h*scaleRatio}},getCreativeDimensions:function(ca_id){var creative=jQuery("#bx-creative-"+ca_id);creative.css("max-width","none");return{width:creative.width(),
height:creative.height()}},shrinkToFitWindow:function(ca_id){var creativeDimensions=bouncex.gbi.getCreativeDimensions(ca_id);var windowSize=bouncex.wndsize();var windowPadding=12;windowSize.width-=windowPadding;windowSize.height-=windowPadding;var widthRatio=creativeDimensions.width>windowSize.width?windowSize.width/creativeDimensions.width:1;var heightRatio=creativeDimensions.height>windowSize.height?windowSize.height/creativeDimensions.height:1;var ratio=widthRatio>heightRatio?heightRatio:widthRatio;
if(ratio<1)bouncex.campaigns[ca_id].obj1.find(".bx-slab").css({width:creativeDimensions.width+windowPadding+"px",height:creativeDimensions.height+windowPadding+"px",overflow:"visible",top:"50%",left:"50%",transform:"scale("+ratio+") translate(-50%, -50%)",transformOrigin:"0 0"})},shrinkToFitParent:function(ca_id){var creativeDimensions=bouncex.gbi.getCreativeDimensions(ca_id);var containerWidth=bouncex.campaigns[ca_id].obj1.parent().width();var widthRatio=creativeDimensions.width>containerWidth?containerWidth/
creativeDimensions.width:1;if(widthRatio<1)bouncex.campaigns[ca_id].obj1.find(".bx-slab").css({width:creativeDimensions.width*widthRatio+"px",height:creativeDimensions.height*widthRatio+"px",transform:"scale("+widthRatio+")",transformOrigin:"0 0"})},populateTemplate:function(ca_id,response,unitJsonPath,imageJsonPath){var creative=jQuery("#bx-creative-"+ca_id);var creativeClone=creative.clone(true);var templateGroups=creativeClone.find(".bx-group-placeholder");var groupLength=templateGroups.length;
for(var k=0;k<groupLength;k+=1){var unit=eval(unitJsonPath+"[k];");var templateGroup=jQuery(templateGroups[k]);if(templateGroup.length)if(unit){var image=eval("unit."+imageJsonPath);templateGroup.find(".bx-lineshape").css("background-image","url("+image+")");bouncex.campaigns[ca_id].images.push(image);var html=templateGroup.html();html=html.replace(/{(.*?)}/gi,function(query,keyword){var content=eval("unit."+keyword);if(typeof content!=="undefined")return content});templateGroup.html(html)}else templateGroup.remove()}var html=
creativeClone.html();html=html.replace(/{(.*?)}/gi,function(query,keyword){try{return eval("response."+keyword)}catch(err){return keyword}});creativeClone.html(html);creative.replaceWith(creativeClone)},generateDynamicRequestUrlParams:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var dynamicQueryStr="";var dynamicParams=config.dynamic_request_params;if(dynamicParams)for(var param in dynamicParams)try{dynamicQueryStr+="&"+param+"="+encodeURIComponent(eval(dynamicParams[param]))}catch(e){bouncex.gbi.log("invalid dynamic request param "+
param+" must have valid javascript as value")}return dynamicQueryStr},loadVideoPlayer:function(ca_id){if(typeof bouncex.jwplayer==="undefined")getScript("//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/7.11.3/jwplayer.js",function(){bouncex.gbi.log(ca_id,"jwplayer loaded");bouncex.jwplayer.key="ci+9UwhcX3hv6KNH3JF5Wkk5BduvsSJqPO8HD8+vcty2o8/U"})},requestAndRefreshRequest:function(ca_id){var ca=bouncex.campaigns[ca_id];var api=bouncex.gbi.providerApi[ca.gbi.provider];api.fetch(ca_id);bouncex.events[ca_id]["gbiRequest"]=
setInterval2(function(){if(!can_show_ad(ca_id)&&!bouncex.campaigns[ca_id].failed){clearInterval(bouncex.events[ca_id]["gbiRequest"]);bouncex.gbi.log(ca_id,"clearing interval");return}bouncex.gbi.init(ca_id);api.fetch(ca_id)},ca.gbi.config.reload||60*3*1E3)},playVideoBeforeImpression:function(type,ca_id){var campaign=bouncex.campaigns[ca_id];var player=campaign.gbi.player;player.on("adImpression",function(){player.off("adImpression");player.off("adError");bouncex.gbi.log(ca_id,"video response detected");
campaign.gbi.videoResponseLoaded=true;show_ad(type,ca_id)});player.on("adError",function(data){player.off("adImpression");player.off("adError");player.stop();bouncex.gbi.fail(ca_id,data.message?data.message:"error loading response")});player.play()},providerApi:{an:{getFetchOptions:function(ca_id){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config.request_url,type:"POST",dataType:"json",processData:false,timeout:config.timeout||255,success:function(response){var gbiHTML=
self.processResponse(ca_id,response);if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.gbi.requestCompleteSingle(ca_id,gbiHTML)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,textStatus)}};return options},processResponse:function(ca_id,response){if(response&&response.status=="ok")try{var resLength=response["native"].length;if(resLength>0){var html="";for(var i=0;i<resLength;i++){bouncex.campaigns[ca_id].gbi.clickPixels.push('<img src="'+response["native"][i].click_trackers+
'"/>');var impressionTrackerLength=response["native"][i].impression_trackers.length;if(impressionTrackerLength>0)for(var j=0;j<impressionTrackerLength;j++)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+response["native"][i].impression_trackers[j]+'"/>');html+='<a href="'+response["native"][i].click_url+'"><img height="100%" width="100%" title="';html+=response["native"][i].title+'" src="'+response["native"][i].main_media[0].url+'"/></a>'}return html}}catch(err){bouncex.gbi.fail(ca_id,
err)}return""}},dfpi:{getFetchOptions:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var self=this;var options={url:config.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(ca_id),type:"GET",dataType:"json",processData:false,timeout:config.timeout||1E3,success:function(response){var gbiHTML=self.processResponse(ca_id,response);if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.gbi.requestCompleteSingle(ca_id,gbiHTML)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,
"timed out")}};return options},processResponse:function(ca_id,response){if(response&&response.main_media)try{var impressionTrackerLength=response.impression_trackers.length;if(impressionTrackerLength>0)for(var i=0;i<impressionTrackerLength;i++)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+response.impression_trackers[i]+'"/>');var clickTrackerLength=response.click_trackers.length;if(clickTrackerLength>0)for(var i=0;i<clickTrackerLength;i++)bouncex.campaigns[ca_id].gbi.clickPixels.push('<img src="'+
response.click_trackers[i]+'"/>');var mediaLength=response.main_media.length;if(mediaLength>0){var html="";for(var i=0;i<mediaLength;i++){html+='<a href="'+response.click_url+'"><img height="100%" width="100%" title="';html+=response.title+'" src="'+response.main_media[i].url+'"/></a>'}return html}}catch(err){bouncex.gbi.fail(ca_id,err)}return""}},dfps:{getFetchOptions:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var self=this;var options={url:config.request_url+"&c="+getTime2()+
bouncex.gbi.generateDynamicRequestUrlParams(ca_id),type:"GET",dataType:"json",processData:false,timeout:config.timeout||1E3,success:function(response){var gbiHTML=self.processResponse(ca_id,response);if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.gbi.requestCompleteSingle(ca_id,gbiHTML)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(response&&response.main_media)try{var impressionTrackerLength=
response.impression_trackers.length;if(impressionTrackerLength>0)for(var i=0;i<impressionTrackerLength;i++)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+response.impression_trackers[i]+'"/>');var mediaLength=response.main_media.length;if(mediaLength>0){var html="";for(var i=0;i<mediaLength;i++)html+=response.main_media[i].url;return html}}catch(err){bouncex.gbi.fail(ca_id,err)}return""}},dfphtml:{getFetchOptions:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var options=
{url:config.request_url+"&c="+getTime2()+bouncex.gbi.generateDynamicRequestUrlParams(ca_id),method:"GET",global:false,processData:false,timeout:config.timeout||1E3,complete:function(response,status){if(status=="success")if(response.status===200){var gbiHTML=response.responseText;if(!gbiHTML)return bouncex.gbi.fail(ca_id,"no bid");bouncex.campaigns[ca_id].gbi.html=gbiHTML;activateGbiCampaign(ca_id)}else bouncex.gbi.fail(ca_id,"response status "+response.status);else return bouncex.gbi.fail(ca_id,status+
" "+response.status)}};return options}},crit:{getFetchOptions:function(ca_id,action){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config.endpoint+"/recommendations.get",data:config,dataType:"jsonp",method:"GET",timeout:15E3,success:function(response){if(self.processResponse(ca_id,response))activateGbiCampaign(ca_id)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(response&&
response.response_status===0)try{return this.populatePixel(ca_id,response)&&this.populateCreative(ca_id,response)}catch(err){bouncex.gbi.fail(ca_id,err)}else{if(response&&response.status_message)bouncex.gbi.fail(ca_id,"Bad response: "+response.status_message);else bouncex.gbi.fail(ca_id,"No bid");return false}},populatePixel:function(ca_id,response){var pixels=response.impression_pixels;var pixelLength=pixels.length;for(var k=0;k<pixelLength;k+=1)bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+
pixels[k].url+'"/>');return true},populateCreative:function(ca_id,response){bouncex.gbi.populateTemplate(ca_id,response,"response.products","image.url");return true}},tabr:{getFetchOptions:function(ca_id,action){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;config["source.id"]=window.location.pathname;config["source.url"]=window.location.href;config["rec.visible"]=false;config["user.session"]="init";config["app.type"]="desktop";var options={url:config.endpoint_domain+"/1.1/json/"+config["publisher-name"]+
"/recommendations.get",data:config,dataType:"json",method:"GET",timeout:15E3,success:function(response){if(self.processResponse(ca_id,response))activateGbiCampaign(ca_id)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(!(response&&response.id&&response.list.length>0))return bouncex.gbi.fail(ca_id,"no bid");try{if(!response.list)return bouncex.gbi.fail(ca_id,"no bid");bouncex.campaigns[ca_id].gbi.lastResponse=
response;this.getPixels(ca_id,response);return true}catch(err){bouncex.gbi.fail(ca_id,err)}},buildHTML:function(ca_id,response){bouncex.gbi.populateTemplate(ca_id,response,"response.list","thumbnail[0].url")},getPixels:function(ca_id,response){var config=bouncex.campaigns[ca_id].gbi.config;var impressionPixel=config.endpoint_domain+"/1.1/json/"+config["publisher-name"]+"/recommendations.notify-visible?";impressionPixel+="response.id="+response.id+"&response.session="+response.session;impressionPixel+=
"&app.type="+(bouncex.state.mobile?"mobile":"desktop")+"&app.apikey="+config["app.apikey"];bouncex.campaigns[ca_id].gbi.impressionPixels.push('<img src="'+impressionPixel+'"/>')}},oubr:{getFetchOptions:function(ca_id,action){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;var options={url:config[config["environment"]+"_endpoint"]+"/recommendations/documents",dataType:"json",method:"GET",data:config.data,timeout:15E3,beforeSend:function(xhr){xhr.setRequestHeader("Authorization","API_KEY "+
config["API_KEY"])},success:function(response){if(self.processResponse(ca_id,response))activateGbiCampaign(ca_id)},error:function(XHR,textStatus,errorThrown){return bouncex.gbi.fail(ca_id,"timed out")}};return options},processResponse:function(ca_id,response){if(!(response&&response.requestId&&response.items&&response.items.length>0))return bouncex.gbi.fail(ca_id,"no bid");try{bouncex.campaigns[ca_id].gbi.lastResponse=response;return this.getPixels(ca_id,response)&&this.populateCreative(ca_id,response)}catch(err){bouncex.gbi.fail(ca_id,
err)}},populateCreative:function(ca_id,response){bouncex.gbi.populateTemplate(ca_id,response,"response.items","thumbnail");return true},getPixels:function(ca_id,response){var config=bouncex.campaigns[ca_id].gbi.config;var impressionPixel=response._actions.reportViewed;bouncex.campaigns[ca_id].gbi.impressionPixels.push(impressionPixel);return true}},index:{request:function(ca_id){var self=this;bouncex.gbi.init(ca_id);try{bouncex.gbi.requestAndRefreshRequest(ca_id)}catch(err){bouncex.gbi.fail(ca_id,
err)}},fetch:function(ca_id){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;config.id=getTime2();var multi=config.imp.length>1||config.jsonp;var video=config.imp[0].video;var productionEndpoint=bouncex.ssl?"https://as-sec":"http://as";var endPointPrefix=config.production===false?"http://astest":productionEndpoint;var options;config.site={page:updateQS(document.location.protocol+"//"+document.location.hostname+document.location.pathname,"deployment",bouncex.campaigns[ca_id].type,"device",
bouncex.state.mobile?"mobile":"desktop")+(multi&&config.params&&config.params.length>0?"&"+config.params:""),ref:document.referrer,mobile:bouncex.state.mobile?1:0};if(config.dynamic_site_page)config.site.page=document.location.protocol+"//"+document.location.hostname+"/"+eval(config.dynamic_site_page);var req={id:config.id,imp:config.imp,site:config.site};options={url:endPointPrefix+".casalemedia.com/cygnus",data:{v:"7",cb:getTimeMs(),s:config.s,r:bouncex.stringify(req)},dataType:"text"};if(video){bouncex.gbi.loadVideoPlayer(ca_id);
options.data.v="8.8";options.data.fn="jsonp";bouncex.campaigns[ca_id].gbi.isVideo=true}options.contentType="application/x-www-form-urlencoded";options.global=false;options.crossDomain=true;options.xhrFields={withCredentials:true};options.timeout=config.timeout||1E3;options.complete=function(response,status){if(status=="success"){var ca=bouncex.campaigns[ca_id];if(response.status===200){var responseText=response.responseText;responseText=responseText.substring(responseText.indexOf("(")+1,responseText.lastIndexOf(")"));
var bid=self.processResponse(ca_id,responseText,multi);if(!bid)return bouncex.gbi.fail(ca_id,"no bid");if(video){ca.gbi.vastUrl=bid.ext&&bid.ext.vasturl;bouncex.gbi.requestCompleteSingleVideo(ca_id,ca.gbi.vastUrl)}else ca.gbi.html=bid.adm;ca.gbi.step=multi?Number(bid.impid):1;bouncex.gbi.log(ca_id,"using step "+ca.gbi.step);activateGbiCampaign(ca_id)}else{bouncex.gbi.log(ca_id,"empty response");deactivateGbiCampaign(ca_id)}}else return bouncex.gbi.fail(ca_id,status+" "+response.status)};bouncex.gbi.doAjaxRequest(options)},
processResponse:function(ca_id,response,multi){if(response)try{response=bouncex.parseJSON(response);var highest=response.seatbid[0].bid[0];if(multi)for(var i=0;i<response.seatbid.length;i++)for(var j=0;j<response.seatbid[i].bid.length;j++){if(!response.seatbid[i].bid[j].ext.pricelevel)continue;var price=Number(response.seatbid[i].bid[j].ext.pricelevel.substring(1));var high_price=Number(highest.ext.pricelevel.substring(1));if(price>high_price)highest=response.seatbid[i].bid[j]}return highest}catch(err){}return false},
getRatio:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var unitSize=config.imp[0].banner;var windowSize=bouncex.wndsize();var wratio=1,hratio=1;if(unitSize.w>windowSize.width)wratio=windowSize.width/unitSize.w;if(unitSize.h>windowSize.height)hratio=windowSize.height/unitSize.h;return wratio>hratio?hratio:wratio}},pbm:{request:function(ca_id){bouncex.gbi.init(ca_id);try{if(this.userSynced())bouncex.gbi.requestAndRefreshRequest(ca_id);else this.syncUser(ca_id)}catch(err){bouncex.gbi.fail(ca_id,
err)}},syncUser:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var userSyncIframe=createIframe({style:"display: none;",src:"//"+config.user_sync_endpoint+"?p="+config.publisher_id});userSyncIframe.onload=function(){sessionStorage.setItem("bxpbmsynced","true");bouncex.gbi.requestAndRefreshRequest(ca_id)};document.body.appendChild(userSyncIframe)},userSynced:function(){return!!sessionStorage.getItem("bxpbmsynced")},getTagId:function(ca_id,siteId){var campaign=bouncex.campaigns[ca_id];
if(campaign.subtype)return{"masthead":"Masthead","endcap":"End_Cap","encore":"Encore","middleofarticle":"Middle_of_Article","skyline":"Skyline"}[campaign.subtype]+"_"+siteId;else if(campaign.type==="overlay")return"Overlay"+"_"+siteId;else return""},getRequestData:function(ca_id){var campaign=bouncex.campaigns[ca_id];var config=campaign.gbi.config;var siteId=(bouncex.state.mobile?config.mobile_id:config.desktop_id).toString();var requestId=bouncex.cookie.vid+"_"+bouncex.cookie.sid;var requestData=
config.isLegacy?config.requestData:{};var impressions=config.isLegacy?config.requestData.imp:config.imp;var tagId=this.getTagId(ca_id,siteId);jQuery.extend(requestData,{id:requestId,site:{id:siteId,name:window.location.hostname,ref:decodeURIComponent(bouncex.referrer),page:decodeURIComponent(bouncex.calling_url),publisher:{id:config.publisher_id}},device:{ua:navigator.userAgent,ip:bouncex.state.vip},imp:impressions.map(function(impression,i){impression.id=getTimeMs().toString()+i;impression.secure=
bouncex.ssl?1:0;impression.tagid=tagId;return impression}),at:1,tmax:200});var extraIds=this.getExtraIds();if(extraIds)requestData.user={eids:extraIds};return requestData},getExtraIds:function(){var deviceId=window.bouncex.gbi.deviceOptedStatus;if(deviceId)return[{source:"bxid",uids:[{id:deviceId,atype:1}]}]},getFetchOptions:function(ca_id){var self=this;var config=bouncex.campaigns[ca_id].gbi.config;var data=self.getRequestData(ca_id);var endpoint=(bouncex.ssl?"https://":"http://")+config.endpoint;
var impressionCount=data.imp.length;for(var i=0;i<impressionCount;i++)if(data.imp[i].video){bouncex.campaigns[ca_id].gbi.isVideo=true;bouncex.gbi.loadVideoPlayer(ca_id);break}var options={url:endpoint,data:bouncex.stringify(data),method:"POST",type:"POST",dataType:"json",timeout:config.timeout||2E3,complete:function(response,status){if(status=="success"){var ca=bouncex.campaigns[ca_id];if(response.status===200){var bid=self.processResponse(ca_id,response.responseText);if(!bid)return bouncex.gbi.fail(ca_id,
"no bid");if(bouncex.campaigns[ca_id].gbi.isVideo)bouncex.gbi.requestCompleteSingleVideo(ca_id,bid.adm);else ca.gbi.html=bid.adm;activateGbiCampaign(ca_id)}else{bouncex.gbi.log(ca_id,"empty response");deactivateGbiCampaign(ca_id)}}else return bouncex.gbi.fail(ca_id,status+" "+response.status)}};return options},fetch:function(ca_id,uid){bouncex.gbi.doAjaxRequest(this.getFetchOptions(ca_id))},processResponse:function(ca_id,response){if(response){response=bouncex.parseJSON(response);var bid=response.seatbid[0].bid[0];
return bid}return false}},rcl:{request:function(ca_id){bouncex.gbi.init(ca_id);try{this.init(ca_id)}catch(err){bouncex.gbi.fail(ca_id,err)}},init:function(ca_id){var campaign=bouncex.campaigns[ca_id];campaign.gbi.isVideo=true;campaign.gbi.playBeforeImpression=true;bouncex.gbi.loadVideoPlayer(ca_id);bouncex.gbi.requestCompleteSingleVideo(ca_id,this.getVastUrl(ca_id));activateGbiCampaign(ca_id)},getVastUrl:function(ca_id){var config=bouncex.campaigns[ca_id].gbi.config;var endpoint=config.request_url+
"?key="+config.key+"&PAGE_URL="+bouncex.calling_url+"&cb="+getTime2();if(config.params)endpoint+="&"+config.params;return endpoint}}}};bouncex.setTimeout2=setTimeout2;bouncex.setInterval2=setInterval2;bouncex.on=function(target,events,callback,selector){if(selector)delegate(target,events,tryCatch(callback),selector);else if(jQuery.fn.on!=undefined)target.on(events,tryCatch(callback));else target.bind(events,tryCatch(callback))};
bouncex.off=function(target,events,selector){if(selector)undelegate(target,events,selector);else if(jQuery.fn.off!=undefined)target.off(events);else target.unbind(events)};function delegate(target,events,callback,selector){if(jQuery.fn.on!=undefined)target.on(events,selector,callback);else if(jQuery.fn.delegate!=undefined)target.delegate(selector,events,callback);else{bouncex.err("event listener delegation not supported");return false}}
function undelegate(target,events,selector){if(jQuery.fn.off!=undefined)target.off(events,selector);else if(jQuery.fn.undelegate!=undefined)target.undelegate(selector,events);else return false}
function bcxReady(f){if(bouncex.website.fbe||!(bouncex.website.sd>-1&&(bouncex.website.vars||bouncex.website.acts)))f();else{if(!bouncex._bcxReady)eval('bouncex._bcxReady=function(){function i(){if(r.isReady){return}try{document.documentElement.doScroll("left")}catch(e){bouncex.setTimeout2(i,1);return}r.ready()}function s(t){r.bindReady();var n=r.type(t);e.done(t)}var e,t,n={};n["[object Boolean]"]="boolean";n["[object Number]"]="number";n["[object String]"]="string";n["[object Function]"]="function";n["[object Array]"]="array";n["[object Date]"]="date";n["[object RegExp]"]="regexp";n["[object Object]"]="object";var r={isReady:false,readyWait:1,holdReady:function(e){if(e){r.readyWait++}else{r.ready(true)}},ready:function(t){if(t===true&&!--r.readyWait||t!==true&&!r.isReady){if(!document.body){return bouncex.setTimeout2(r.ready,1)}r.isReady=true;if(t!==true&&--r.readyWait>0){return}e.resolveWith(document,[r])}},bindReady:function(){if(e){return}e=r._Deferred();if(document.readyState==="complete"){return bouncex.setTimeout2(r.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",t,false);window.addEventListener("load",r.ready,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",t);window.attachEvent("onload",r.ready);var n=false;try{n=window.frameElement==null}catch(s){}if(document.documentElement.doScroll&&n){i()}}},_Deferred:function(){var e=[],t,n,i,s={done:function(){if(!i){var n=arguments,o,u,a,f,l;if(t){l=t;t=0}for(o=0,u=n.length;o<u;o++){a=n[o];f=r.type(a);if(f==="array"){s.done.apply(s,a)}else if(f==="function"){e.push(a)}}if(l){s.resolveWith(l[0],l[1])}}return this},resolveWith:function(r,s){if(!i&&!t&&!n){s=s||[];n=1;try{while(e[0]){e.shift().apply(r,s)}}finally{t=[r,s];n=0}}return this},resolve:function(){s.resolveWith(this,arguments);return this},isResolved:function(){return!!(n||t)},cancel:function(){i=1;e=[];return this}};return s},type:function(e){return e==null?String(e):n[Object.prototype.toString.call(e)]||"object"}};if(document.addEventListener){t=function(){document.removeEventListener("DOMContentLoaded",t,false);r.ready()}}else if(document.attachEvent){t=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",t);r.ready()}}}return s}()');bouncex._bcxReady(f)}}
function updateQS(){var arguri=arguments.length&1,orig=arguri?arguments[0]:window.top.location.href,p=orig.split("#"),uri=p[0],hash=p.length>1?p[1]:false,s=[];for(var i=arguri;i<arguments.length;i+=2){var k=arguments[i],v=encodeURIComponent(arguments[i+1]),r=new RegExp("([?&])"+k+"=?.*?(&|$)","gi");if(uri.match(r))uri=uri.replace(r,"$1"+k+"="+v+"$2");else s.push(k+"="+v)}if(s.length)uri+=(uri.indexOf("?")==-1?"?":uri.slice(-1)!="&"?"&":"")+s.join("&");return uri+(hash?"#"+hash:"")}
function qs(o){var a=[],s="";for(var k in o){if(!o.hasOwnProperty(k))continue;a.push(k+"="+encodeURIComponent(o[k]))}return a.join("&")}function getJString(e){var t=typeof e;if(t!="object"||e===null){if(t=="string")e='"'+e+'"';return String(e)}else{var n,r,i=[],s=e&&e.constructor==Array;for(n in e){r=e[n];t=typeof r;if(t=="string")r='"'+r+'"';else if(t=="object"&&r!==null)r=getJString(r);i.push((s?"":'"'+n+'":')+String(r))}return(s?"[":"{")+String(i)+(s?"]":"}")}}
function stringify(e){if(typeof JSON==="undefined"||typeof JSON.stringify!=="function")return getJString(e);else return JSON.stringify(e)}function parseJSON(e){try{var parsed=JSON.parse(e);if(!parsed||typeof parsed!=="object")return{};return parsed}catch(e){return{}}}function addCss(css,target,id){var style=document.createElement("style");if(id)style.id=id+"-style";if(style.styleSheet)style.styleSheet.cssText=css;else style.innerHTML=css;target.appendChild(style);return style}
function getParam(name,qstring){var param_string=qstring?"?"+qstring:window.location.href;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&#]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(param_string);if(results==null)return"";else return decodeURIComponent(results[1])}
function createIframe(attributes){var iframe=document.createElement("iframe");for(var attr in attributes)if(attributes.hasOwnProperty(attr))iframe.setAttribute(attr,attributes[attr]);return iframe}
function MultiCookie(obj){this.disable_first_party=false;this.first_party_limit=999999;this.domain=window.location.host;this.best=function(b,o){return o.length>b.length?o:b};this.parse_json=function(jsonstr){return JSON.parse(jsonstr)};this.stringify_json=function(obj){return JSON.stringify(obj)};this.set_qs=function(s,k,v){if(s.indexOf("&"+k+"=")==-1)s+="&"+k+"="+v;else{var r=new RegExp("&"+k+"=[^&]*");s=s.replace(r,"&"+k+"="+v)}return s};for(var k in obj)this[k]=obj[k];var ls=window.localStorage,
gs=window.globalStorage;this.set=function(n,v){if(typeof v=="object")v=this.stringify_json(v);if(!this.disable_first_party)this.cookie(n,v);this.local_storage(n,v);this.global_storage(n,v);this.window_name(n,v);this.user_data(n,v)};this.get=function(n){var vs=this.getvs(n);var b="",o;while(o=vs.pop())b=this.best(b,o);this.set(n,b);return b};this.getvs=function(n){var vs=[];function a(v){if(v&&v!=="")vs.push(v)}a(this.cookie(n));a(this.local_storage(n));a(this.global_storage(n));a(this.window_name(n));
a(this.user_data(n));return vs};this.cookie=function(n,v){if(v!==undefined){var domain=this.domain;if(window.location.host.indexOf(domain)<0)domain=window.location.host.split(".").slice(-2).join(".");document.cookie=n+"='; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+domain;if(document.cookie.length+v.length<this.first_party_limit)document.cookie=n+"="+v+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+domain}else return this.get_qs(n,document.cookie)};this.local_storage=function(n,
v){try{if(ls)if(v!==undefined)ls.setItem(n,v);else return ls.getItem(n)}catch(e){}};this.global_storage=function(n,v){if(gs){var host=this.getHost();try{if(v!==undefined)gs[host][n]=v;else return gs[host][n]}catch(e){}}};this.window_name=function(n,v){try{if(v!==undefined)window.name=this.set_qs(window.name,n,v);else return this.get_qs(n,window.name)}catch(e){}};this.user_data=function(n,v){try{var elm=this.createElem("div","userdata_el",1);elm.style.behavior="url(#default#userData)";if(v!==undefined){elm.setAttribute(n,
v);elm.save(n)}else{elm.load(n);return elm.getAttribute(n)}}catch(e){}};this.get_qs=function(n,text){if(typeof text!=="string")return;var neq=n+"=",ca=text.split(/[;&]/),i,c;for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)===" ")c=c.substring(1,c.length);if(c.indexOf(neq)===0)return c.substring(neq.length,c.length)}}}
function getBounceCookieMulti(n){if(!bouncex.multicookie)bouncex.multicookie=new MultiCookie({domain:bouncex.website.domain,disable_first_party:bouncex.website.aco.disable_first_party&&bouncex.website.aco.disable_first_party?1:0,first_party_limit:bouncex.website.aco.first_party_limit&&bouncex.website.aco.first_party_limit?bouncex.website.aco.first_party_limit:999999,parse_json:bouncex.parseJSON,stringify_json:bouncex.stringify,best:function(b,o){if(b==="")b={};var obj={};try{if(o.substr(0,2)!=='{"')o=
bouncex.lz.decompressFromURI(o);obj=this.parse_json(o)}catch(e){return b}var bfvt=b.fvt?b.fvt:0,ofvt=obj&&obj.fvt?obj.fvt:0;return ofvt>bfvt?obj:b}});if(n!==undefined)return bouncex.multicookie.cookie(n);else{var obj=bouncex.multicookie.get(bouncex.website.cookie_name);if(obj==="")obj={};return obj}}function getBounceCookieLocalStorage(n){if(n!==undefined)return getBounceCookieSingle(n);else return bouncex.cookie}
function setBounceCookieLocalStorage(){var message=encodeURIComponent(bouncex.stringify(bouncex.cookie));if(bouncex.local_storage_frame.contentWindow)bouncex.local_storage_frame.contentWindow.postMessage(message,"*");else var interval=setInterval2(function(){if(bouncex.local_storage_frame.contentWindow){bouncex.local_storage_frame.contentWindow.postMessage(message,"*");clearInterval(interval)}},100)}
function getBounceCookieFPLocalStorage(name){if(name)return getBounceCookieSingle(name);else{var cookie=localStorage.getItem(bouncex.website.cookie_name);return parseJSON(bouncex.lz.decompressFromURI(cookie))||{}}}function setBounceCookieFPLocalStorage(){localStorage.setItem(bouncex.website.cookie_name,bouncex.lz.compressToURI(bouncex.stringify(bouncex.cookie)))}
function setBounceCookieSingle(){var c_name=bouncex.website.cookie_name;var exdate=new Date;exdate.setDate(exdate.getDate()+365);var c_value=bouncex.lz.compressToURI(bouncex.stringify(bouncex.cookie))+"; expires="+exdate.toUTCString();if(bouncex.cookie_domain)document.cookie=c_name+"="+c_value+";path=/;domain=."+bouncex.cookie_domain+";";else document.cookie=c_name+"="+c_value+";path=/;"}
function getBounceCookieSingle(name){if(!name)name=bouncex.website.cookie_name;var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==name)if(bouncex.website.cookie_name==name)if(y){if(y.substr(0,2)!=='{"')y=bouncex.lz.decompressFromURI(y);return parseJSON(y)}else return{};else return y}if(bouncex.website.cookie_name==name)return{}}
function setBounceVisitCookie(){var c_name=bouncex.website.cookie_name+"v";var exdate=new Date;exdate.setTime(exdate.getTime()+30*60*1E3);var c_value=bouncex.lz.compressToURI(bouncex.stringify(bouncex.visit_cookie))+"; expires="+exdate.toUTCString();if(bouncex.cookie_domain)document.cookie=c_name+"="+c_value+";path=/;domain=."+bouncex.cookie_domain+";";else document.cookie=c_name+"="+c_value+";path=/;"}
function getBounceVisitCookie(name){if(!name)name=bouncex.website.cookie_name+"v";var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==name)if(y.substr(0,2)==='{"')return y;else return bouncex.lz.decompressFromURI(y)}}
function setBounceCookieMulti(){var c_name=bouncex.website.cookie_name;bouncex.multicookie.set(c_name,bouncex.stringify_cookie(bouncex.cookie));if(!bouncex.browser||!bouncex.browser.safari){var url=bouncex.au+"/capture/update_cookie?cookie_name="+c_name+"&cookie="+encodeURIComponent(JSON.stringify(bouncex.cookie));var img=document.createElement("img");img.src=url}}
function clearBounceCookie(all){var c_name=bouncex.website.cookie_name;var c_value2="; expires=Thu, 01 Jan 1970 00:00:01 GMT";if(all){document.cookie=c_name+"="+c_value2+";path=/;";document.cookie=c_name+"="+c_value2+";path=/;domain=."+bouncex.cookie_domain+";"}else if(bouncex.cookie_domain)document.cookie=c_name+"="+c_value2+";path=/;";else document.cookie=c_name+"="+c_value2+";path=/;domain=."+bouncex.cookie_domain+";"}
function stringify_cookie(str){return bouncex.stringify(str).replace(/;/g,"\\u003b").replace(/\+/g,"\\u002b").replace(/\=/g,"\\u003d")}function areCookiesEnabled(){var cookieEnabled=navigator.cookieEnabled?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!cookieEnabled){document.cookie="testcookie";cookieEnabled=document.cookie.indexOf("testcookie")!=-1?true:false}return cookieEnabled}
function checkCookieEligibility(){if(!(bouncex.website.ct=="multi_cookie"&&bouncex.website.aco.disable_first_party)&&!bouncex.website.is_preview)if(document.cookie.length>6E3)return false;return true}function fpLocalStorageAvailable(){if(window.localStorage)try{localStorage.setItem("bxtest",true);if(localStorage.getItem("bxtest")){localStorage.removeItem("bxtest");return true}}catch(e){}return false}
var CustomVariables={_hasInit:false,_reloadNames:[],_reloadMax:30,init:function(){if(!this._hasInit){bouncex.cookie=getBounceCookie();bouncex.vars={};this.varsToExpire=[];if(!bouncex.debug)bouncex.website.vars=bouncex.website.vars.filter(function(v){return!v.testmode});this._index={};bouncex.website.vars.forEach(function(v,i){this._index[v.name]=i}.bind(this))}this.evalVars();this._initPolling();setBounceCookie();this._hasInit=true},evalVars:function(type){var type=type||"all",cvars=this._filterVars(type);
for(var i=0;i<cvars.length;i++){var cvar=cvars[i];if(typeof bouncex.vars[cvar.name]==="undefined")this._initVar(cvar);if(!this._canEvalVar(cvar,type))continue;var result=this._evalVar(cvar);if(result.changed)this._addToUpdateQueue(cvar);if(cvar.persist==="visit"&&!bouncex.state&&!result.success)this.varsToExpire.push({name:cvar.name,"default":cvar["default"]})}},_filterVars:function(type){this._filter=this._filter||{};if(this._filter[type])return this._filter[type];switch(type){case "all":return this._filter[type]=
bouncex.website.vars;case "devicegraph":return this._filter[type]=bouncex.website.vars.filter(function(v){return v.persist==="devicegraph"});case "polling":return this._filter[type]=bouncex.website.vars.filter(function(v){return v.polling!=="none"});case "persist":return this._filter[type]=bouncex.website.vars.filter(function(v){return v.persist!=="no"});default:return[]}},_initVar:function(cvar){var initialVal=cvar.persist!=="no"&&bouncex.cookie.v&&typeof bouncex.cookie.v[cvar.name]!=="undefined"?
bouncex.cookie.v[cvar.name]:cvar["default"];this.setVar(cvar.name,initialVal)},_canEvalVar:function(cvar,type){if(cvar.page_types.length&&(!bouncex.website.pts||cvar.page_types.indexOf(bouncex.website.pts)===-1))return false;if(cvar.persist==="devicegraph")if(!bouncex.dg||!bouncex.dg.store)return false;else if(typeof bouncex.vars[cvar.name]!=="number")return false;return true},_evalVar:function(cvar){var result={};if(typeof cvar.code!=="function")cvar.code=this._makeFunc(cvar.code);try{result=this.setVar(cvar.name,
cvar.code())}catch(e){bouncex.err(e,{source:"eval cvar",cvar:cvar.name})}return result},setVar:function(name,value){var cvar=bouncex.website.vars[this._index[name]],result={success:false,changed:false},newVal=this._formatVar(value);result.success=this._validVar(newVal);if(result.success&&bouncex.vars[cvar.name]!==newVal){result.changed=true;bouncex.vars[cvar.name]=newVal;if(cvar.persist!=="no"){bouncex.cookie.v=bouncex.cookie.v||{};bouncex.cookie.v[cvar.name]=newVal;if(bouncex.dg&&bouncex.dg.store&&
cvar.persist==="devicegraph"){bouncex.dg.store.v=bouncex.dg.store.v||{};bouncex.dg.store.v[cvar.name]=newVal}}}return result},getVar:function(name){return bouncex.website.vars[this._index[name]]},_addToUpdateQueue:function(cvar){if(cvar.polling!=="vars")this._reloadNames.push(cvar.name);if(cvar.persist!=="no")this._setBounceCookie=true;if(cvar.persist==="devicegraph")this._updateDeviceGraph=true},setVarAndReload:function(name,value){var cvar=bouncex.website.vars[this._index[name]];var result=this.setVar(cvar.name,
value);if(result.changed)this._addToUpdateQueue(cvar)},_initPolling:function(){clearInterval(this._pollingTimer);this._reloadNames=[];this._reloadCount=0;this._pollingTimer=setInterval2(function(){if(this._reloadCount>=this._reloadMax){clearInterval(this._pollingTimer);return}this.evalVars("polling");if(this._setBounceCookie){setBounceCookie();this._setBounceCookie=false}if(this._updateDeviceGraph&&bouncex.dg){bouncex.dg.updateDeviceGraphCookie();this._updateDeviceGraph=false}if(this._reloadNames.length){reload_campaigns("variable",
this._reloadNames.join(","));this._reloadCount++;this._reloadNames=[]}}.bind(this),1E3)},_makeFunc:function(code){var f=function(){return null};var str="f = (function(){return "+encodeURI(code.toString().replace("\n"," "))+"});";try{eval(decodeURI(str))}catch(e){bouncex.err("bad cvar expression "+code)}return f},_validVar:function(val){return typeof val==="number"&&!isNaN(val)||typeof val==="string"||typeof val==="boolean"},_formatVar:function(val){switch(true){case val==="true":return true;case val===
"false":return false;case typeof val==="string"&&!!val.match(/^[0-9]+$/):return parseInt(val);case typeof val==="string"&&!!val.match(/^[0-9]+\.[0-9]+$/):return parseFloat(val);default:return val}}};var init_vars=CustomVariables.init.bind(CustomVariables);function activate_action(act){bouncex.cookie["a_"+act]=1;setBounceCookie();reload_campaigns("action",act)}
function init_custom_actions(){if(bouncex.website.acts&&bouncex.website.acts.length==undefined)for(var act_name in bouncex.website.acts)if(bouncex.website.acts[act_name]["val"]){var act_el=jQuery(bouncex.website.acts[act_name]["val"]);if(act_el.length)tryCatch(function customAction(name,el){el.bind(bouncex.website.acts[name]["action"]+".bx_act",function(){if(!bouncex.website.acts[name]["js_only"])bouncex.activate_action(name);if(!bouncex.website.acts[name]["activations"]||bouncex.website.acts[name]["activations"]==
"once")jQuery(bouncex.website.acts[name]["val"]).unbind(bouncex.website.acts[name]["action"]+".bx_act");if(bouncex.website.acts[name]["callback"])eval(bouncex.website.acts[name]["callback"])})})(act_name,act_el)}}
function init_page_types(){if(bouncex.website.pt){for(var name in bouncex.website.pt)if(bouncex.website.pt.hasOwnProperty(name))if(bouncex.website.pt[name]["testmode"]&&!bouncex.debug)delete bouncex.website.pt[name];var page=findPageTypeMatch(bouncex.website.pt);bouncex.website.pts=page}}var pageTypeDeployments={current_page_url:function(a,b,c,d){return evalCriteria(a,location.href,d)},js:function(a,b,c,d){return evalCriteria("js",null,d)}};
function findPageTypeMatch(obj){for(var item in obj)if(obj.hasOwnProperty(item)){var criteria=typeof obj[item].val!=="undefined"?obj[item].val:obj[item];var match=findCriteriaMatch(criteria,pageTypeDeployments);if(match)return item}return false}
function findCriteriaMatch(criteria,deployments){try{for(var i=0;i<criteria.length;i++){var ors=criteria[i];var orsEvaluated=false;for(var j=0;j<ors.length&&!orsEvaluated;j++){var or=ors[j];orsEvaluated=deployments[or["activation"]](or["prop"],or["prop2"],or["prop3"],or["val"])}if(!orsEvaluated)return false}return true}catch(err){bouncex.err(err)}return false}
function evalCriteria(mod,str,val){var str=str||str===false?(str+"").toLowerCase():"";if(val||val===false)if(mod=="js"||mod=="regex_match"||mod=="not_regex_match")val=val+"";else val=(val+"").toLowerCase();else val="";if(mod=="contains"||mod=="not_contains")return str.indexOf(val)>-1?mod=="contains":mod!="contains";else if(mod=="yes"||mod=="no")return str?mod=="yes":mod=="no";else if(mod=="exactly"||mod=="not_exactly")return str==val?mod=="exactly":mod!="exactly";else if(mod=="contained_in"||mod==
"not_contained_in")return val.indexOf(str)>-1?mod=="contained_in":mod!="contained_in";else if(mod=="regex_match"||mod=="not_regex_match"){var match=(new RegExp(val,"gi")).test(window.location.href);return match?mod=="regex_match":mod!="regex_match"}else if(mod=="js")try{var v=eval(val);return typeof v=="boolean"&&v}catch(err){bouncex.err(err)}else if(mod=="greater")return val>str;else if(mod=="less")return val<str;else if(mod=="equal")return val==str;else if(mod=="less_equal")return val<=str;else if(mod==
"greater_equal")return val>=str;return false}
var perf={startTime:function(){if(typeof performance!="undefined"&&performance.timing&&performance.timing.navigationStart)return performance.timing.navigationStart;else return getTimeMs()}(),timesArr:{},errsArr:[],times:function(eventName){this.timesArr[eventName]=getTimeMs()-this.startTime},errs:function(errData){if(bouncex.debug||bouncex.cookie&&bouncex.cookie.did.substr(bouncex.cookie.did.length-2)<5)event_stream_report("debug",errData)},get:function(type){var arrName=type+"Arr";var keyName="perf:"+
type;var params={};params[keyName]=bouncex.stringify(this[arrName]);if(params[keyName]&&params[keyName]!="[]"&&params[keyName]!="{}")return params;return false},report:function(type){if(bouncex.cookie&&bouncex.cookie.did.substr(bouncex.cookie.did.length-3)==="037"){var params=this.get(type);if(params){params.agent="js";return event_stream_report("perf",params)}}}};
function next_sequence_id(){bouncex.cookie=getBounceCookie();if(!bouncex.cookie.hasOwnProperty("sid")||isNaN(bouncex.cookie.sid))bouncex.cookie.sid=0;bouncex.cookie.sid++;setBounceCookie();return bouncex.cookie.sid}
function event_stream_report(eventname,params){if(eventname==="user"&&bouncex.ibx._validate(params["user:email"])){var inCanada=bouncex.state.geo.country_code==="CA"||bouncex.state.geo.continent_code==="EU";var submittedToCompliantOverlay=params["user:source"]==="bouncex overlay"&&!bouncex.website.casl;if(inCanada&&!submittedToCompliantOverlay&&bouncex.website.cput)return}var baseurl=bouncex.seu+"/track.gif/"+encodeURIComponent(eventname)+"?";params.mode=bouncex.cookie.m;params.websiteid=bouncex.website.id;
params.visitid=bouncex.cookie.vid;params.deviceid=bouncex.cookie.did;if(bouncex.state&&bouncex.state.pvid!==undefined)params.pageviewid=bouncex.state.pvid;else params.pageviewid=bouncex.cookie.vpv+1;params.sequenceid=next_sequence_id();params.clienttimestamp=getTimeMs();params.clientapiversion=bouncex.tag;params.device=bouncex.cookie.d;if(bouncex.website.pts)params.page_type=bouncex.website.pts;if(!params.source)params.source="web";if(!params.agent)params.agent="user";if(bouncex.debug)bouncex.eventLog.push({name:eventname,
params:params});if(bouncex.cookie.t)params.testmode=1;if(eventname==="user"&&bouncex.browser.dnt)params.dnt=bouncex.browser.dnt;var url=baseurl+qs(params);var img=document.createElement("img");img.onload=function(){handleEventStreamReportCompletion(params)};img.src=url;behavioralAudiencesReport(eventname,params);return img.src}
function handleEventStreamReportCompletion(eventParams){if(eventParams["user:emailhash"]&&bouncex.visit_cookie&&bouncex.visit_cookie.ueh){delete bouncex.visit_cookie.ueh;setBounceVisitCookie()}}function report(ca_id,eventname,extra){if(bouncex.campaigns[ca_id].gbi)bouncex.gbi.report(ca_id,eventname,extra);else buildReport(ca_id,eventname,extra)}
function buildReport(ca_id,eventname,extra){var uq=0;var agent="user";var renames={"views":"eligible","pops":"pop","clicks":"click","closes":"close"};if(renames[eventname])eventname=renames[eventname];if(eventname=="click"){if(bouncex.campaigns[ca_id].impression_click_reported)return false;else bouncex.campaigns[ca_id].impression_click_reported=true;bouncex.cookie.campaigns[ca_id].lclk=getTime2();setBounceCookie()}else if(eventname=="close"){if(bouncex.campaigns[ca_id].impression_click_reported||
bouncex.campaigns[ca_id].submitted)return false}else if(eventname=="coupon"){agent="js";var cpn_id=extra["coupon:id"];try{bouncex.cookie.cpn=cpn_id;setBounceCookie()}catch(e){}}else if(eventname=="eligible"){agent="js";bouncex.cookie.campaigns[ca_id].vv=bouncex.cookie.campaigns[ca_id].vv?bouncex.cookie.campaigns[ca_id].vv+1:1;if(bouncex.cookie.campaigns[ca_id].vv==1)uq=1;setBounceCookie()}else if(eventname=="pop"||eventname=="trypop"){agent="js";if(bouncex.cookie.campaigns[ca_id].av==1)uq=1}if(!bouncex.website.is_preview){if(typeof extra!==
"object")extra={};if(uq)extra.uq=1;if(eventname=="coupon"){var querystring="website_id="+bouncex.website.id+"&c_id="+ca_id+"&v_id="+bouncex.cookie.vid+"&cpn_id="+cpn_id;var img=document.createElement("img");img.alt="bouncex report";img.src=bouncex.sau+"/capture/report_coupon.gif?"+querystring}extra.campaignid=ca_id;extra.source="bouncex";extra.agent=agent;event_stream_report(eventname,extra)}reportGa(ca_id,eventname);if(eventname=="click")event_js_eval(ca_id,"click")}
function report_submit(ca_id,obj,complete){obj.m=bouncex.cookie.m;obj.d=bouncex.cookie.d;obj.visit_id=bouncex.cookie.vid;obj.device_id=bouncex.cookie.did;obj.campaign_id=ca_id;obj.website_id=bouncex.website.id;obj.pvid=bouncex.state.pvid;obj.cts=getTimeMs();next_sequence_id();obj.cookie=bouncex.stringify(getBounceCookie());if(!obj.hasOwnProperty("step"))obj.step=1;if(complete)obj.last_step=1;return jQuery('<img src="'+bouncex.sau+"/capture/submit.gif?"+qs(obj)+'"/>')}
function report_conversion_sync(obj,source){perf.times("conversion");obj=obj||{};source=source||"sync";bouncex.cookie=getBounceCookie();if(typeof obj.amount=="undefined")obj.amount=0;if(typeof obj.order_id=="undefined")obj.order_id="";if(typeof obj.email=="undefined")obj.email="";if(typeof obj.goal=="undefined")obj.goal="";var bamount=obj.amount;var border_id=obj.order_id;var bemail=obj.email;var bgoal=obj.goal;var sid=next_sequence_id();var pvid=bouncex.state?bouncex.state.pvid:bouncex.cookie.vpv+
1;var url=bouncex.sau+"/capture/convert.gif?m="+bouncex.cookie.m+"&d="+bouncex.cookie.d+"&goal="+encodeURIComponent(bgoal)+"&email="+encodeURIComponent(bemail)+"&email_sha256="+(obj.email_sha256?encodeURIComponent(obj.email_sha256):"")+"&order_id="+encodeURIComponent(border_id)+"&amount="+encodeURIComponent(bamount)+"&website_id="+bouncex.website.id+"&visit_id="+bouncex.cookie.vid+"&device_id="+bouncex.cookie.did+"&pvid="+pvid+"&sid="+sid+"&cts="+getTimeMs()+"&source="+source+"&cookie="+escape(bouncex.stringify(bouncex.cookie))+
"&"+bouncex.ibx.conv_params();if(bouncex.cookie.t)url+="&testmode="+bouncex.cookie.t;var urlLengthLimit=32E3;var newUrl=url+"&extradata="+escape(bouncex.stringify(obj));if(newUrl.length<urlLengthLimit)url=newUrl;var img=document.createElement("img");img.alt="conversion pixel";img.src=url;if(bouncex.website.tcjs)try{eval(bouncex.website.tcjs)}catch(err){bouncex.err(err,{source:"bouncex.website.tcjs"})}if(bouncex.website.ibx.te&&bouncex.website.ibx.te==1)try{eval(bouncex.website.ibx.cjs)}catch(err){bouncex.err(err,
{source:"bouncex.website.ibx.cjs"})}bouncex.cookie.lc=getTime2();setBounceCookie()}
function report_conversion(obj,source){var bamount,border_id=0;var bemail="",bgoal="";if(obj){bamount=obj.amount;border_id=obj.order_id;bemail=obj.email;if(obj.goal)bgoal=obj.goal}else obj={};if(bouncex.state.oijs)if(!border_id)try{border_id=eval(bouncex.state.oijs)}catch(e){}if(bouncex.state.ovjs)if(!bamount)try{bamount=eval(bouncex.state.ovjs)}catch(e){}if(bouncex.state.oejs)if(!bemail)try{bemail=eval(bouncex.state.oejs)}catch(e){}if(bouncex.state.goal)if(!bgoal)try{bgoal=bouncex.state.goal}catch(e){}obj.goal=
bgoal;obj.amount=bamount;obj.order_id=border_id;obj.email=bemail;source=source||"async";report_conversion_sync(obj,source)}function event_js_eval(ca_id,type,data){if(bouncex.campaigns[ca_id].event_js){var campaign_id=ca_id;if(bouncex.campaigns[ca_id].event_js[type])try{eval(bouncex.campaigns[ca_id].event_js[type])}catch(err){bouncex.err(err,{source:"event_js_eval",ca_id:ca_id})}}}
function post_submit_redirect(mca_id){var is_api=bouncex.campaigns[mca_id].is_api;var redirect=bouncex.campaigns[mca_id].submission_redirect;var delay=bouncex.campaigns[mca_id].submission_redirect_delay;if(is_api&&delay<.3)delay=.3;else if(!is_api)return false;if(redirect)setTimeout2(function(){window.top.location.href=redirect},delay?delay*1E3:0)}
function reportGa(ca_id,eventname){var ga_eventname=eventname;if(eventname=="pop")ga_eventname="impression";if(bouncex.website.gar&&bouncex.campaigns[ca_id].ga_i&&bouncex.campaigns[ca_id].ga_i[ga_eventname])bouncex.report_ga(ga_eventname,bouncex.campaigns[ca_id].ga_i.label)}
function report_ga(action,label,bypass){bypass=typeof bypass!="undefined"&&!!bypass;if(typeof action!="string"||typeof label!="string")return;var interaction=false;if(!bypass){action=action.charAt(0).toUpperCase()+action.slice(1).toLowerCase();interaction=action=="Impression";action="BounceX "+action}if(typeof window.ga==="function"){if(bouncex.website.gai)window.ga("create",bouncex.website.gai);window.ga("send","event","BounceX",action,label,{"nonInteraction":interaction})}else if(typeof window._gaq===
"object"){if(bouncex.website.gai)window._gaq.push(["_setAccount",bouncex.website.gai]);var strippedLabel=label.replace(/\(|\)/g,"");window._gaq.push(["_trackEvent","BounceX",action,strippedLabel,,interaction])}}function behavioralAudiencesReport(eventName,params){if(bouncex.website.ba.enabled&&params.agent==="user")facebookReport(eventName,params)}
function facebookReport(eventName,params){if(bouncex.website.ba.fbte===1&&params.agent==="user"){var fbEvents=createFacebookEvents(eventName,params);for(var i=0;i<fbEvents.length;i++)bouncex.ba.fbel.push(fbEvents[i]);sendEventsToFacebook(false);if(eventName==="item")bouncex.ba.lip=params}}
function sendEventsToFacebook(isRetry){if(typeof fbq!="undefined")while((e=bouncex.ba.fbel.pop())!=null){fbq(e.eventType,e.eventName,e.eventParams);if(bouncex.ba.fbto)clearTimeout(bouncex.ba.fbto)}else if(bouncex.ba.fbto==null||isRetry==true)if(bouncex.ba.fbrc<5){bouncex.ba.fbto=setTimeout2(sendEventsToFacebook,500,true);bouncex.ba.fbrc++}}
function createFacebookEvents(bxEventName,bxParams){var fbEvents=[];var eventMap={"add to cart":"AddToCart","added to cart":"AddToCart","view item":"ViewContent","viewed item":"ViewContent","conversion":"Purchase"};var eventParams={"source":"bx","bx_event_name":bxEventName};if(bxEventName!=="conversion"){var itemid="item:id"in bxParams?bxParams["item:id"]:bouncex.ba.lip["item:id"];var price="item:price"in bxParams?bxParams["item:price"]:bouncex.ba.lip["item:price"];var category="item:category"in bxParams?
bxParams["item:category"]:bouncex.ba.lip["item:category"];var name="item:copy"in bxParams?bxParams["item:copy"]:bouncex.ba.lip["item:copy"];if(itemid){eventParams["content_type"]="product";eventParams["content_ids"]=[itemid]}if(price)eventParams["value"]=price;if(category)eventParams["content_category"]=category;if(name)eventParams["content_name"]=name}var customerType=typeof bouncex.getBounceCookie().lc==="undefined"?"prospect":"customer";var fbEventName="bx:"+bxEventName+" - "+customerType;fbEvents.push({"eventType":"trackCustom",
"eventName":fbEventName,"eventParams":eventParams});if(bxEventName in eventMap)fbEvents.push({"eventType":"track","eventName":eventMap[bxEventName],"eventParams":eventParams});return fbEvents}
function noteCookieAdShown(ca_id){if(bouncex.campaigns[ca_id].gbi.stack_id)if(bouncex.gbi.stacks[bouncex.campaigns[ca_id].gbi.stack_id].failed){bouncex.gbi.log(ca_id,"NOT saving cookie data");return false}else bouncex.gbi.log(ca_id,"saving cookie data");bouncex.campaigns[ca_id].ad_shown=true;bouncex.cookie.campaigns[ca_id].lavid=bouncex.cookie.vid;bouncex.cookie.campaigns[ca_id].la=getTime2();bouncex.cookie.campaigns[ca_id].av=bouncex.cookie.campaigns[ca_id].av?bouncex.cookie.campaigns[ca_id].av+
1:1;if(!bouncex.cookie.campaigns[ca_id].fsa)bouncex.cookie.campaigns[ca_id].fsa=bouncex.cookie.campaigns[ca_id].la;bouncex.cookie.campaigns[ca_id].as=bouncex.cookie.campaigns[ca_id].as?bouncex.cookie.campaigns[ca_id].as+1:1;bouncex.cookie.campaigns[ca_id].ao=bouncex.cookie.campaigns[ca_id].ao?bouncex.cookie.campaigns[ca_id].ao+1:1;bouncex.campaigns[ca_id].ap=bouncex.campaigns[ca_id].ap?bouncex.campaigns[ca_id].ap+1:1;if((bouncex.campaigns[ca_id].type=="overlay"||bouncex.campaigns[ca_id].type=="tabtitle"||
bouncex.campaigns[ca_id].coverlay!=="none")&&!bouncex.campaigns[ca_id].is_man){bouncex.cookie.ao++;bouncex.pa++;bouncex.cookie.as++}setBounceCookie()}
function report_endpageview(event){if(event.type==="visibilitychange"&&document.visibilityState!=="hidden")return;var endpageview_params={"pageview:url":bouncex.calling_url,"pageview:customvariables":JSON.stringify(bouncex.vars),"pageview:event":event.type};event_stream_report("endpageview",endpageview_params);bouncex.off(bouncex.window,".bx_endpageview");bouncex.off(bouncex.document,".bx_endpageview")}
function init_endpageview_event(){if(bouncex.state.mobile)bouncex.on(bouncex.document,"visibilitychange.bx_endpageview",report_endpageview);bouncex.on(bouncex.window,"beforeunload.bx_endpageview pagehide.bx_endpageview unload.bx_endpageview",report_endpageview)}function baddjs(file){var oScript=document.createElement("script");oScript.setAttribute("src",file);oScript.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(oScript)}
function loadBrandStyles(){if(bouncex.brandStyles){bouncex.brandStylesLoaded=bouncex.brandStylesLoaded||{};var newBrandStyles="";var newBrandStyleIds="";for(var style_id in bouncex.brandStyles)if(bouncex.brandStyles.hasOwnProperty(style_id)&&!bouncex.brandStylesLoaded[style_id]){newBrandStyles+=bouncex.brandStyles[style_id];newBrandStyleIds+="-"+style_id;bouncex.brandStylesLoaded[style_id]=true}if(newBrandStyles)bouncex.addCss(newBrandStyles,bouncex.head[0],"bx-brand"+newBrandStyleIds)}}
function loadWebfonts(){if(bouncex.webfonts){bouncex.fontCSSLoaded=bouncex.fontCSSLoaded||{};var newStylesheets="";for(var fontFolder in bouncex.webfonts)if(bouncex.webfonts.hasOwnProperty(fontFolder)&&!bouncex.fontCSSLoaded[fontFolder]){newStylesheets+='<link href="//assets.bounceexchange.com/fonts/'+fontFolder+'/stylesheet.css" rel="stylesheet" type="text/css" media="all" />';bouncex.fontCSSLoaded[fontFolder]=1}jQuery(newStylesheets).appendTo(bouncex.head)}}
function wndsize(){var e=0;var t=0;if(!window.innerWidth)if(!(document.documentElement.clientWidth==0)){e=document.documentElement.clientWidth;t=document.documentElement.clientHeight}else{e=document.body.clientWidth;t=document.body.clientHeight}else{e=window.innerWidth;t=window.innerHeight}return{width:e,height:t}}function wndorientation(){return window.orientation}
function make_include_string(type,rltype,rlname){next_sequence_id();var tojQ=bouncex.website.ljq==="never"?0:typeof jQuery;var bcx_persist="";if(!type){type="init1";if(CustomVariables.varsToExpire.length){var cookie=bouncex.cookie;CustomVariables.varsToExpire.forEach(function(v){bcx_persist+="&vdef["+v.name+"]="+escape(v["default"]).replace(/\+/g,"%2B")})}else var cookie=getBounceCookie()}else{var cookie=bouncex.cookie;type="reloadCampaigns"}cookie=bouncex.stringify(cookie);var visit_cookie=bouncex.stringify(bouncex.visit_cookie);
bcx_vars="";var currval=null;for(var n in bouncex.vars){var v=bouncex.vars[n];bcx_vars+="&vars["+n+"]="+escape(v)}var tzo=(new Date).getTimezoneOffset();var wsize=bouncex.wndsize();var resolution=wsize.width+"x"+wsize.height;var cts=getTimeMs();var bp=bouncex.psh&&bouncex.psh.supported?1:0;var bcx_str=bouncex.au+"/bounce/"+type+".js?tojQ="+tojQ+"&cts="+cts+"&tzo="+tzo+"&is_preview="+(bouncex.website.is_preview?"true":"false")+"&website_id="+bouncex.website.id+"&resolution="+resolution+"&referrer="+
bouncex.referrer+"&is_google_pla="+bouncex.is_google_pla+"&calling_url="+bouncex.calling_url+"&visit_cookie="+escape(visit_cookie)+"&cookie="+escape(cookie)+bcx_vars.replace(/\+/g,"%2B")+bcx_persist+"&cookie_too_large="+bouncex.cookie_too_large+"&bp="+bp+"&pts="+(bouncex.website.pts||"");if(type=="reloadCampaigns"){bcx_str+="&pvid="+bouncex.state.pvid;if(bouncex.campaigns)for(var ca_id in bouncex.campaigns)if(bouncex.campaigns[ca_id].ad_visible)bcx_str+="&vc[]="+ca_id;if(rltype!=undefined)bcx_str+=
"&rltype="+rltype;if(rlname!=undefined)bcx_str+="&rlname="+rlname;if(bouncex.cookie.t)bcx_str+="&testmode="+bouncex.cookie.t}return bcx_str}function unload_campaigns(){for(var ca_id in bouncex.events)unload_campaign(ca_id)}
function unload_campaign(ca_id){for(var e in bouncex.events[ca_id]){if(typeof bouncex.events[ca_id][e]=="object")jQuery(bouncex.events[ca_id][e]).unbind(e);else if(typeof bouncex.events[ca_id][e]=="function")bouncex.events[ca_id][e]();else clearTimeout(bouncex.events[ca_id][e]);delete bouncex.events[ca_id][e]}}
function reload_campaigns(name,type){if(bouncex.state){if(bouncex.reloadCampaignsTimeout!==false){clearTimeout(bouncex.reloadCampaignsTimeout);bouncex.reloadCampaignsTimeout=false}var maxReloadInterval=1E3;var minReloadInterval=0;var now=getTimeMs();var delay=minReloadInterval;if(bouncex.lastReloadCampaigns>now-maxReloadInterval)delay=maxReloadInterval-(now-bouncex.lastReloadCampaigns);name=name||reload_campaigns.caller&&reload_campaigns.caller.arguments&&reload_campaigns.caller.arguments.length&&
reload_campaigns.caller.arguments[0];bouncex.reloadCampaignsTimeout=setTimeout2(function(){bouncex.lastReloadCampaigns=now;clearTimeout(bouncex.reloadCampaignsTimeout);bouncex.reloadCampaignsTimeout=false;bouncex.baddjs(bouncex.make_include_string("reloadCampaigns",type||"manual",name))},delay)}}
function init(){if(typeof jQuery==="undefined"||typeof jQuery.fn==="undefined"){setTimeout2(function(){bouncex.init()},100);return false}perf.times("init1");bouncex.direction="up";bouncex.events={};bouncex.window=jQuery(window).eq(0);bouncex.document=jQuery(document).eq(0);bouncex.body=jQuery("body").eq(0);bouncex.head=jQuery("head").eq(0);bouncex.html=jQuery("html").eq(0);if(!bouncex.body||!bouncex.body.length){setTimeout2(function(){bouncex.init()},3E3);return false}if(bouncex.website.dge)bouncex.dg.init();
bouncex.overlay_visible=false;bouncex.server_client_time_diff=bouncex.state.tn-parseInt(getTimeMs()/1E3);if(bouncex.cookie.as>0&&window.document.title.length==0)window.document.title=window.location.hostname;if(bouncex.cookie.v)for(var n in bouncex.cookie.v)if(bouncex.vars[n])bouncex.setv(n,bouncex.cookie.v[n]);init_post_campaign_public_function();bouncex.pa=0;bouncex.timespaced=false;var allCookies=false;if(bouncex.website.ct=="multi_cookie"||bouncex.website.ct=="fp_local_storage")allCookies=true;
clearBounceCookie(allCookies);bouncex.setBounceCookie();bouncex.ca=activation_funcs();bouncex.body_margin=parseInt(bouncex.body.css("margin-top"))||0;bouncex.ibx._init();init_ibx_tracking();init_event_tracking();init_website_custom_js();if(bouncex.website.bpush)bouncex.psh.init();listenMessages();if(bouncex.campaigns){bouncex.loadBounceCss(function(){bouncex.loadBrandStyles();init_activation_funcs()});bouncex.loadWebfonts()}else if(bouncex.usd)unhideSite();bouncex.bcxReady(function(){if(typeof window.bxAsyncInit===
"function")window.bxAsyncInit();else if(bouncex.state.rc)bouncex.report_conversion(null,"scraping")});init_custom_actions();init_endpageview_event()}function unhideSite(){clearTimeout(bouncex.usd.timeout);bouncex.usd.callback();delete bouncex.usd}
var XD={postMessage:function(message,tar){var frame=jQuery("iframe",jQuery(tar));if(!frame.length)return;var f=frame.get(0).contentWindow;if(!(f&&f.postMessage))return;setTimeout2(function(){f["postMessage"](message,"*")},0)},receiveMessage:function(callback){if(window["addEventListener"])window["addEventListener"]("message",callback,false);else window["attachEvent"]("onmessage",callback)}};
function listenMessages(){if(bouncex.listening)return false;bouncex.listening=true;XD.receiveMessage(function(message){var allowedOrigins=["https://api2.bounceexchange.com","http://api2.bounceexchange.com","https://api.bounceexchange.com","http://api.bounceexchange.com","https://dev.bounceexchange.com","http://dev.bounceexchange.com","https://tag.bounceexchange.com","http://tag.bounceexchange.com","https://assets.bounceexchange.com","http://assets.bounceexchange.com","http://bounceexchange.com","https://bounceexchange.com"];
if(!(message.origin&&allowedOrigins.indexOf(message.origin)>-1))return;var message_str=message.data;if(!message_str||typeof message_str!=="string"||message_str.indexOf("bcx_message")!==0)return false;var messages=message_str.split("&");var result=[];for(var i=0;i<messages.length;i++){var r=messages[i].split("=");result[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}var mca_id=result["campaign_id"];var message=result["bcx_content"]||result["message"];if(!parseInt(mca_id)||!bouncex.campaigns[mca_id])return;
if(bouncex.cookie.d!=="d"&&bouncex.campaigns[mca_id].coverlay!=="none")if(message=="move_step"||message=="had_error")bouncex.window.trigger("scroll");if(message=="failed"){bouncex.campaigns[mca_id].failed=true;if(bouncex.campaigns[mca_id].ad_visible)bouncex.close_ad(mca_id,true);return false}else if(message=="loaded")activate_campaign(mca_id);else if(message=="ios8_focused"){if(bouncex.browser.ios&&bouncex.browser.ios>7){bouncex.lastScroll=bouncex.window.scrollTop();setTimeout2(function(){var cObject=
jQuery("#bcx_"+mca_id+"_iframe_overlay,#bcx_"+mca_id+"_iframe_top,#bcx_"+mca_id+"_iframe_bottom,#bcx_"+mca_id+"_iframe_callout").eq(0);window.scrollTo(0,cObject.offset().top)},500)}}else if(message=="ios8_blured"){if(bouncex.browser.ios&&bouncex.browser.ios>7&&bouncex.lastScroll>=0)setTimeout2(function(){window.scrollTo(0,bouncex.lastScroll);bouncex.lastScroll=undefined},100)}else if(message=="eval")try{eval(result.js)}catch(e){bouncex.err(e)}else if(bouncex.campaigns[mca_id].ad_visible)if(message==
"report_coupon")reportCouponSeen(mca_id,result["code"]);else if(message=="bcx_close_ad")close_ad(mca_id);else if(message=="bcx_close_ad_silent")close_ad(mca_id,false,true);else if(message=="bcx_form_subitted")processSubmittedCampaignForm(result,mca_id);else if(message=="report_click")report(mca_id,"click");else if(message=="had_error");else if(message=="reset_fsa"){bouncex.cookie.campaigns[mca_id].fsa=result["fsa"];setBounceCookie()}else if(message=="move_step"){jQuery("#bcx_onsite_els_"+mca_id+"_s"+
result["to_step"]).show();jQuery("#bcx_onsite_els_"+mca_id+"_s"+result["cur_step"]).hide();if(bouncex.campaigns[mca_id].show_close_step)show_close(mca_id,true)}else if(message=="update_title"){var old_title,seconds_left,str;seconds_left=result["seconds_left"];var update_time=result["update_time"];if(!update_time)bouncex.old_title=window.document.title;if(result["remove_timer"]=="1")bouncex.remove_timer=true;else bouncex.remove_timer=false;bouncex.timer_exists=true;if(seconds_left<=0){window.document.title=
bouncex.old_title;bouncex.timer_exists=false}seconds=seconds_left%60;minutes=Math.floor(seconds_left/60)%60;hours=result["format"].indexOf("{days}")>-1||result["format"].indexOf("{0days}")>-1?Math.floor(seconds_left/3600)%24:Math.floor(seconds_left/3600);days=result["format"]=="{days}"||result["format"]=="{0days}"?Math.ceil(seconds_left/86400):Math.floor(seconds_left/86400);if(minutes<10)minutes="0"+minutes;if(seconds<10)seconds="0"+seconds;if(hours<10)hours="0"+hours;if(result["format"].indexOf("{0days}")>
-1&&days<10)days="0"+days;str=result["format"].replace("{hours}",hours).replace("{minutes}",minutes).replace("{seconds}",seconds).replace("{days}",days).replace("{0days}",days);if(!bouncex.old_title&&bouncex.timer_exists)window.document.title=str;else if(bouncex.old_title&&bouncex.timer_exists)window.document.title=str+" | "+bouncex.old_title}})}
function can_show_ad(ca_id,inthefuture){if(!bouncex.campaigns[ca_id])return false;if(bouncex.campaigns[ca_id].qbxtest&&!bouncex.campaigns[ca_id].ad_visible){if(!inthefuture&&bouncex.campaigns[ca_id].hasBehavioralCriteria&&!behavioralCriteriaComplete(ca_id))return false;return true}var oca_id=ca_id;var stackId=bouncex.campaigns[ca_id].gbi.stack_id;if(stackId&&ca_id!=bouncex.gbi.stacks[stackId].leader_id)ca_id=bouncex.gbi.stacks[stackId].leader_id;var time_now=getTime2();bouncex.cookie=getBounceCookie();
bouncex.cookie.lvt=bouncex.cookie.campaigns[ca_id].lvt=time_now;setBounceCookie();if(!inthefuture){if((bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay")&&bouncex.overlay_visible)return false;if(bouncex.campaigns[oca_id].ad_visible)return false;if(bouncex.website.ots)if((bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay")&&bouncex.timespaced==true)return false;if(bouncex.campaigns[ca_id].tvao>0){var top=(window.pageYOffset||document.documentElement.scrollTop)-
(document.documentElement.clientTop||0);if(bouncex.campaigns[ca_id].tvao>top)return false}if(bouncex.campaigns[ca_id].hasBehavioralCriteria&&!behavioralCriteriaComplete(ca_id))return false}if(bouncex.campaigns[oca_id].failed)return false;if(bouncex.website.map>0&&bouncex.pa>=bouncex.website.map&&(bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay"||bouncex.campaigns[ca_id].type=="tabtitle")&&!bouncex.campaigns[ca_id].is_man)return false;if(bouncex.campaigns[ca_id].map>
0&&bouncex.campaigns[ca_id].ap>=bouncex.campaigns[ca_id].map)return false;if(bouncex.campaigns[ca_id].mas>0)if(bouncex.cookie.campaigns[ca_id].as>=bouncex.campaigns[ca_id].mas)return false;if(!bouncex.campaigns[ca_id].is_man&&bouncex.website.mas>0&&(bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay")&&bouncex.website.mas<=bouncex.cookie.as)return false;if(bouncex.campaigns[ca_id].mao>0&&bouncex.cookie.campaigns[ca_id].ao>=bouncex.campaigns[ca_id].mao)return false;
if(!bouncex.campaigns[ca_id].is_man&&!bouncex.campaigns[ca_id].ipc&&(bouncex.cookie.es||bouncex.cookie.campaigns[ca_id].ls||bouncex.cookie.campaigns[ca_id].submitted)&&bouncex.campaigns[ca_id].is_ec)return false;if((bouncex.campaigns[ca_id].is_pers||bouncex.campaigns[ca_id].closed_no_show)&&bouncex.cookie.campaigns[ca_id].wc)return false;if(bouncex.campaigns[ca_id].repressed)return false;if(inthefuture&&bouncex.campaigns[ca_id].hasBehavioralCriteria&&bouncex.campaigns[ca_id].activation_registry.length>
0&&!bouncex.campaigns[ca_id].realtimeArmed&&behavioralCriteriaComplete(ca_id))return false;return true}
function close_ad(ca_id,silent,no_report){if(!bouncex.campaigns[ca_id])return;if(!bouncex.campaigns[ca_id].ad_visible)return;bouncex.campaigns[ca_id].ad_visible=false;if(bouncex.campaigns[ca_id].coverlay!="none"||bouncex.campaigns[ca_id].type=="overlay"){bouncex.overlay_visible=false;if(bouncex.website.otc){bouncex.timespaced=true;bouncex.events[ca_id]["timeout_timespace"]=setTimeout2(function(){bouncex.timespaced=false},bouncex.website.otc*1E3)}}if(bouncex.campaigns[ca_id].ng)close_ad_ng(ca_id);
else close_ad_og(ca_id);event_js_eval(ca_id,"close");if(!silent){var oca_id=ca_id;if(bouncex.campaigns[ca_id].gbi.stack_id&&oca_id!=bouncex.gbi.stacks[bouncex.campaigns[ca_id].gbi.stack_id].leader_id)oca_id=bouncex.gbi.stacks[bouncex.campaigns[ca_id].gbi.stack_id].leader_id;bouncex.cookie.campaigns[oca_id].wc=getTime2();setBounceCookie();if(!no_report)report(ca_id,"close");if(bouncex.campaigns[ca_id].close_redirect_type==="reload")bouncex.reload_campaigns();else if(bouncex.campaigns[ca_id].close_redirect_type&&
bouncex.campaigns[ca_id].close_redirect_url)bouncex.events[ca_id]["timeout_close_redirect"]=teleport(bouncex.campaigns[ca_id].close_redirect_type,bouncex.campaigns[ca_id].close_redirect_url)}}
function close_ad_ng(ca_id){if(bouncex.campaigns[ca_id].type==="tabtitle"&&!bouncex.campaigns[ca_id].control){if(bouncex.campaigns[ca_id].custom_tab_title.favicon_url)changeFavicon(ca_id,true);cancelTitleUpdate(ca_id)}if(bouncex.campaigns[ca_id].control||bouncex.campaigns[ca_id].noCreative)return false;bouncex.campaigns[ca_id].obj1.unbind("click.bcx_campaign_click_"+ca_id,handleClick);if(bouncex.browser.ios&&bouncex.campaigns[ca_id].inputs.length>0&&(bouncex.campaigns[ca_id].type==="conversionbar"||
bouncex.campaigns[ca_id].type==="nanobar")){bouncex.campaigns[ca_id].inputs.unbind(".bcx_ios_input_fix_"+ca_id);removeIosInputFix(ca_id)}var autoCloseEvent="timeout_auto_submission_close";if(bouncex.events[ca_id][autoCloseEvent]){clearTimeout(bouncex.events[ca_id][autoCloseEvent]);delete bouncex.events[ca_id][autoCloseEvent]}var timerEvent="campaign_timer";for(var eventName in bouncex.events[ca_id])if(eventName.indexOf(timerEvent)!==-1){clearInterval(bouncex.events[ca_id][eventName]);delete bouncex.events[ca_id][eventName]}close_ad_ng_post_outro(ca_id);
if(bouncex.fxHelper&&bouncex.fxHelper.browserSupport!=="none"&&bouncex.campaigns[ca_id].transitionEffect!=="no_effect"){bouncex.campaigns[ca_id].obj1.addClass("bx-impress-out");var creative=jQuery("#bx-creative-"+ca_id);bouncex.on(creative,bouncex.fxHelper.animationend,function(){bouncex.off(creative,bouncex.fxHelper.animationend);clearInterval(bouncex.campaigns[ca_id].animationTimeout);bouncex.campaigns[ca_id].obj2.removeClass("bx-impress bx-impress-out")});bouncex.campaigns[ca_id].animationTimeout=
setTimeout2(function(){if(bouncex.campaigns[ca_id]&&!bouncex.campaigns[ca_id].ad_visible){bouncex.off(creative,bouncex.fxHelper.animationend);bouncex.campaigns[ca_id].obj2.removeClass("bx-impress bx-impress-out")}},1E3)}else bouncex.campaigns[ca_id].obj2.removeClass("bx-impress");if(bouncex.website.ally)hideAlly(ca_id);if(bouncex.campaigns[ca_id].gbi&&bouncex.campaigns[ca_id].gbi.isVideo&&bouncex.campaigns[ca_id].gbi.player)bouncex.campaigns[ca_id].gbi.player.remove()}
function close_ad_ng_post_outro(ca_id){if(bouncex.campaigns[ca_id].type=="overlay"){if(bouncex.website.ally)hideAllyOverlayPostOutro(ca_id);if(bouncex.browser.iphone||bouncex.browser.ipad){bouncex.html.removeClass("bx-client-overlay-ios");bouncex.body.removeClass("bx-client-overlay-ios");bouncex.window.scrollTop(bouncex.preImpressScrollY)}else{bouncex.html.removeClass("bx-client-overlay");bouncex.body.removeClass("bx-client-overlay")}}if(bouncex.campaigns[ca_id].blur_gate_enabled&&(bouncex.campaigns[ca_id].type==
"agilityzone"||bouncex.campaigns[ca_id].type=="annotation"))blurGateRemove(ca_id)}
function close_ad_og(ca_id){var te=getCampaignTransitionEffect(ca_id);var ef=te.substr(0,1);var cs=jQuery("#campaign_"+ca_id+"_container_overlay,#campaign_"+ca_id+"_container_top,#campaign_"+ca_id+"_container_bottom,#campaign_"+ca_id+"_container_callout");if(bouncex.timer_exists&&bouncex.remove_timer){clearInterval(bouncex.timer_interval);window.document.title=bouncex.old_title;bouncex.timer_exists=false}if(ef=="r"){if(bouncex.campaigns[ca_id].overlay!="none"){var lbx=document.getElementById("campaign_"+
ca_id+"_lightbox");setTimeout2(function(){setOpacity(lbx,0)},150)}cs.removeClass("bcx_after");setTimeout2(function(){cs.hide().css("display","none").removeClass("bcx_"+te)},300)}else cs.hide().css("display","none");if(bouncex.campaigns[ca_id].callout!="none")bouncex.window.unbind("bcx_callout_"+ca_id);if(bouncex.campaigns[ca_id].top!="none"){var push=document.getElementById("campaign_"+ca_id+"_pusher_top");if(push){bSlideUp(push);bouncex.window.trigger("bx_ad_hide",[parseInt(getStyle(push,"height"))])}}if(bouncex.campaigns[ca_id].bottom!=
"none")jQuery("#campaign_"+ca_id+"_pusher_bottom").appendTo("body").slideUp("slow");if(bouncex.campaigns[ca_id].overlay=="code"||bouncex.campaigns[ca_id].overlay=="email"||bouncex.campaigns[ca_id].overlay=="genie")flash_objects.css("visibility","visible")}
function trigger_ad(type,ca_id,args){var campaign=bouncex.campaigns[ca_id];if(type!=="manual"){var triggerId=makeUniqueInstrumentId(type,args);if(campaign.hasBehavioralCriteria){addTriggerToRegistry(triggerId,ca_id);if(campaign.realtimeArmed)if(!evaluateBehavioralTriggers([triggerId],campaign.activations))return behavioralCriteriaComplete(ca_id)}}show_ad(type,ca_id)}
function show_ad(type,ca_id){if(!can_show_ad(ca_id))return;if(!bouncex.pa)perf.times("showad");var ca=bouncex.campaigns[ca_id];if(ca.gbi&&(ca.gbi.provider=="index"||ca.gbi.provider=="tabr"||ca.gbi.provider=="dfphtml"||ca.gbi.provider=="pbm")&&!ca.gbi.contentLoaded&&!ca.gbi.isVideo){bouncex.gbi.clearRequestAssets(ca_id);var call=ca.gbi.provider!="tabr"?"requestCompleteSingle":"requestCompleteMultiple";bouncex.gbi[call](ca_id,ca.gbi.html,function(){ca.gbi.contentLoaded=true;show_ad(type,ca_id);if(ca.gbi.step>
1){setJumpStep(ca_id,ca.gbi.step,false);nextStep(ca_id)}});return false}if(ca.gbi.isVideo&&ca.gbi.playBeforeImpression&&!ca.gbi.videoResponseLoaded){bouncex.gbi.playVideoBeforeImpression(type,ca_id);return false}bouncex.campaigns[ca_id].ad_visible=true;bouncex.campaigns[ca_id].impression_click_reported=false;bouncex.campaigns[ca_id].submitted=false;noteCookieAdShown(ca_id);report(ca_id,"pop",{"pop:activation":type});if(bouncex.campaigns[ca_id].ng)show_ad_ng(type,ca_id);else show_ad_og(type,ca_id);
if(bouncex.campaigns[ca_id].overlay!="teleport"&&!bouncex.campaigns[ca_id].noCreative){show_close(ca_id);if(bouncex.campaigns[ca_id].ad_auto_close){var delay=bouncex.campaigns[ca_id].is_pers?calc_delay_cvt(bouncex.campaigns[ca_id].ad_auto_close):bouncex.campaigns[ca_id].ad_auto_close*1E3;bouncex.events[ca_id]["timeout_auto_close"]=setTimeout2(function(){close_ad(ca_id)},delay)}}if(bouncex.campaigns[ca_id].supress_overlay||bouncex.campaigns[ca_id].supress_top||bouncex.campaigns[ca_id].supress_bottom)for(var nca_id in bouncex.campaigns)if(nca_id!=
ca_id&&(bouncex.campaigns[ca_id].supress_overlay&&(bouncex.campaigns[nca_id].coverlay!="none"||bouncex.campaigns[nca_id].type=="overlay")||bouncex.campaigns[ca_id].supress_top&&(bouncex.campaigns[nca_id].ctop!="none"||bouncex.campaigns[nca_id].type=="nanobar")||bouncex.campaigns[ca_id].supress_bottom&&(bouncex.campaigns[nca_id].cbottom!="none"||bouncex.campaigns[nca_id].type=="conversionbar"))){bouncex.campaigns[nca_id].supressed_by_ca_id=ca_id;close_ad(nca_id,true)}repressCampaigns(ca_id);if(bouncex.usd)unhideSite();
event_js_eval(ca_id,"impression");if(bouncex.campaigns[ca_id].osfn_website)try{eval(bouncex.campaigns[ca_id].osfn_website)}catch(err){bouncex.err(err,{source:"osfn_website",ca_id:ca_id})}}
function repressCampaigns(ca_id){if(bouncex.campaigns[ca_id].repress_overlay||bouncex.campaigns[ca_id].repress_top||bouncex.campaigns[ca_id].repress_bottom)for(var nca_id in bouncex.campaigns)if(nca_id!=ca_id&&(bouncex.campaigns[ca_id].repress_overlay&&(bouncex.campaigns[nca_id].coverlay!="none"||bouncex.campaigns[nca_id].type=="overlay")||bouncex.campaigns[ca_id].repress_top&&(bouncex.campaigns[nca_id].ctop!="none"||bouncex.campaigns[nca_id].type=="nanobar")||bouncex.campaigns[ca_id].repress_bottom&&
(bouncex.campaigns[nca_id].cbottom!="none"||bouncex.campaigns[nca_id].type=="conversionbar"))){bouncex.campaigns[nca_id].repressed_by_ca_id=ca_id;bouncex.campaigns[nca_id].repressed=true}}
function flashTitle(ca_id,howManyTimes){function step(){if(!bouncex.campaigns[ca_id].custom_tab_title.flashOn){bouncex.campaigns[ca_id].custom_tab_title.flashOn=true;if(bouncex.campaigns[ca_id].custom_tab_title.formattedTitle)document.title=bouncex.campaigns[ca_id].custom_tab_title.formattedTitle;changeFavicon(ca_id,false)}else{bouncex.campaigns[ca_id].custom_tab_title.flashOn=false;if(bouncex.campaigns[ca_id].custom_tab_title.formattedTitle)document.title=bouncex.originalTitle;changeFavicon(ca_id,
true)}if(--howManyTimes>0)bouncex.events[ca_id].effect_timeout=setTimeout2(step,2E3)}howManyTimes=howManyTimes?howManyTimes:5;cancelTitleUpdate(ca_id);step()}
function scrollTitle(ca_id,position){if(!bouncex.campaigns[ca_id].custom_tab_title.formattedTitle)return;position=position||0;function step(){var msg=bouncex.campaigns[ca_id].custom_tab_title.formattedTitle+"  ";if(position>msg.length)position=0;document.title=msg.substr(position)+msg.substr(0,position);position+=3;bouncex.events[ca_id].effect_timeout=setTimeout2(step,1E3)}cancelTitleUpdate(ca_id);step()}
function changeFavicon(ca_id,toOrig){if(!bouncex.campaigns[ca_id].custom_tab_title.favicon_url)return;jQuery('link[rel~="icon"]').remove();var link=document.createElement("link");link.type=toOrig?"image/x-icon":bouncex.campaigns[ca_id].linkType;link.rel="icon";link.href=toOrig?bouncex.campaigns[ca_id].originalFavicon:bouncex.campaigns[ca_id].custom_tab_title.favicon_url;document.getElementsByTagName("head")[0].appendChild(link)}
function cancelTitleUpdate(ca_id){clearTimeout(bouncex.events[ca_id].effect_timeout);if(bouncex.originalTitle)document.title=bouncex.originalTitle;else document.title="";delete bouncex.campaigns[ca_id].custom_tab_title.flashOn}
function updateTitle(ca_id){bouncex.originalTitle=bouncex.originalTitle||document.title;var iconLink=jQuery('link[rel~="icon"]');bouncex.campaigns[ca_id].originalFavicon=iconLink&&iconLink.attr("href")||"/favicon.ico";bouncex.campaigns[ca_id].linkType=bouncex.campaigns[ca_id].custom_tab_title.favicon_type||"image/x-icon";var effect=bouncex.campaigns[ca_id].custom_tab_title.effect;var flashTimes=effect==="flashForever"?Infinity:1;if(effect==="scroll")scrollTitle(ca_id);else flashTitle(ca_id,flashTimes*
2-1);changeFavicon(ca_id,false)}
function show_ad_ng(type,ca_id){if(!bouncex.campaigns[ca_id].control)if(bouncex.campaigns[ca_id].type=="tabtitle")updateTitle(ca_id);else if(bouncex.campaigns[ca_id].type=="teleport")teleport("_self",bouncex.campaigns[ca_id].overlay_teleport_html);if(bouncex.campaigns[ca_id].control||bouncex.campaigns[ca_id].noCreative)return false;googleTrustedStoresBadgeFix(ca_id);if(bouncex.campaigns[ca_id].submittedYet)bouncex.campaigns[ca_id].submittedYet=false;if(bouncex.events[ca_id]["edwTimeout"])clearTimeout(bouncex.events[ca_id]["edwTimeout"]);bouncex.campaigns[ca_id].forceLastStep=
false;if(bouncex.campaigns[ca_id].current_step){bouncex.campaigns[ca_id].next_step=1;bouncex.nextStep(ca_id)}else{bouncex.campaigns[ca_id].next_step=2;bouncex.campaigns[ca_id].current_step=1}bouncex.campaigns[ca_id].obj1.bind("click.bcx_campaign_click_"+ca_id,{ca_id:ca_id},handleClick);if(!(bouncex.browser.msie||bouncex.browser.ipad||bouncex.browser.iphone)){var ctc=bouncex.campaigns[ca_id].obj1.find(".bx-click-to-copy");if(ctc.length>0){bouncex.on(ctc,"click",function(event){document.execCommand("copy")});
bouncex.on(ctc,"copy",clickToCopy)}}bouncex.campaigns[ca_id].inputs=bouncex.campaigns[ca_id].obj1.find(".bx-input, .bx-textarea");if((!bouncex.browser.msie||bouncex.browser.msie>8)&&bouncex.campaigns[ca_id].inputs.length>0){var bindEvents="keydown.bcx_campaign_input_"+ca_id+" focus.bcx_campaign_input_"+ca_id+" blur.bcx_campaign_input_"+ca_id+" change.bcx_campaign_input_"+ca_id+" paste.bcx_campaign_input_"+ca_id+" keyup.bcx_campaign_input_"+ca_id;bxBind(bouncex.campaigns[ca_id].inputs,bindEvents,handleInputEvents)}validateCouponsSeen(ca_id);
if(bouncex.campaigns[ca_id].type=="overlay"){bouncex.overlay_visible=true;if(bouncex.browser.iphone||bouncex.browser.ipad){bouncex.preImpressScrollY=bouncex.window.scrollTop();bouncex.html.addClass("bx-client-overlay-ios");bouncex.body.addClass("bx-client-overlay-ios");bouncex.html[0].scrollTop=1;bouncex.body[0].scrollTop=1}else{var htmlOverflow=getStyle(bouncex.html[0],"overflow-y");if(htmlOverflow=="auto"||htmlOverflow=="scroll")bouncex.html.addClass("bx-client-overlay");else bouncex.body.addClass("bx-client-overlay")}}else if(bouncex.campaigns[ca_id].type==
"nanobar"||bouncex.campaigns[ca_id].type=="conversionbar"||bouncex.campaigns[ca_id].type=="liquidscreen"){var clone=jQuery("#bx-campaign-"+ca_id+"-clone");if(bouncex.campaigns[ca_id].type=="nanobar"||bouncex.campaigns[ca_id].type=="liquidscreen")bouncex.body.prepend(clone);else if(bouncex.campaigns[ca_id].type=="conversionbar")bouncex.body.append(clone)}else if(bouncex.campaigns[ca_id].type=="annotation")bxBind(window,"resize.bx_campaign_"+ca_id,function(e){alignCampaign(ca_id)},ca_id);if(bouncex.browser.ios&&
bouncex.campaigns[ca_id].inputs.length>0&&(bouncex.campaigns[ca_id].type==="conversionbar"||bouncex.campaigns[ca_id].type==="nanobar"))bouncex.campaigns[ca_id].inputs.bind("touchstart.bcx_ios_input_fix_"+ca_id,{ca_id:ca_id},handleIosInputTouchStart).bind("blur.bcx_ios_input_fix_"+ca_id,{ca_id:ca_id},handleIosInputBlur);alignCampaign(ca_id);if(bouncex.campaigns[ca_id].blur_gate_enabled&&(bouncex.campaigns[ca_id].type=="agilityzone"||bouncex.campaigns[ca_id].type=="annotation"))blurGateAdd(ca_id);if(bouncex.campaigns[ca_id].shroud_on_hover)addShroudOnHover(ca_id);
bouncex.campaigns[ca_id].obj2.addClass("bx-impress");if(bouncex.website.ally)showAlly(ca_id);if(bouncex.fxHelper&&bouncex.fxHelper.browserSupport!=="none"&&bouncex.campaigns[ca_id].transitionEffect!=="no_effect"){var creative=jQuery("#bx-creative-"+ca_id);bouncex.campaigns[ca_id].obj1.addClass("bx-impress-in");bouncex.on(creative,bouncex.fxHelper.animationend,function(){bouncex.off(creative,bouncex.fxHelper.animationend);bouncex.campaigns[ca_id].obj1.removeClass("bx-impress-in")})}bouncex.events[ca_id]["ally_timeout"]=
setTimeout2(function(){runCampaignTimers(ca_id);if(bouncex.website.ally&&bouncex.campaigns[ca_id].type=="overlay")focusOnFirstFocusableElement(ca_id,true)},0);if(bouncex.campaigns[ca_id].gbi&&bouncex.campaigns[ca_id].gbi.isVideo&&bouncex.campaigns[ca_id].gbi.config.playOnImpression&&bouncex.campaigns[ca_id].gbi.player&&!(bouncex.campaigns[ca_id].gbi.player.getState()==="playing"))bouncex.campaigns[ca_id].gbi.player.play()}
function runCampaignTimers(ca_id){var timers=bouncex.campaigns[ca_id].obj2.find(".bx-timer");if(timers.length>0){var index=0;timers.each(function(k,obj){var timer_id="campaign_timer_"+ ++index;if(!bouncex.events[ca_id][timer_id]){var timer=jQuery(obj);var countTo=timer.attr("data-count-to");var countFrom=timer.attr("data-count-from");var format=timer.attr("data-format");var onComplete=timer.attr("data-on-complete");var reset=parseInt(timer.attr("data-reset"));var hasDays=/{0?days}/.test(format);run_timer(countTo,
countFrom,format,hasDays,onComplete,reset,timer,timer_id,ca_id);bouncex.events[ca_id][timer_id]=setInterval2(function(){run_timer(countTo,countFrom,format,hasDays,onComplete,false,timer,timer_id,ca_id)},1E3)}})}}
function blurGateAdd(ca_id){var ca=bouncex.campaigns[ca_id];ca.blur_gate_targets=jQuery(ca.callout_t+" ~ *").add(ca.blur_gate_inclusions).not(ca.blur_gate_exclusions).not(".bxc");ca.blur_gate_filler_placement=ca.calloutTarget.next().is(ca.obj1)?ca.obj1:ca.calloutTarget;ca.blur_gate_filler=jQuery();if(bouncex.browser.msie&&bouncex.browser.msie<=9)blurGateAddUsingRedactedContent(ca_id);else if(bouncex.browser.msie===10||bouncex.browser.msie===11||bouncex.browser.edge)blurGateAddUsingTextShadow(ca_id);
else blurGateAddUsingCssFilters(ca_id)}
function blurGateAddUsingRedactedContent(ca_id){var ca=bouncex.campaigns[ca_id];var contentHeight=0;ca.blur_gate_targets.each(function(i,el){contentHeight+=jQuery(el).height()});blurGateFillWithDummyContent(ca_id,ca.blur_gate_redacted_filler,contentHeight,0);var textColor=getStyle(ca.calloutTarget[0],"color")||"#000";var styles=".bx-blur-"+ca_id+".bx-blur-redacted b { color:"+textColor+"!important; background-color:"+textColor+"!important; }";var styleEl=bouncex.addCss(styles,ca.obj1[0],"bx-campaign-"+
ca_id+"-blur-redacted");ca.blur_gate_filler=ca.blur_gate_filler.add(styleEl);ca.blur_gate_targets.addClass("bx-blur-"+ca_id+" bx-blur-hide")}
function blurGateAddUsingTextShadow(ca_id){var ca=bouncex.campaigns[ca_id];blurGateAddFillerIfNeeded(ca_id,ca.blur_gate_lorem_filler);var textColor=getStyle(ca.calloutTarget[0],"color")||"#000";var styles=".bx-blur-"+ca_id+".bx-blur-textshadow { text-shadow: 0 0 8px 1px "+textColor+"!important; }";var styleEl=bouncex.addCss(styles,ca.obj1[0],"bx-campaign-"+ca_id+"-blur-shadow");ca.blur_gate_targets.add(ca.blur_gate_filler).addClass("bx-blur-"+ca_id+" bx-blur-textshadow");ca.blur_gate_filler=ca.blur_gate_filler.add(styleEl)}
function blurGateAddUsingCssFilters(ca_id){var ca=bouncex.campaigns[ca_id];blurGateAddFillerIfNeeded(ca_id,ca.blur_gate_lorem_filler);ca.blur_gate_targets.add(ca.blur_gate_filler).addClass("bx-blur-"+ca_id+" bx-blur")}function blurGateRemove(ca_id){var ca=bouncex.campaigns[ca_id];if(ca.blur_gate_filler)ca.blur_gate_filler.remove();if(ca.blur_gate_targets)ca.blur_gate_targets.removeClass("bx-blur-"+ca_id+" bx-blur bx-blur-hide bx-blur-textshadow")}
function blurGateAddFillerIfNeeded(ca_id,fillerType){var ca=bouncex.campaigns[ca_id];var minHeight=600;var contentHeight=0;ca.blur_gate_targets.each(function(i,el){contentHeight+=jQuery(el).height();return contentHeight<minHeight});var fillerAmountNeeded=minHeight-contentHeight;if(fillerAmountNeeded>0)blurGateFillWithDummyContent(ca_id,fillerType,fillerAmountNeeded,0)}
function blurGateFillWithDummyContent(ca_id,fillerType,targetHeight,currentHeight){var ca=bouncex.campaigns[ca_id];if(currentHeight<targetHeight){var fillerVariationIndex=ca.blur_gate_filler.length%fillerType.length;var filler=jQuery(fillerType[fillerVariationIndex]);ca.blur_gate_filler_placement.after(filler);var fillerHeight=filler.height();if(fillerHeight>0){ca.blur_gate_filler=ca.blur_gate_filler.add(filler);blurGateFillWithDummyContent(ca_id,fillerType,targetHeight,currentHeight+fillerHeight)}}}
function addShroudOnHover(ca_id){var campaignCreative=jQuery("#bx-creative-"+ca_id),hoverShroud=jQuery("#bx-hover-shroud-"+ca_id),hoverShroudTimer;if(campaignCreative.length&&hoverShroud.length){bxBind(campaignCreative,"mouseenter.bx-backdrop",function(){hoverShroudTimer=setTimeout2(function(){bouncex.campaigns[ca_id].obj1.addClass("bx-hover-shroud-on")},150)},ca_id);bxBind(campaignCreative,"mouseleave.bx-backdrop",function(){clearTimeout(hoverShroudTimer);bouncex.campaigns[ca_id].obj1.removeClass("bx-hover-shroud-on")},
ca_id)}}
function show_ad_og(type,ca_id){var zx=2147483646;var msg="bcx_pop&cookie=";msg+=encodeURIComponent(bouncex.stringify_cookie(getBounceCookie()));if(bouncex.campaigns[ca_id].top!="none"){var top=document.getElementById("campaign_"+ca_id+"_container_top");if(top){show_ca_el(ca_id,top);if(bouncex.campaigns[ca_id].header_top_nano){var h=document.getElementById("campaign_"+ca_id+"_pusher_top");document.body.insertBefore(h,document.body.firstChild);if(bouncex.campaigns[ca_id].htna=="anypage"||bouncex.campaigns[ca_id].htna=="landing"&&
bouncex.state.iol){bSlideDown(h,"height");bouncex.window.trigger("bx_ad_show",[parseInt(getStyle(top,"height"))])}else{h.style.display="block";bouncex.window.trigger("bx_ad_show")}}center_campaign(ca_id,top);XD.postMessage(msg,top)}}if(bouncex.campaigns[ca_id].bottom!="none"){var bottom=document.getElementById("campaign_"+ca_id+"_container_bottom");if(bottom){show_ca_el(ca_id,bottom);if(bouncex.campaigns[ca_id].header_bottom_nano){var h=document.getElementById("campaign_"+ca_id+"_pusher_bottom");
jQuery(document.body).append(h);if(bouncex.campaigns[ca_id].hbna=="anypage"||bouncex.campaigns[ca_id].hbna=="landing"&&bouncex.state.iol)bSlideDown(h,"height");else h.style.display="block"}center_campaign(ca_id,bottom);XD.postMessage(msg,bottom)}}if(bouncex.campaigns[ca_id].callout!="none"){var callout=jQuery("#campaign_"+ca_id+"_container_callout");bouncex.campaigns[ca_id].c_button=jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);if(callout.length&&bouncex.campaigns[ca_id].c_button.length){var callout_obj=
callout.get(0);show_ca_el(ca_id,callout_obj);XD.postMessage(msg,callout_obj);align_callout(callout,ca_id);bxBind(window,"resize.bcx_callout_"+ca_id+" bx_ad_show.bcx_callout_"+ca_id+" bx_ad_hide.bcx_callout_"+ca_id+" scroll.bcx_callout_"+ca_id,function(e,anim_h){var anim=false;if(e.type==="bx_ad_show")anim="down";if(e.type==="bx_ad_hide")anim="up";align_callout(callout,ca_id,anim,anim_h)},ca_id)}}if(bouncex.campaigns[ca_id].overlay!="none")if(bouncex.campaigns[ca_id].overlay=="email"||bouncex.campaigns[ca_id].overlay==
"genie"||bouncex.campaigns[ca_id].overlay=="code"){var middle=document.getElementById("campaign_"+ca_id+"_container_overlay");if(middle){bouncex.overlay_visible=true;var mid=document.getElementById("campaign_"+ca_id+"_middle");if(!bouncex.fs()){middle.style.top=middle.style.left=0;mid.style.position="absolute"}show_ca_el(ca_id,middle);show_lightbox(ca_id);center_campaign(ca_id,middle);if(top)top.style.zIndex=zx;if(bottom)bottom.style.zIndex=zx;if(bouncex.state.mobile)bouncex.window.resize(function(){center_campaign(ca_id,
middle)});hide_flash()}XD.postMessage(msg,middle)}else if(bouncex.campaigns[ca_id].overlay==="teleport")teleport(bouncex.campaigns[ca_id].overlay_teleport_type,bouncex.campaigns[ca_id].overlay_teleport_html)}
function destroy_ad(ca_id,keepObject){unload_campaign(ca_id);close_ad(ca_id,true);if(bouncex.campaigns[ca_id].ng)jQuery("#bx-campaign-"+ca_id+",#bx-campaign-"+ca_id+"-clone").remove();else jQuery("#campaign_"+ca_id+"_container_overlay,#campaign_"+ca_id+"_container_callout,#campaign_"+ca_id+"_container_top,#campaign_"+ca_id+"_container_bottom,#campaign_"+ca_id+"_pusher_top,#campaign_"+ca_id+"_pusher_bottom").remove();if(bouncex.campaigns[ca_id]&&!keepObject){if(bouncex.campaigns[ca_id].activityTime)deleteActivityCampaignAndCleanup(ca_id);
delete bouncex.campaigns[ca_id]}}var zcCallbacks=[];function getScript(url,onsuccess){jQuery.ajax({url:url,cache:true,dataType:"script",success:onsuccess})}function clickToCopy(event){var textEl=jQuery(event.target);var originalText=textEl.text().trim();if(originalText!="Copied!"){event.originalEvent.clipboardData.setData("text/plain",originalText);event.preventDefault();textEl.text("Copied!");setTimeout2(function(){textEl.text(originalText)},1E3)}else textEl.text(originalText)}
function showGenieFormErrors(ca_id,jform,response){var errors=response?response.errors:false;if(errors){var err_rows=jQuery();for(var input_name in errors)if(errors.hasOwnProperty(input_name)){var err_field=jform.find(".bx-error-"+ca_id+"-"+input_name);var err_row=err_field.text(errors[input_name]).closest(".bx-row");err_row.addClass("bx-row-validation");if(bouncex.website.ally)err_row.find(":input").attr("aria-invalid",true).attr("aria-describedby","bx-error-"+ca_id+"-"+input_name);err_rows=err_rows.add(err_row)}if(bouncex.website.ally)err_rows.eq(0).find(":input").focus();
return false}else return true}function setSubmittedCookies(ca_id){bouncex.cookie=getBounceCookie();bouncex.campaigns[ca_id].submitted=true;bouncex.cookie.campaigns[ca_id].ls=getTime2();if(bouncex.campaigns[ca_id].is_ec)bouncex.cookie.es=true;setBounceCookie()}
function processSubmittedCampaignForm(result,ca_id){setSubmittedCookies(ca_id);if(bouncex.website.ibx.te&&bouncex.website.ibx.te==1&&bouncex.website.ibx.mibcx==1)bouncex.ibx.user(result["email"],{__src:"bouncex overlay",campaign:ca_id});reportGa(ca_id,"submission");event_js_eval(ca_id,"submission",result);if(typeof bouncex.onformsubmit=="function")bouncex.onformsubmit(result["email"]);post_submit_redirect(ca_id)}
function processCampaignSubmitClose(ca_id,noPostSubmit){if(bouncex.campaigns[ca_id].acas)bouncex.events[ca_id]["timeout_auto_submission_close"]=setTimeout2(function(){bouncex.close_ad(ca_id)},bouncex.campaigns[ca_id].acas*1E3);if(noPostSubmit)bouncex.close_ad(ca_id,false,true)}
function processLastStep(ca_id,noPostSubmit){if(bouncex.campaigns[ca_id].submittedYet)return;bouncex.campaigns[ca_id].submittedYet=true;var qs=bouncex.campaigns[ca_id].obj1.find(".bx-input").serialize();var result=queryStringToObject(qs);processSubmittedCampaignForm(result,ca_id);processCampaignSubmitClose(ca_id,noPostSubmit)}
function validateForm(jform,ca_id){if(bouncex.formSubmitting)return false;else bouncex.formSubmitting=true;next_sequence_id();var isLastStep=bouncex.campaigns[ca_id].next_step==bouncex.campaigns[ca_id].numSteps&&!bouncex.campaigns[ca_id].noPostSubmit||bouncex.campaigns[ca_id].forceLastStep;var noPostSubmit=bouncex.campaigns[ca_id].current_step==bouncex.campaigns[ca_id].numSteps&&(bouncex.campaigns[ca_id].numSteps===1||bouncex.campaigns[ca_id].noPostSubmit);var last_step=isLastStep||noPostSubmit?1:
0;var serial=jform.serialize();serial+="&step="+bouncex.campaigns[ca_id].current_step+"&visit_id="+bouncex.cookie.vid+"&m="+bouncex.cookie.m+"&d="+bouncex.cookie.d;serial+="&cookie="+encodeURIComponent(bouncex.stringify(bouncex.cookie));serial+="&pos=overlay&step_name=before";serial+="&last_step="+last_step;serial+="&device_id="+bouncex.cookie.did;serial+="&cts="+getTimeMs();serial+="&pvid="+bouncex.state.pvid;serial+="&url="+bouncex.calling_url;if(bouncex.cookie.t)serial+="&testmode="+bouncex.cookie.t;
for(var key in bouncex.vars)serial+="&var["+key+"]="+encodeURIComponent(bouncex.vars[key]);var action=jform.attr("action");jform.find(".bx-row-validation").removeClass("bx-row-validation");if(bouncex.website.ally)jform.find('[aria-invalid="true"]').removeAttr("aria-invalid");var options={url:action,data:serial,dataType:"jsonp",contentType:"multipart/form-data",crossDomain:true,global:false,success:function(response){bouncex.formSubmitting=false;if(bouncex.events[ca_id]["edwTimeout"])clearTimeout(bouncex.events[ca_id]["edwTimeout"]);
if(showGenieFormErrors(ca_id,jform,response)){bouncex.nextStep(ca_id);if(last_step)processLastStep(ca_id,noPostSubmit)}jQuery.event.trigger({campaign_id:ca_id,isEmptyResponse:!response,response:response,stepNumber:bouncex.campaigns[ca_id].current_step,type:"bxValidateFormComplete"})},error:function(){bouncex.formSubmitting=false;bouncex.nextStep(ca_id);if(last_step);}};if(!bouncex.campaigns[ca_id].edw)bouncex.events[ca_id]["edwTimeout"]=setTimeout2(function(){bouncex.nextStep(ca_id);if(last_step)processLastStep(ca_id,
noPostSubmit)},2500);jQuery.ajax(options)}function submitCampaignStep(ca_id,ca_id2){ca_id=ca_id2||ca_id;if(bouncex.campaigns[ca_id].jform.find(".bx-input").length>0)validateForm(bouncex.campaigns[ca_id].jform,ca_id);else nextStep(ca_id);return false}function setJumpStep(ca_id,jumpStep,forceLastStep){bouncex.campaigns[ca_id].jumpStep=jumpStep;bouncex.campaigns[ca_id].forceLastStep=forceLastStep}
function nextStep(ca_id){if(bouncex.campaigns[ca_id].jumpStep){bouncex.campaigns[ca_id].next_step=bouncex.campaigns[ca_id].jumpStep;bouncex.campaigns[ca_id].jumpStep=false}if(bouncex.campaigns[ca_id].next_step<=bouncex.campaigns[ca_id].numSteps){bouncex.campaigns[ca_id].obj2.find(".bx-step-"+ca_id+"-"+bouncex.campaigns[ca_id].current_step).removeClass("bx-active-step");bouncex.campaigns[ca_id].obj2.find(".bx-step-"+ca_id+"-"+bouncex.campaigns[ca_id].next_step).addClass("bx-active-step");cacheCreativeForm(ca_id,
bouncex.campaigns[ca_id].next_step);bouncex.campaigns[ca_id].obj2.removeClass("bx-active-step-"+bouncex.campaigns[ca_id].current_step).addClass("bx-active-step-"+bouncex.campaigns[ca_id].next_step);bouncex.campaigns[ca_id].current_step=bouncex.campaigns[ca_id].next_step;bouncex.campaigns[ca_id].next_step++;validateCouponsSeen(ca_id);show_close(ca_id);alignCampaign(ca_id);if(bouncex.website.ally){setFocusableElements(ca_id);focusOnFirstFocusableElement(ca_id,true)}}}
function handleInputEvents(event){var input=jQuery(this);var parent=input.closest(".bx-row");switch(event.type){case "focus":parent.addClass("bx-has-focus");break;case "blur":parent.removeClass("bx-has-focus");break;case "keydown":input.css("min-height",input.outerHeight());var ignoredKeys={8:null,9:null,13:null,16:null,17:null,18:null,20:null,37:null,38:null,39:null,40:null,91:null,93:null,224:null};if(!ignoredKeys.hasOwnProperty(event.keyCode))parent.addClass("bx-has-text");break;case "change":case "paste":case "keyup":if(input.val().length>
0)parent.addClass("bx-has-text");else parent.removeClass("bx-has-text");break}}function handleClickReporting(ca_id,clickType,eventToReport){var reportDefault=eventToReport==="default";var inputStep=bouncex.campaigns[ca_id].jform.find(".bx-input").length>0;if(eventToReport==="nothing"||clickType==="submit"&&reportDefault&&inputStep)return false;else if(clickType==="close"&&reportDefault)eventToReport="close";else if(reportDefault)eventToReport="click";bouncex.report(ca_id,eventToReport)}
function handleClick(e){var ca_id=e.data.ca_id;var clickedEl=jQuery(e.target);var bxClickEl=clickedEl.attr("data-click")?clickedEl:clickedEl.closest("#bx-campaign-"+ca_id+" [data-click]","#bx-campaign-"+ca_id);var clickType=bxClickEl.attr("data-click");var ignoreClicksFromThisElement=parseInt(bxClickEl.attr("data-ignore-bubbles"))&&!clickedEl.is(bxClickEl);var event=bxClickEl.attr("data-click-report")||"default";var fbLogin=parseInt(bxClickEl.attr("data-fb-login"));if(bxClickEl.length===0||ignoreClicksFromThisElement)return true;
e.preventDefault();e.stopPropagation();handleClickReporting(ca_id,clickType,event);if(clickType==="close")bouncex.close_ad(ca_id,false,true);else if(clickType==="nothing"){if(fbLogin)bouncex.fb.popCa(ca_id)}else if(clickType==="hyperlink"){var url=bxClickEl.attr("href");if(bxClickEl.attr("target")==="_blank"){var newWindow=window.open();newWindow.opener=null;newWindow.location=url}else setTimeout2(function(){window.location.href=url},300)}else if(clickType==="trigger"){bouncex.report(ca_id,"click");
var experienceToTrigger=parseInt(bxClickEl.attr("data-click-trigger"));if(!bouncex.campaigns[experienceToTrigger])experienceToTrigger=by_parent_id(experienceToTrigger);if(bouncex.campaigns[experienceToTrigger])bouncex.show_ad(experienceToTrigger)}else if(clickType==="submit"){var jumpStep=parseInt(bxClickEl.attr("data-submit-jump"));var forceLastStep=parseInt(bxClickEl.attr("data-submit-force"));if(fbLogin)bouncex.fb.nextStep(ca_id,jumpStep,forceLastStep);else{bouncex.setJumpStep(ca_id,jumpStep,forceLastStep);
bouncex.submitCampaignStep(ca_id)}}}function validateCouponsSeen(ca_id){var coupons=bouncex.campaigns[ca_id].obj1.find(".bx-step-"+bouncex.campaigns[ca_id].current_step+" .coupon:visible");coupons.each(function(i){var id=jQuery(this).attr("id");if(id&&id.substr(0,4).toLowerCase()==="cpn_")reportCouponSeen(ca_id,id.substr(4))})}
function reportCouponSeen(ca_id,coupon_id){var id=parseInt(coupon_id);if(id&&(!bouncex.cookie.cpn||bouncex.cookie.cpn!==id)){bouncex.cookie.cpn=id;bouncex.report(ca_id,"coupon",{"coupon:id":id})}}
function run_timer(count_to,count_from,format,hasDays,on_complete,resetIfExpired,timer,timer_id,ca_id){var firstSeen=bouncex.cookie.campaigns[ca_id].fsa;var isRelativeTimer=count_from==="first_impression";var now=getTime2();var end=count_to-now;if(isRelativeTimer){if(resetIfExpired&&firstSeen+end<=0){firstSeen=bouncex.cookie.campaigns[ca_id].fsa=now;setBounceCookie()}end+=firstSeen}if(end<=0){clearInterval(bouncex.events[ca_id][timer_id]);end=0;if(on_complete==="close")close_ad(ca_id)}var new_timer_html=
format.replace(/{(.*?)}/gi,function(query,unit,index,string){var units=0;var operation="floor";var spanOpen='<span class="bx-timer-units bx-timer-'+unit+'">';var spanClose="</span>";var unitLabel='<span class="bx-ally-label">'+(unit==="0days"?"days":unit)+"</span>";switch(unit){case "0days":case "days":operation=string.split("{").length-1===0?"ceil":"floor";units=end/60/60/24;break;case "hours":units=hasDays?end/60/60%24:end/60/60;break;case "minutes":units=end/60%60;break;case "seconds":units=end%
60;break}units=Math[operation](units);return spanOpen+(units<10&&unit!="days"?"0"+units:units)+unitLabel+spanClose});timer.html(new_timer_html)}function by_parent_id(pid){for(var cid in bouncex.campaigns)if(bouncex.campaigns[cid].pid==pid)return cid;return null}function show_close(ca_id,force){if(bouncex.campaigns[ca_id].ng)show_close_ng(ca_id,force);else show_close_og(ca_id,force)}
function show_close_ng(ca_id,force){function swapCloseClasses(placement){bouncex.campaigns[ca_id].obj2.removeClass("bx-has-close-inside bx-has-close-outside");if(placement)bouncex.campaigns[ca_id].obj2.addClass("bx-has-close-"+placement)}var newPlacement=bouncex.campaigns[ca_id].closePlacement[bouncex.campaigns[ca_id].current_step-1];if(force){newPlacement=newPlacement||"outside";swapCloseClasses(newPlacement)}else if(bouncex.campaigns[ca_id].current_step===1){if(bouncex.campaigns[ca_id].close_button_delay){swapCloseClasses(false);
bouncex.events[ca_id]["timeout_close_delay"]=setTimeout2(function(){swapCloseClasses(bouncex.campaigns[ca_id].closePlacement[bouncex.campaigns[ca_id].current_step-1]);delete bouncex.events[ca_id]["timeout_close_delay"];if(bouncex.website.ally&&bouncex.campaigns[ca_id].type=="overlay")setFocusableElements(ca_id)},bouncex.campaigns[ca_id].close_button_delay*1E3)}}else if(bouncex.campaigns[ca_id].show_close_step||!bouncex.events[ca_id]["timeout_close_delay"]){swapCloseClasses(newPlacement);if(bouncex.events[ca_id]["timeout_close_delay"]){clearTimeout(bouncex.events[ca_id]["timeout_close_delay"]);
delete bouncex.events[ca_id]["timeout_close_delay"]}}if(bouncex.website.ally&&bouncex.campaigns[ca_id].type=="overlay")setFocusableElements(ca_id)}
function show_close_og(ca_id,force){if(bouncex.campaigns[ca_id].close_button_delay||!bouncex.campaigns[ca_id].show_close){var closes;var poses=["_top","_bottom","_overlay","_callout"];if(!force)for(var index=0;index<poses.length;index++){closes=document.getElementById("bcx_close_"+ca_id+poses[index]);if(closes)closes.style.display="none"}if(bouncex.campaigns[ca_id].show_close)bouncex.events[ca_id]["timeout_close_delay"]=setTimeout2(function(){for(var index=0;index<poses.length;index++){closes=document.getElementById("bcx_close_"+
ca_id+poses[index]);if(closes)closes.style.display="block"}},force?0:bouncex.campaigns[ca_id].close_button_delay*1E3)}}
function show_lightbox(ca_id){if(!bouncex.campaigns[ca_id].ngs){var ef=getCampaignTransitionEffect(ca_id).substr(0,1);var lbx=document.getElementById("campaign_"+ca_id+"_lightbox");lbx.style.backgroundColor=bouncex.campaigns[ca_id].color;lbx.style.display="block";if(ef=="r")setTimeout2(function(){setOpacity(lbx,bouncex.campaigns[ca_id].opacity)},0);else setOpacity(lbx,bouncex.campaigns[ca_id].opacity)}}
function getCampaignTransitionEffect(ca_id){var sessionActivations=bouncex.campaigns[ca_id].ng?0:1;return bouncex.campaigns[ca_id][bouncex.cookie.campaigns[ca_id].as>sessionActivations?"te2":"te"]}
function show_ca_el(ca_id,element){var te=getCampaignTransitionEffect(ca_id);var ef=te.substr(0,1);if(te=="fade")fade(element,bouncex.campaigns[ca_id].tes);else if(te=="slide")slide(element,bouncex.campaigns[ca_id].tes,ca_id);else if(ef=="r"){var $el=jQuery(element);if(bouncex.campaigns[ca_id].te!=te)$el.removeClass("bcx_"+bouncex.campaigns[ca_id].te);$el.addClass("bcx_"+te);element.style.display="block";setTimeout2(function(){jQuery(element).addClass("bcx_after")},123)}else element.style.display=
"block"}function center_campaign(ca_id,el){if(!bouncex.state.mobile)if(!bouncex.fs()){var valign=el.getAttribute("data-valign");var height=parseInt(getStyle(el,"height"));var type=el.getAttribute("data-type");var wsize=bouncex.wndsize();var wheight=wsize.height;el.style.position="absolute";scroll_campaign(valign,type,el,wheight,height);bouncex.window.bind("scroll",function(k,v){scroll_campaign(valign,type,el,wheight,height)})}}
function scroll_campaign(valign,type,el,wheight,height){var top=get_top();if(valign=="middle")if(type=="overlay")el.style.top=top+"px";else el.style.top=top+wheight/2-height/2+"px";else if(valign=="bottom")el.style.top=top+wheight-height+"px";else if(valign=="top")el.style.top=top+"px"}
function placeCampaign(ca_id){if(bouncex.campaigns[ca_id].ng&&(bouncex.campaigns[ca_id].type==="agilityzone"||bouncex.campaigns[ca_id].type==="annotation"))placeCallout(ca_id);else bouncex.body.append(bouncex.campaigns[ca_id].html);bouncex.campaigns[ca_id].placed=true}
function placeCallout(ca_id){bouncex.campaigns[ca_id].calloutTarget=bouncex.campaigns[ca_id].calloutTarget||jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);bouncex.campaigns[ca_id].calloutPlacementTarget=bouncex.campaigns[ca_id].calloutPlacementTarget||jQuery(bouncex.campaigns[ca_id].callout_pt).eq(0);var campaignBody=bouncex.campaigns[ca_id].obj1||jQuery(bouncex.campaigns[ca_id].html);if(bouncex.campaigns[ca_id].type!=="annotation")campaignBody.css({marginTop:parseInt(bouncex.campaigns[ca_id].callout_voffset)+
"px",marginLeft:parseInt(bouncex.campaigns[ca_id].callout_hoffset)+"px"});if(bouncex.campaigns[ca_id].calloutPlacementTarget.length)bouncex.campaigns[ca_id].calloutPlacementTarget[bouncex.campaigns[ca_id].dom_placement_method](campaignBody);else bouncex.campaigns[ca_id].calloutTarget[bouncex.campaigns[ca_id].dom_placement_method](campaignBody)}
function alignCampaign(ca_id){var hOffset=parseInt(bouncex.campaigns[ca_id].callout_hoffset)||0;var vOffset=parseInt(bouncex.campaigns[ca_id].callout_voffset)||0;if(bouncex.campaigns[ca_id].type=="nanotab"||bouncex.campaigns[ca_id].type=="conversioncorner"||bouncex.campaigns[ca_id].type=="dynamicwallpaper"||bouncex.campaigns[ca_id].type=="railbar"){if(bouncex.campaigns[ca_id].lastCalloutPos)bouncex.campaigns[ca_id].obj1.removeClass("bx-fixed-"+bouncex.campaigns[ca_id].lastCalloutPos);bouncex.campaigns[ca_id].obj1.addClass("bx-fixed-"+
bouncex.campaigns[ca_id].callout_pos);bouncex.campaigns[ca_id].lastCalloutPos=bouncex.campaigns[ca_id].callout_pos;if(bouncex.campaigns[ca_id].type=="dynamicwallpaper")if(bouncex.website.content_width){var creative_width=jQuery("#bx-creative-"+ca_id).width();if(bouncex.campaigns[ca_id].header_bottom_alignment=="content_right")hOffset+=parseInt((Number(bouncex.website.content_width)+Number(creative_width))/2);else hOffset-=parseInt((Number(bouncex.website.content_width)+Number(creative_width))/2)}bouncex.campaigns[ca_id].obj1.find(".bx-slab").css("margin-left",
hOffset+"px");if(bouncex.campaigns[ca_id].callout_pos.indexOf("b")!==-1)bouncex.campaigns[ca_id].obj1.find(".bx-align").css("margin-bottom",-vOffset+"px");else bouncex.campaigns[ca_id].obj1.find(".bx-align").css("margin-top",vOffset+"px");if(bouncex.campaigns[ca_id].type=="dynamicwallpaper"&&bouncex.website.content_width)if(bouncex.campaigns[ca_id].header_bottom_alignment.indexOf("right")>-1)bouncex.campaigns[ca_id].obj1.find(".bx-shroud").css({"left":"50%","margin-left":parseInt(bouncex.website.content_width/
2)+"px"});else if(bouncex.campaigns[ca_id].header_bottom_alignment.indexOf("left")>-1)bouncex.campaigns[ca_id].obj1.find(".bx-shroud").css({"left":"auto","right":"50%","margin-right":parseInt(bouncex.website.content_width/2)+"px"})}else if(bouncex.campaigns[ca_id].type=="annotation"&&bouncex.campaigns[ca_id].calloutTarget.length){var target=bouncex.campaigns[ca_id].calloutTarget;var placement=bouncex.campaigns[ca_id].dom_placement_method;var placementTarget=bouncex.campaigns[ca_id].calloutPlacementTarget;
var hAlign=bouncex.campaigns[ca_id].callout_anchor_pos.substr(0,1);var vAlign=bouncex.campaigns[ca_id].callout_anchor_pos.substr(1,2);var creative=bouncex.campaigns[ca_id].obj1.find(".bx-creative");if(!bouncex.campaigns[ca_id].obj1.hasClass("bx-annotation-"+bouncex.campaigns[ca_id].callout_pos)){if(bouncex.campaigns[ca_id].lastCalloutPos)bouncex.campaigns[ca_id].obj1.removeClass("bx-annotation-"+bouncex.campaigns[ca_id].lastCalloutPos);bouncex.campaigns[ca_id].obj1.addClass("bx-annotation-"+bouncex.campaigns[ca_id].callout_pos);
bouncex.campaigns[ca_id].lastCalloutPos=bouncex.campaigns[ca_id].callout_pos}var targetSize={height:parseInt(target.height()),width:parseInt(target.width()),outerHeight:parseInt(target.outerHeight()),outerWidth:parseInt(target.outerWidth())};var siblingOffset={x:0,y:0};var boxAdjust={top:0,right:0,bottom:0,left:0};var placementVOffset=0;var placementHOffset=0;if(placementTarget&&placementTarget.length>0){var pt_height=parseInt(placementTarget.outerHeight());var pt_h_center=placementTarget.outerWidth()/
2+placementTarget.offset().left;var target_h_center=targetSize.outerWidth/2+target.offset().left;var pt_v_center=placementTarget.outerHeight()/2+placementTarget.offset().top;var target_v_center=targetSize.outerHeight/2+target.offset().top;var vOffset_by_placement={before:target.offset().top-placementTarget.offset().top,after:target_v_center+targetSize.outerHeight/2-(pt_v_center+pt_height/2),prepend:target.offset().top-targetSize.outerHeight/2-placementTarget.offset().top,append:target_v_center+targetSize.outerHeight-
(pt_v_center+pt_height)};placementVOffset=vOffset_by_placement[placement];placementHOffset=target_h_center-pt_h_center}if(targetSize.outerHeight-targetSize.height||targetSize.outerWidth-targetSize.width)for(var side in boxAdjust)boxAdjust[side]=parseInt(target.css("padding-"+side))+parseInt(target.css("border-"+side+"-width"));var marginLeft={l:-boxAdjust.left-targetSize.width/2,c:(boxAdjust.right-boxAdjust.left)/2,r:boxAdjust.right+targetSize.width/2}[hAlign];var marginBottom={t:boxAdjust.top,m:boxAdjust.top-
targetSize.outerHeight/2,b:-boxAdjust.bottom-targetSize.height}[vAlign];if(placement==="before"||placement==="after"){var leftRightMarginDiff=parseInt(target.css("marginLeft"))-parseInt(target.css("marginRight"));siblingOffset.x=(boxAdjust.left-boxAdjust.right+leftRightMarginDiff)/2;if(placement==="before")siblingOffset.y=-boxAdjust.top;if(placement==="after")siblingOffset.y=targetSize.height+boxAdjust.bottom+parseInt(target.css("marginBottom"))}creative.css("margin","0 0 "+(marginBottom+siblingOffset.y-
placementVOffset-vOffset)+"px "+(marginLeft+siblingOffset.x+placementHOffset+hOffset)+"px")}}
function align_callout(callout,ca_id,anim,anim_h){anim=typeof anim!=="undefined"?anim:false;var button=bouncex.campaigns[ca_id].c_button,ca=bouncex.campaigns[ca_id];var bcx_offset=button.offset();var bcx_top=parseInt(bcx_offset.top);var bcx_left=parseInt(bcx_offset.left);var cheight=parseInt(callout.height());var cwidth=parseInt(callout.width());var awidth=parseInt(button.outerWidth(false));var aheight=parseInt(button.outerHeight(false));var callout_h=ca.callout_pos.substr(0,1);var callout_v=ca.callout_pos.substr(1,
2);var anchor_h=ca.callout_anchor_pos.substr(0,1);var anchor_v=ca.callout_anchor_pos.substr(1,2);if(callout_h=="l")bcx_left+=0;else if(callout_h=="c")bcx_left-=parseInt(cwidth/2);else if(callout_h=="r")bcx_left-=cwidth;if(anchor_h=="r")bcx_left+=awidth;else if(anchor_h=="c")bcx_left+=parseInt(awidth/2);else if(anchor_h=="l")bcx_left+=0;if(callout_v=="t")bcx_top+=0;else if(callout_v=="m")bcx_top-=parseInt(cheight/2);else if(callout_v=="b")bcx_top-=cheight;if(anchor_v=="b")bcx_top+=aheight;else if(anchor_v==
"m")bcx_top+=parseInt(aheight/2);else if(anchor_v=="t")bcx_top+=0;bcx_top+=parseInt(ca.callout_voffset);bcx_left+=parseInt(ca.callout_hoffset);if(anim=="down"&&typeof anim_h!=="undefined")callout.animate({"top":bcx_top+anim_h+"px"},400);else if(anim=="up")callout.animate({"top":bcx_top-anim_h},400);else callout.css({"top":bcx_top+"px","left":bcx_left+"px"})}
function align_callout_public(ca_id){bouncex.campaigns[ca_id].c_button=jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);var callout=jQuery("#campaign_"+ca_id+"_container_callout");align_callout(callout,ca_id)}function handleIosInputTouchStart(e){var ca_id=e.data.ca_id;addIosInputFix(ca_id)}
function addIosInputFix(ca_id){if(!bouncex.campaigns[ca_id].hasIosInputFix){var scrollToTopOrBottom=bouncex.campaigns[ca_id].type==="conversionbar"?document.body.scrollHeight:0;bouncex.head.append('<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1" id="bx-ios-meta-'+ca_id+'"/>');window.scrollTo(0,scrollToTopOrBottom);bouncex.campaigns[ca_id].hasIosInputFix=true}}function handleIosInputBlur(e){var ca_id=e.data.ca_id;removeIosInputFix(ca_id)}
function removeIosInputFix(ca_id){if(bouncex.campaigns[ca_id].hasIosInputFix){jQuery("#bx-ios-meta-"+ca_id).remove();bouncex.campaigns[ca_id].hasIosInputFix=false}}function showAlly(ca_id){if(bouncex.campaigns[ca_id].type=="overlay")showAllyOverlay(ca_id);bouncex.campaigns[ca_id].obj1.attr("aria-hidden",false)}
function showAllyOverlay(ca_id){bouncex.campaigns[ca_id].tabDecoys.bind("focus.bcx_campaign_ally_"+ca_id,{ca_id:ca_id},handleTabDecoyFocus);bouncex.body.bind("keydown.bcx_campaign_ally_"+ca_id,{ca_id:ca_id},handleAllyKeyDown);bouncex.campaigns[ca_id].focusedBeforeCampaign=jQuery(document.activeElement);if(bouncex.campaigns[ca_id].focusedBeforeCampaign.is("body"))bouncex.campaigns[ca_id].focusedBeforeCampaign=bouncex.campaigns[ca_id].focusedBeforeCampaign.find("a:visible:first");bouncex.campaigns[ca_id].siblings=
bouncex.campaigns[ca_id].obj2.siblings();bouncex.campaigns[ca_id].siblings.each(function(){var el=jQuery(this);var attrsToAdd={"aria-hidden":"true","aria-live":"off"};for(var attrName in attrsToAdd)if(attrsToAdd.hasOwnProperty(attrName)){var currentAttrVal=el.attr(attrName);if(currentAttrVal)el.attr("data-bx-"+attrName,currentAttrVal);el.attr(attrName,attrsToAdd[attrName])}});setFocusableElements(ca_id)}
function hideAlly(ca_id){bouncex.campaigns[ca_id].obj1.attr("aria-hidden",true);if(bouncex.campaigns[ca_id].type=="overlay")hideAllyOverlay(ca_id)}function hideAllyOverlay(ca_id){bouncex.campaigns[ca_id].tabDecoys.unbind("focus.bcx_campaign_ally_"+ca_id,handleTabDecoyFocus);bouncex.body.unbind("keydown.bcx_campaign_ally_"+ca_id,handleAllyKeyDown);if(bouncex.campaigns[ca_id].focusedBeforeCampaign)bouncex.campaigns[ca_id].focusedBeforeCampaign.focus()}
function hideAllyOverlayPostOutro(ca_id){bouncex.campaigns[ca_id].siblings.each(function(){var el=jQuery(this);var attrsToRemove=["aria-hidden","aria-live"];for(var i=0;i<attrsToRemove.length;i++){var attr=attrsToRemove[i];var oldAttrVal=el.attr("data-bx-"+attr);if(oldAttrVal)el.attr(attr,oldAttrVal);else el.removeAttr(attr);el.removeAttr("data-bx-"+attr)}})}
function setFocusableElements(ca_id){var ca=bouncex.campaigns[ca_id];ca.focusableEls=ca.obj1.find("form, :input, a").not(":hidden, .bx-ally-tab-decoy, .bx-carb-trap")}function focusOnFirstFocusableElement(ca_id,exclude_close_btn){var ca=bouncex.campaigns[ca_id];var focusable=exclude_close_btn?ca.focusableEls.not(".bx-close-outside, .bx-close-inside"):ca.focusableEls;if(focusable.eq(0))focusable.eq(0).focus()}
function focusOnLastFocusableElement(ca_id,exclude_close_btn){var ca=bouncex.campaigns[ca_id];var focusable=exclude_close_btn?ca.focusableEls.not(".bx-close-outside, .bx-close-inside"):ca.focusableEls;if(focusable.eq(focusable.length-1))focusable.eq(focusable.length-1).focus()}function handleAllyKeyDown(e){var ca_id=e.data.ca_id;if(e.keyCode===27)bouncex.close_ad(ca_id)}
function handleTabDecoyFocus(e){var ca_id=e.data.ca_id;var ca=bouncex.campaigns[ca_id];e.stopImmediatePropagation();e.preventDefault();if(this===ca.tabDecoys.get(0))focusOnLastFocusableElement(ca_id);else if(this===ca.tabDecoys.get(1))focusOnFirstFocusableElement(ca_id)}bouncex.caAutofill=function(ca_id,data){data=typeof data==="object"?data:{};for(var characteristic in data)if(data.hasOwnProperty(characteristic))bouncex.campaigns[ca_id].inputs.filter("[name="+characteristic+"]").val(data[characteristic]).trigger("click")};
bouncex.fb={login:function(callback){callback=typeof callback==="function"?callback:function(){};if(window.FB)FB.login(function(response){if(response.authResponse)FB.api("/me",{fields:"id,email,first_name,last_name,gender,name"},function(response){response.fname=response.first_name;response.lname=response.last_name;callback(response)});else callback()},{scope:"email, public_profile"});else callback()},nextStep:function(ca_id,jump,force){bouncex.fb.login(function(response){bouncex.caAutofill(ca_id,
response);bouncex.setJumpStep(ca_id,jump,force);bouncex.submitCampaignStep(ca_id);return false})},popCa:function(ca_id){bouncex.fb.login(function(response){var timeout=0;if(response&&response.email){bouncex.campaigns[ca_id].inputs.filter("[name=email]").val("Autofilling from Facebook...").trigger("click");timeout=1500}setTimeout2(function(){bouncex.caAutofill(ca_id,response)},timeout)})}};
function init_activation_funcs(){perf.times("init_activation_funcs");for(var ca_id in bouncex.campaigns){bouncex.campaigns[ca_id].activation_registry=[];bouncex.campaigns[ca_id].failed=false;bouncex.events[ca_id]=bouncex.events[ca_id]||{};if(can_show_ad(ca_id,true)&&!bouncex.campaigns[ca_id].ad_visible)(function(ca_id){var delay=0;if(bouncex.campaigns[ca_id].activation_delay)delay=calc_delay_cvt(bouncex.campaigns[ca_id].activation_delay);bouncex.events[ca_id]["timeout_activation"]=setTimeout2(function(){init_activation(ca_id)},
delay)})(ca_id)}}
function processGbiStack(stackId){var stack=bouncex.gbi.stacks[stackId];if(stack.finished){bouncex.gbi.log(false,"stack ["+stackId+"] already finished");return false}var stack=bouncex.gbi.stacks[stackId];stack.processCount=stack.processCount||0;stack.processCount++;bouncex.gbi.log(false,"processing stack ["+stackId+"] ("+stack.processCount+") ...");var stackCampaigns=stack.campaigns;stack.failedCount=0;for(var priority in stackCampaigns)if(stackCampaigns.hasOwnProperty(priority)){var ca_id=stackCampaigns[priority];
var ca=bouncex.campaigns[ca_id];if(ca.failed){stack.failedCount++;bouncex.gbi.log(ca_id,"has failed")}else if(ca.ttype=="control"&&ca_id==stack.leader_id)stack.failedCount++;else if(!ca.gbi.ready&&ca.gbi.config&&ca.gbi.config.stackWeight&&ca.gbi.config.stackWeight>stack.processCount){bouncex.gbi.log(ca_id,"campaign with weight of "+ca.gbi.config.stackWeight+" didn't have enough time");return false}else if(ca.gbi.ready){selectAdStackCampaign(ca_id);finishGbiStack(stackId,true);return true}else bouncex.gbi.log(ca_id,
"not ready ")}if(stack.failedCount===stackCampaigns.length){bouncex.gbi.log(false,"stack ["+stackId+"]: all campaigns have failed");finishGbiStack(stackId,false)}else return false;return false}
function finishGbiStack(stackId,success){bouncex.gbi.stacks[stackId].failed=false;clearInterval(bouncex.events[bouncex.gbi.stacks[stackId].leader_id]["gbiStack"]);delete bouncex.events[bouncex.gbi.stacks[stackId].leader_id]["gbiStack"];var hasControlLeader=bouncex.campaigns[bouncex.gbi.stacks[stackId].leader_id].ttype=="control";if(!success){bouncex.gbi.stacks[stackId].failed=true;if(hasControlLeader)selectAdStackCampaign(bouncex.gbi.stacks[stackId].leader_id)}bouncex.gbi.log(false,"done looking at stack ["+
stackId+"] "+(bouncex.gbi.stacks[stackId].failed?"failed":"success"))}function selectAdStackCampaign(ca_id){var stackId=bouncex.campaigns[ca_id].gbi.stack_id;bouncex.gbi.stacks[stackId].finished=true;bouncex.gbi.log(ca_id,"selected");campaignEligible(ca_id);initActivationInstruments(ca_id);bouncex.gbi.stacks[stackId].selectedCampaign=ca_id;clearGbiStackCampaigns(stackId,ca_id)}
function clearGbiStackCampaigns(stackId,winner_ca_id){bouncex.gbi.log(false,"clearing other campaigns...");var stackCampaigns=bouncex.gbi.stacks[stackId].campaigns;for(var priority in stackCampaigns)if(stackCampaigns.hasOwnProperty(priority)){var cca_id=stackCampaigns[priority];if(cca_id!=winner_ca_id){bouncex.gbi.cancelRequest(cca_id);bouncex.destroy_ad(cca_id,true)}}}
function initGbiStack(stackId,timeout){bouncex.gbi.log(false,"Starting stack ["+stackId+"]");var stack=bouncex.gbi.stacks[stackId];stack.started=true;if(!bouncex.events[stack.leader_id])bouncex.events[stack.leader_id]={};bouncex.events[stack.leader_id]["gbiStack"]=setTimeout2(function(){if(processGbiStack(stackId));else if(stack.processCount>9){bouncex.gbi.log(false,"stack ["+stackId+"]: ran out of tries");finishGbiStack(stackId,false)}else if(!stack.finished){bouncex.gbi.log(false,"stack ["+stackId+
"]: no winners yet. Trying again...");initGbiStack(stackId,1E3)}},timeout)}function cacheCreativeForm(ca_id,step){bouncex.campaigns[ca_id].jform=jQuery("#bx-form-"+ca_id+"-step-"+step)}
function init_activation(ca_id){var ca=bouncex.campaigns[ca_id];if(!ca)return false;if(ca.type==="annotation"||ca.type==="agilityzone")evalCalloutTarget(ca);if(isMissingTarget(ca)){ca.failed=true;return false}if(ca.failed||ca.placed)return false;if(ca.html)placeCampaign(ca_id);if(ca.gbi&&ca.gbi.stack_id){var stackId=ca.gbi.stack_id;if(!bouncex.gbi.stacks[stackId].started)initGbiStack(stackId)}if(ca.ng){ca.obj1=jQuery("#bx-campaign-"+ca_id);ca.obj2=jQuery(".bx-campaign-"+ca_id);cacheCreativeForm(ca_id,
1);if(bouncex.website.ally){if(bouncex.browser.msie&&ca.type=="overlay")ca.obj2.removeAttr("role");ca.tabDecoys=ca.obj1.find(".bx-ally-tab-decoy")}event_js_eval(ca_id,"preactivation");if(ca.styles)bouncex.addCss(ca.styles,ca.obj1[0],"bx-campaign-"+ca_id);if(!ca.control&&!ca.noCreative){ca.transitionEffect=getCampaignTransitionEffect(ca_id);if(ca.transitionEffect&&ca.transitionEffect!=="no_effect"){ca.obj2.addClass("bx-fx-"+ca.transitionEffect);fxHelperInit(ca_id)}}var images=ca.images||[];loadImages(images,
function(){if(bouncex.website.gbi_enabled&&ca.gbi&&ca.gbi.provider){bouncex.gbi.log(ca_id,"requesting v2 ad unit");bouncex.gbi.request(ca_id)}else activate_campaign(ca_id)})}else if(ca.html){if(bouncex.website.gbi_enabled&&ca.gbi&&ca.gbi.provider){bouncex.gbi.log(ca_id,"requesting v1 ad unit");bouncex.gbi.request(ca_id)}}else activate_campaign(ca_id)}
function fxHelperInit(ca_id){if(bouncex.fxHelper)return;bouncex.fxHelper={};bouncex.fxHelper.browserSupport=getSupport(ca_id);if(bouncex.fxHelper.browserSupport!=="none")bouncex.fxHelper.animationstart=makeEventString(bouncex.fxHelper.browserSupport,"start"),bouncex.fxHelper.animationend=makeEventString(bouncex.fxHelper.browserSupport,"end"),bouncex.fxHelper.animationiteration=makeEventString(bouncex.fxHelper.browserSupport,"iteration");function getSupport(ca_id){var support="none";var creative=bouncex.campaigns[ca_id].obj1.find(".bx-creative")[0];
creative.style.animationName="bx-feature-test";creative.style.webkitAnimationName="bx-feature-test";if(window.getComputedStyle)if(window.getComputedStyle(bouncex.campaigns[ca_id].obj1.find(".bx-creative")[0]).animationName)support="standard";else if(window.getComputedStyle(bouncex.campaigns[ca_id].obj1.find(".bx-creative")[0]).webkitAnimationName)support="webkit";creative.style.animationName="";creative.style.webkitAnimationName="";return support}function makeEventString(support,type){if(support===
"standard")return"animation"+type;else return"webkitAnimation"+type.charAt(0).toUpperCase()+type.slice(1)}}function loadImagesCount(count,callback){count--;if(count===0)callback();return count}
function loadImages(images,callback){var count=imagesLength=images.length;if(count)for(var k=0;k<imagesLength;k+=1)if(bouncex.browser.msie===8&&images[k].indexOf(".svg")!==-1)count=loadImagesCount(count,callback);else{if(typeof images[k]==="string"){var srcStr=images[k];if(srcStr.indexOf("http")!==0&&srcStr.indexOf("//")!==0)srcStr="//"+srcStr;var image=jQuery('<img src="'+srcStr+'"/>')}else var image=jQuery(images[k]);image.one("load",function(){count=loadImagesCount(count,callback)});if(image.length&&
image.get(0).complete)count=loadImagesCount(count,callback)}else callback()}function activate_campaign(ca_id){if(!bouncex.campaigns[ca_id]||bouncex.campaigns[ca_id].activated)return false;if(bouncex.campaigns[ca_id].gbi)if(!bouncex.website.gbi_enabled)bouncex.gbi.fail(ca_id,"incompatible extension");else if(!bouncex.campaigns[ca_id].gbi.provider)activateGbiCampaign(ca_id);else;else{campaignEligible(ca_id);activateInstruments(ca_id)}}
function activateInstruments(ca_id){if(bouncex.campaigns[ca_id].hasBehavioralCriteria){initBehavioralCriteriaInstruments(ca_id);if(onlyBehavioralCriteriaNegations(ca_id)){bouncex.campaigns[ca_id].realtimeArmed=true;initActivationInstruments(ca_id)}}else initActivationInstruments(ca_id)}function campaignEligible(ca_id){if(bouncex.campaigns[ca_id].activated)return false;bouncex.campaigns[ca_id].activated=true;report(ca_id,"eligible");event_js_eval(ca_id,"activation")}
function deactivateGbiCampaign(ca_id){if(bouncex.events[ca_id]["gbiRequest"])clearInterval(bouncex.events[ca_id]["gbiRequest"]);bouncex.gbi.log(ca_id,"deactivate gbi campaign");bouncex.campaigns[ca_id].failed=true;bouncex.campaigns[ca_id].gbi.ready=false}
function activateGbiCampaign(ca_id){if(bouncex.campaigns[ca_id].gbi.ready)return true;bouncex.gbi.log(ca_id,"activate gbi campaign");bouncex.campaigns[ca_id].gbi.ready=true;if(!bouncex.campaigns[ca_id].gbi.stack_id){bouncex.gbi.log(ca_id,"activating out of stack campaign");campaignEligible(ca_id);activateInstruments(ca_id)}else{var stackId=bouncex.campaigns[ca_id].gbi.stack_id;if(bouncex.gbi.stacks[stackId].leader_id==ca_id&&bouncex.campaigns[ca_id].ttype=="control");else{bouncex.gbi.log(ca_id,"a campaign in the stack is ready, processing stack...");
processGbiStack(stackId)}}}function initBehavioralCriteriaInstruments(ca_id){var campaign=bouncex.campaigns[ca_id];var behavioralCriteria=campaign.list_of_rt_activations||[];for(var i in behavioralCriteria)if(behavioralCriteria.hasOwnProperty(i)){var act=behavioralCriteria[i];bouncex.ca[act.activation](act.prop,act.val,ca_id,act.prop2,act.prop3,act.prop4,act.prop5,act.prop6)}}
function initActivationInstruments(ca_id){var campaign=bouncex.campaigns[ca_id];var activations=campaign.activations;for(var i in activations)if(activations.hasOwnProperty(i)){var act=activations[i];bouncex.ca[act.activation](act.prop,act.val,ca_id,act.prop2,act.prop3,act.prop4,act.prop5,act.prop6)}}function hasBehavioralCriteria(ca_id){return bouncex.campaigns[ca_id].list_of_rt_activations>0}
function onlyBehavioralCriteriaNegations(ca_id){var activations=bouncex.campaigns[ca_id].list_of_rt_activations;var criteria=bouncex.campaigns[ca_id].activations_rt;var hasNegations=activations.filter(function(instrument){return instrument.shouldBeAbsent}).length>0;if(hasNegations)if(criteria.length===1)return true;else return activations.filter(function(instrument){return!instrument.shouldBeAbsent}).length===0;return false}
function makeUniqueInstrumentId(type,params){if(!params)return type;var propKeys=["prop","val","prop2","prop3","prop4","prop5","prop6"];var id=type;var args=params.slice(0,2).concat(params.slice(3));return type+"_"+propKeys.map(function(key,i){return args[i]}).join("_")}
function getUniqueInstrumentId(activation){var ignoredKeys=["bounce","manual","control","inter","back","pers"];var propKeys=["activation","prop","val","prop2","prop3","prop4","prop5","prop6"];if(jQuery.inArray(activation.activation,ignoredKeys)!==-1)return activation.activation;else return propKeys.map(function(key){return activation[key]}).join("_")}
function addTriggerToRegistry(instrumentId,ca_id){var campaign=bouncex.campaigns[ca_id];if(jQuery.inArray(instrumentId,campaign.activation_registry)!==-1)return;campaign.activation_registry.push(instrumentId)}
function behavioralCriteriaComplete(ca_id){var campaign=bouncex.campaigns[ca_id];if(campaign.realtimeArmed)if(evaluateBehavioralCriteria(campaign.activation_registry,campaign.activations_rt,ca_id))return evaluateBehavioralTriggers(campaign.activation_registry,campaign.activations);else return false;else if(evaluateBehavioralCriteria(campaign.activation_registry,campaign.activations_rt,ca_id)){campaign.realtimeArmed=true;initActivationInstruments(ca_id);return false}else return false}
function evaluateBehavioralTriggers(triggers,criteria){for(var i=0;i<criteria.length;i++)if(jQuery.inArray(getUniqueInstrumentId(criteria[i]),triggers)!==-1)return true;return false}
function evaluateBehavioralCriteria(triggers,criteria,ca_id){var satisfied=false;var i=0;var j=0;while(i<criteria.length){var set=criteria[i];var orResults=[];while(j<set.length){var item=set[j];var index=jQuery.inArray(getUniqueInstrumentId(item),triggers);var found=index!==-1;setBehavioralCriteriaStatus(ca_id,item.activation,found);if(found)orResults.push(!item.shouldBeAbsent);else orResults.push(!!item.shouldBeAbsent);j++}satisfied=jQuery.inArray(true,orResults)!==-1;if(!satisfied)break;j=0;i++}return satisfied}
function setBehavioralCriteriaStatus(ca_id,activation,isFound){if(!isFound)return;var behavioralCriteria=bouncex.campaigns[ca_id].list_of_rt_activations;behavioralCriteria.forEach(function(criteria){if(criteria.activation!==activation)return;criteria.status=criteria.shouldBeAbsent?false:true})}
function activation_funcs(){var ca=[];ca["manual"]=function(p,v,ca_id){};ca["control"]=function(p,v,ca_id){trigger_ad("control",ca_id)};ca["inter"]=function(p,v,ca_id){if(bouncex.cookie.vpv>=p)trigger_ad("inter",ca_id)};ca["bounce"]=function(p,v,ca_id){bxBind("html,body","mouseout.bouncex_show_"+ca_id,function(obj){process_mouse_out(obj,ca_id)},ca_id);if(bouncex.browser.msie||bouncex.browser.safari&&bouncex.browser.safari<=50)bxBind("html,body","mousemove.bouncex_show_"+ca_id,function(obj){process_mouse_move(obj,
ca_id)},ca_id)};ca["iosbounce"]=function(prop,val,ca_id){if(!bouncex.browser.ios)return false;var args=Array.prototype.slice.call(arguments);var closeOnReverse=val==="yes";var browserData={previousHeight:wndsize().height,thresholdHeight:wndsize().height,previousOrientation:wndorientation(),previousPosition:bouncex.window.scrollTop(),isScrollingUp:false,touchLock:false,touchEnded:true};bxPassiveBind(window,"touchstart.bouncex_iosbounce_"+ca_id,function(evt){browserData.touchLock=true;browserData.touchEnded=
false;browserData.previousPosition=evt.pageY;browserData.thresholdHeight=wndsize().height},ca_id);bxPassiveBind(window,"touchend.bouncex_iosbounce_"+ca_id,function(evt){browserData.isScrollingUp=browserData.previousPosition<evt.pageY;browserData.touchEnded=true;clearTimeout(bouncex.events[ca_id]["touch_timeout_"+ca_id]);bouncex.events[ca_id]["touch_timeout_"+ca_id]=setIosBounceTouchTimeout(browserData)},ca_id);bxPassiveBind(window,"resize.bouncex_iosbounce_"+ca_id,function(){if(browserData.touchLock){clearTimeout(bouncex.events[ca_id]["touch_timeout_"+
ca_id]);bouncex.events[ca_id]["touch_timeout_"+ca_id]=setIosBounceTouchTimeout(browserData)}else{clearTimeout(bouncex.events[ca_id]["orientation_timeout_"+ca_id]);bouncex.events[ca_id]["orientation_timeout_"+ca_id]=setIosBounceTimeout(ca_id,browserData,closeOnReverse,args)}},ca_id)};ca["timer"]=function(p,v,ca_id){bouncex.events[ca_id]["timeout_timer"]=setTimeout2(function(){trigger_ad("timer",ca_id,[p,v])},parseInt(v)*1E3)};ca["back"]=function(p,v,ca_id){if(window.angular)return;var eligible=false;
if(p=="landing_page"){if(bouncex.state.iol)eligible=true}else eligible=true;if(eligible)if(history.pushState){if(!(history.state&&history.state.bx_rewind))if(bouncex.browser.chrome&&(bouncex.browser.iphone||bouncex.browser.ipad)){var events="touchend.bcx_rewind_fix_"+ca_id;bxBind(bouncex.body,events,function(){bouncex.body.unbind(events);history.pushState({bx_rewind:"bx_rewind1"},"","")},ca_id)}else history.pushState({bx_rewind:"bx_rewind1"},"",decodeURIComponent(bouncex.calling_url));bouncex.original_hash=
window.location.hash;bxBind(bouncex.window,"popstate.bcx_popstate_"+ca_id,function(event,v,k){if(!history.state&&(p!="landing_page"||!(bouncex.browser.safari&&history.state&&history.state.bx_rewind))&&(bouncex.original_hash===window.location.hash&&!(history.state&&history.state.bx_rewind))&&event.type=="popstate")if(can_show_ad(ca_id)){trigger_ad("back",ca_id);clearTimeout(bouncex.rewind_control_timeout);if(bouncex.campaigns[ca_id].control&&!bouncex.rewind_variation_timeout)bouncex.rewind_control_timeout=
setTimeout2(function(){history.back()},300);else bouncex.rewind_variation_timeout=setTimeout2(function(){delete bouncex.rewind_variation_timeout},300)}else{bouncex.window.unbind("popstate.bcx_popstate_"+ca_id);history.back()}},ca_id)}};ca["pers"]=function(p,v,ca_id){var eligible=false;bouncex.campaigns[ca_id].is_pers=true;if(p=="landing_page"&&bouncex.state.iol)eligible=true;else if(p!="landing_page")eligible=true;if(eligible)trigger_ad("pers",ca_id)};ca["worm"]=function(p,v,ca_id){noteCookieAdShown(ca_id);
report(ca_id,"pop",{"pop:activation":"worm"});teleport("_self",v)};ca["inactivity"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);var inactivity_events="mousemove.bouncex_inactivity_"+ca_id+" keydown.bouncex_inactivity_"+ca_id+" DOMMouseScroll.bouncex_inactivity_"+ca_id+" mousewheel.bouncex_inactivity_"+ca_id+" mousedown.bouncex_inactivity_"+ca_id+" touchstart.bouncex_inactivity_"+ca_id+" touchmove.bouncex_inactivity_"+ca_id+" focus.bouncex_inactivity_"+ca_id;bxPassiveBind(window,
inactivity_events,function(){clearTimeout(bouncex.events[ca_id]["inactivity"]);bouncex.events[ca_id]["inactivity"]=setInactivityTimeout(ca_id,v,inactivity_events,args)},ca_id);bouncex.events[ca_id]["inactivity"]=setInactivityTimeout(ca_id,v,inactivity_events,args)};ca["reactivity"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);var activity_events="mousemove.bouncex_activity_"+ca_id+" keydown.bouncex_activity_"+ca_id+" DOMMouseScroll.bouncex_activity_"+ca_id+" mousewheel.bouncex_activity_"+
ca_id+" mousedown.bouncex_activity_"+ca_id+" touchstart.bouncex_activity_"+ca_id+" touchmove.bouncex_activity_"+ca_id+" focus.bouncex_activity_"+ca_id;bxPassiveBind(window,activity_events,function(){clearTimeout(bouncex.events[ca_id]["reactivity"]);bouncex.events[ca_id]["reactivity"]=setReactivityTimeout(ca_id,v,activity_events,args)},ca_id);bouncex.events[ca_id]["reactivity"]=setReactivityTimeout(ca_id,v,activity_events,args)};ca["scroll"]=function(detectScrollingUp,v,ca_id,speedThreshold,closeOnReverse){var args=
Array.prototype.slice.call(arguments);var docHeight=jQuery(document).height();var oldViewportHeight=bouncex.wndsize().height;var bounceBackBuffer=5;var lastPos;var lastScrolled;var targetPercentage=parseInt(v);var checkSpeedAndDirection;detectScrollingUp=detectScrollingUp===1;speedThreshold=speedThreshold?parseInt(speedThreshold):false;checkSpeedAndDirection=detectScrollingUp||speedThreshold;closeOnReverse=!!closeOnReverse;bxBind(window,"scroll.bouncex_"+ca_id,function(event){var now=(new Date).getTime();
var scroll=window.pageYOffset||document.body.scrollTop;var windowSize=bouncex.wndsize();var screenSizeChanged=windowSize.height!==oldViewportHeight;var isOverScroll=windowSize.height+scroll+bounceBackBuffer>=docHeight||scroll-bounceBackBuffer<=0;var isVisible=bouncex.campaigns[ca_id].ad_visible;var pos;var directionCriteriaMet=checkSpeedAndDirection?false:true;var percentageScrolledCriteriaMet=false;var velocityCriteriaMet=checkSpeedAndDirection?false:true;pos=detectScrollingUp?(docHeight-windowSize.height-
scroll)/(docHeight-windowSize.height)*100:(scroll+windowSize.height)/docHeight*100;percentageScrolledCriteriaMet=detectScrollingUp?pos>=targetPercentage:parseInt(pos)+targetPercentage>100&&pos>lastPos;if(checkSpeedAndDirection&&(lastScrolled===undefined||pos===undefined)){lastScrolled=now;lastPos=pos;return}if(checkSpeedAndDirection){var changeInY;var velocity;var isMovingDown;changeInY=detectScrollingUp?(docHeight-windowSize.height)*(lastPos-pos)/100:docHeight*(pos-lastPos)/100;velocity=Math.abs(changeInY/
(now-lastScrolled))*100;isMovingDown=changeInY>0;directionCriteriaMet=detectScrollingUp&&!isMovingDown||!detectScrollingUp&&isMovingDown;velocityCriteriaMet=speedThreshold?velocity>=speedThreshold:true}lastScrolled=now;lastPos=pos;oldViewportHeight=windowSize.height;if(closeOnReverse&&!screenSizeChanged&&!isOverScroll&&(isVisible&&!directionCriteriaMet||isVisible&&!percentageScrolledCriteriaMet)){close_ad(ca_id,true);if(!can_show_ad(ca_id,true))jQuery(window).unbind("scroll.bouncex_"+ca_id)}if(velocityCriteriaMet&&
percentageScrolledCriteriaMet&&directionCriteriaMet&&!screenSizeChanged&&!isOverScroll){trigger_ad("scroll",ca_id,args);if(!can_show_ad(ca_id,true)&&!closeOnReverse)jQuery(window).unbind("scroll.bouncex_"+ca_id)}},ca_id)};ca["mclick"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);if(p=="left"&&bouncex.campaigns[ca_id].overlay=="teleport"&&bouncex.campaigns[ca_id].overlay_teleport_type!=="_self"){var handle=function(){trigger_ad("mclick",ca_id,args)};addEvent(window.document,"click",
handle)}else{var handle=function(event){var keyCode=event.keyCode||event.which||event.button;if(event.button&&event.button==2)keyCode=3;if(p=="left"&&keyCode==1||p=="any")trigger_ad("mclick",ca_id,args);if(p=="right"&&keyCode==3||p=="any")trigger_ad("mclick",ca_id,args);if(!can_show_ad(ca_id,true))removeEvent(window.document,"mousedown",handle)};addEvent(window.document,"mousedown",handle)}};ca["hover"]=function(delay,selector,ca_id,showOnUnhover){var args=Array.prototype.slice.call(arguments);delay=
delay?Math.round(delay*1E3):500;showOnUnhover=showOnUnhover===1?true:false;var normalizedIdentifier=selector.replace(/\W/g,"");var $target=jQuery(selector);var show=showHover.bind(null,ca_id,normalizedIdentifier,args);var handle=handleHover.bind(null,ca_id,normalizedIdentifier,delay,selector,showOnUnhover,show);var unhandle=unhandleHover.bind(null,ca_id,normalizedIdentifier);bxBind(selector,"mouseenter.bx"+ca_id+normalizedIdentifier,handle,ca_id);bxBind(selector,"mouseleave.bx"+ca_id+normalizedIdentifier,
unhandle,ca_id);bouncex.events[ca_id]["listener_hover"+normalizedIdentifier]=function(){$target.unbind("mouseenter.bx"+ca_id+normalizedIdentifier,handle);$target.unbind("mouseleave.bx"+ca_id+normalizedIdentifier,unhandle);$target.unbind("mouseleave.bx"+ca_id+normalizedIdentifier,show)}};ca["clickon"]=function(p,selector,ca_id){var args=Array.prototype.slice.call(arguments);var normalizedIdentifier=selector.replace(/\W/g,"");var handle=function(){if(jQuery(selector).length){trigger_ad("clickon",ca_id,
args);if(!can_show_ad(ca_id,true))bouncex.events[ca_id]["listener_clickon"+normalizedIdentifier]()}};if(typeof bouncex.body.on!="undefined"){bouncex.body.on("click.bx"+ca_id+normalizedIdentifier,selector,handle);bouncex.events[ca_id]["listener_clickon"+normalizedIdentifier]=function(){bouncex.body.off("click.bx"+ca_id+normalizedIdentifier,selector,handle)}}else{bouncex.body.delegate(selector,"click.bx"+ca_id+normalizedIdentifier,handle);bouncex.events[ca_id]["listener_clickon"+normalizedIdentifier]=
function(){bouncex.body.undelegate(selector,"click.bx"+ca_id+normalizedIdentifier,handle)}}};ca["change"]=function(p,selector,ca_id){var args=Array.prototype.slice.call(arguments);var normalizedIdentifier=selector.replace(/\W/g,"");var handle=function(){if(jQuery(selector).length){trigger_ad("change",ca_id,args);if(!can_show_ad(ca_id,true))bouncex.events[ca_id]["listener_change"+normalizedIdentifier]()}};if(typeof bouncex.body.on!="undefined"){bouncex.body.on("change.bx"+ca_id+normalizedIdentifier,
selector,handle);bouncex.events[ca_id]["listener_change"+normalizedIdentifier]=function(){bouncex.body.off("change.bx"+ca_id+normalizedIdentifier,selector,handle)}}else{bouncex.body.delegate(selector,"change.bx"+ca_id+normalizedIdentifier,handle);bouncex.events[ca_id]["listener_change"+normalizedIdentifier]=function(){bouncex.body.undelegate(selector,"change.bx"+ca_id+normalizedIdentifier,handle)}}};ca["waypoint"]=function(offsetAmount,selector,campaign_id,unit,detectScrollingUp,bottomOfWindow,topOfTarget,
closeOnReverse){var args=Array.prototype.slice.call(arguments);detectScrollingUp=!!detectScrollingUp;bottomOfWindow=!!bottomOfWindow;topOfTarget=!!topOfTarget;closeOnReverse=!!closeOnReverse;offsetUnitIsPercent=!!unit;offsetAmount=parseInt(offsetAmount)||0;var $element=jQuery(selector).eq(0);if($element.length){var eventName="scroll.bx.waypoint."+campaign_id+" resize.bx.waypoint."+campaign_id;var $root=bouncex.window;var scrollTimeout=null;var lastScrollPosition=getCurrentScrollPosition($root,bottomOfWindow);
var crossedWaypointUp=crossedWaypointDown=hasCrossedWaypoint=hasReversedWaypoint=isScrollingDown=isScrollingUp=false;var currentScrollPosition,elementHeight,offset,threshold;var detectCrossing=function(){elementHeight=$element.height();offset=offsetUnitIsPercent?elementHeight*offsetAmount/100:offsetAmount;threshold=$element.offset().top+offset+(topOfTarget?0:elementHeight);currentScrollPosition=getCurrentScrollPosition($root,bottomOfWindow);isScrollingUp=currentScrollPosition<lastScrollPosition;isScrollingDown=
currentScrollPosition>lastScrollPosition;crossedWaypointUp=isScrollingUp&&threshold<=lastScrollPosition&&threshold>currentScrollPosition;crossedWaypointDown=isScrollingDown&&threshold>=lastScrollPosition&&threshold<currentScrollPosition;hasCrossedWaypoint=crossedWaypointUp&&detectScrollingUp||crossedWaypointDown&&!detectScrollingUp;hasReversedWaypoint=crossedWaypointUp&&!detectScrollingUp||crossedWaypointDown&&detectScrollingUp;if(hasCrossedWaypoint){trigger_ad("waypoint",campaign_id,args);if(!closeOnReverse&&
!can_show_ad(campaign_id,true))$root.unbind(eventName)}if(hasReversedWaypoint&&closeOnReverse){close_ad(campaign_id,true);if(!can_show_ad(campaign_id,true))$root.unbind(eventName)}lastScrollPosition=getCurrentScrollPosition($root,bottomOfWindow)};bxBind(window,eventName,function(){clearTimeout(bouncex.events[campaign_id]["waypoint_debounce_timeout"]);bouncex.events[campaign_id]["waypoint_debounce_timeout"]=setTimeout2(detectCrossing,30)},campaign_id)}};ca["highlight_text"]=function(minTextLength,
selector,campaign_id,bufferLength){var args=Array.prototype.slice.call(arguments);minTextLength=parseInt(minTextLength)||5;bufferLength=parseInt(bufferLength)||5;var $element=jQuery(selector).eq(0);if($element.length){var targetText=jQuery.trim($element.text().toLowerCase());var eventName="mouseup.bouncex_highlight_text_"+campaign_id;bxBind(bouncex.body,eventName,function(){var selectedText="";if(window.getSelection)selectedText=window.getSelection().toString().toLowerCase();else if(document.selection&&
document.selection.type!="Control")selectedText=document.selection.createRange().text.toLowerCase();var selectedPreBuffer=selectedText.substring(selectedText.length-minTextLength,selectedText.length);var selectedPostBuffer=selectedText.substring(0,minTextLength);if(selectedText.length>=minTextLength&&(selectedText.indexOf(targetText)>-1||targetText.indexOf(selectedText)>-1||selectedPreBuffer.length>=minTextLength&&targetText.indexOf(selectedPreBuffer)>-1||selectedPostBuffer.length>=minTextLength&&
targetText.indexOf(selectedPostBuffer)>-1)&&selectedText.length<=targetText.length+bufferLength){trigger_ad("highlight_text",campaign_id,args);if(!can_show_ad(campaign_id,true))bouncex.body.unbind(eventName)}},campaign_id)}};ca["tab_unfocus"]=function(delay,v,ca_id,triggerClick,triggerClose){var d=parseInt(delay);var args=Array.prototype.slice.call(arguments);function show_tab(){bouncex.events[ca_id]["tabunfocus_delay"]=bouncex.events[ca_id]["tabunfocus_delay"]||setTimeout2(function(){trigger_ad("tab_unfocus",
ca_id,args);bxBind(window,"focus.bouncex_tabunfocus_"+ca_id,function(){bouncex.window.unbind("focus.bouncex_tabunfocus_"+ca_id);if(triggerClick==="yes")report(ca_id,"click");if(triggerClose==="yes"){clearTimeout(bouncex.events[ca_id]["tabunfocus_delay"]);delete bouncex.events[ca_id]["tabunfocus_delay"];close_ad(ca_id)}},ca_id);if(!can_show_ad(ca_id,true))bouncex.window.unbind("blur.bouncex_tabunfocus_"+ca_id)},d*1E3)}bxBind(window,"blur.bouncex_tabunfocus_"+ca_id,show_tab,ca_id)};ca["finished_typing"]=
function(p,selector,ca_id){var args=Array.prototype.slice.call(arguments);var $target=jQuery(selector).eq(0);if($target.length){var normalizedIdentifier=selector.replace(/\W/g,"");bxBind(selector,"keyup.bx"+ca_id+normalizedIdentifier+", blur.bx"+ca_id+normalizedIdentifier,function(event){var inputVal=jQuery(this).val();handleFinishedTyping(event,ca_id,normalizedIdentifier,$target,args,inputVal)},ca_id)}};ca["active_time"]=function(p,v,ca_id){var args=Array.prototype.slice.call(arguments);bouncex.campaigns[ca_id].activityArgs=
args;bouncex.campaigns[ca_id].activityTime=v;initializeOrUpdateActivityRegister(ca_id,v);startActivityListenersAndInterval()};return ca}function handleHover(ca_id,normalizedIdentifier,delay,selector,showOnUnhover,showFn){bouncex.events[ca_id]["timeout_"+normalizedIdentifier]=setTimeout2(function(){if(showOnUnhover)bxBind(selector,"mouseleave.bx"+ca_id+normalizedIdentifier,showFn,ca_id);else showFn()},delay)}
function unhandleHover(ca_id,normalizedIdentifier){clearTimeout(bouncex.events[ca_id]["timeout_"+normalizedIdentifier]);delete bouncex.events[ca_id]["timeout_"+normalizedIdentifier]}function showHover(ca_id,normalizedIdentifier,args){trigger_ad("hover",ca_id,args);if(!can_show_ad(ca_id,true))bouncex.events[ca_id]["listener_hover"+normalizedIdentifier]()}function getCurrentScrollPosition($root,bottomOfWindow){return $root.scrollTop()+(bottomOfWindow?$root.height():0)}
function setInactivityTimeout(ca_id,v,inactivity_events,args){return setTimeout2(function(){trigger_ad("inactivity",ca_id,args);bxPassiveUnbind(window,inactivity_events)},v*1E3)}
function setReactivityTimeout(ca_id,v,activity_events,args){return setTimeout2(function(){bxPassiveUnbind(window,activity_events);var reactivity_events="mousemove.bouncex_reactivity_"+ca_id+" keydown.bouncex_reactivity_"+ca_id+" DOMMouseScroll.bouncex_reactivity_"+ca_id+" mousewheel.bouncex_reactivity_"+ca_id+" mousedown.bouncex_reactivity_"+ca_id+" touchstart.bouncex_reactivity_"+ca_id+" touchmove.bouncex_reactivity_"+ca_id+" focus.bouncex_reactivity_"+ca_id;bxPassiveBind(window,reactivity_events,
function passiveEventsHandler(){bxPassiveUnbind(window,reactivity_events);trigger_ad("reactivity",ca_id,args);if(can_show_ad(ca_id,true))bxPassiveBind(window,activity_events,function(){clearTimeout(bouncex.events[ca_id]["reactivity"]);bouncex.events[ca_id]["reactivity"]=setReactivityTimeout(ca_id,v,activity_events)},ca_id)},ca_id)},v*1E3)}
function handleFinishedTyping(event,ca_id,normalizedIdentifier,$target,args,inputVal){clearTimeout(bouncex.events[ca_id]["typing_timeout_"+normalizedIdentifier]);if(inputVal!=="")if(event.keyCode!==9&&event.keyCode!==13)bouncex.events[ca_id]["typing_timeout_"+normalizedIdentifier]=setTimeout2(function(){trigger_ad("finished_typing",ca_id,args);if(!can_show_ad(ca_id,true))$target.unbind("keyup.bx"+ca_id+normalizedIdentifier+", blur.bx"+ca_id+normalizedIdentifier)},event.type==="blur"?0:1500)}
function initializeOrUpdateActivityRegister(ca_id,v){bouncex.activityCampaigns=bouncex.activityCampaigns||{};bouncex.activityCampaigns[v]=bouncex.activityCampaigns[v]||{};bouncex.activityCampaigns[v][ca_id]={}}
function startActivityListenersAndInterval(){bouncex.activeTime=bouncex.activeTime||0;bouncex.activeTimeEvents=bouncex.activeTimeEvents||"mousemove.bouncex_active_time_action keydown.bouncex_active_time_action DOMMouseScroll.bouncex_active_time_action mousewheel.bouncex_active_time_action mousedown.bouncex_active_time_action touchstart.bouncex_active_time_action touchmove.bouncex_active_time_action focus.bouncex_active_time_action";evaluateAndTriggerActivityCampaigns();if(!bouncex.activityTimerInitalized){bouncex.activityTimerInitalized=
true;bxPassiveBind(window,bouncex.activeTimeEvents,function(){visitorIsActive()})}}function visitorIsActive(){clearTimeout(bouncex.events["active_time"]);bouncex.events["active_time"]=setActivityTimeout();if(!bouncex.activityTimer)bouncex.activityTimer=setInterval2(function(){bouncex.activeTime++;evaluateAndTriggerActivityCampaigns()},1E3)}
function evaluateAndTriggerActivityCampaigns(){if(bouncex.activityCampaigns[bouncex.activeTime]){var currentTimeCampaigns=bouncex.activityCampaigns[bouncex.activeTime];for(var ca_id in currentTimeCampaigns)if(currentTimeCampaigns.hasOwnProperty(ca_id)){trigger_ad("active_time",ca_id,bouncex.campaigns[ca_id].activityArgs);if(!can_show_ad(ca_id,true))deleteActivityCampaignAndCleanup(ca_id)}}}function setActivityTimeout(){return setTimeout2(stopActiveTimeTimer,5E3)}
function stopActiveTimeTimer(){clearInterval(bouncex.activityTimer);bouncex.activityTimer=false}
function deleteActivityCampaignAndCleanup(ca_id){var v=bouncex.campaigns[ca_id].activityTime;if(bouncex.activityCampaigns&&bouncex.activityCampaigns[v]){if(bouncex.activityCampaigns[v][ca_id])delete bouncex.activityCampaigns[v][ca_id];if(jQuery.isEmptyObject(bouncex.activityCampaigns[v]))delete bouncex.activityCampaigns[v]}if(!bouncex.activityCampaigns||jQuery.isEmptyObject(bouncex.activityCampaigns)){stopActiveTimeTimer();bouncex.activityTimerInitalized=false;clearTimeout(bouncex.events["active_time"]);
delete bouncex.activityTimer;delete bouncex.activeTime;delete bouncex.events["active_time"];delete bouncex.activityCampaigns;bxPassiveUnbind(window,bouncex.activeTimeEvents)}}
function process_mouse_move(obj,ca_id){var alt_y=obj.layerY?obj.layerY:obj.pageY;if(alt_y-(document.body.scrollTop||document.documentElement.scrollTop)<=18)bouncex.direction="up";else bouncex.direction=false;if(bouncex.campaigns[ca_id].iao>0||bouncex.campaigns[ca_id].rao>0){var alt_x=obj.layerX?obj.layerX:obj.pageX;bouncex.lastX=alt_x>0?alt_x:1}}
function process_mouse_out(obj,ca_id){var e=obj?obj:window.event,from=e.toElement,related=e.relatedTarget,target=this,width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(!related||related!==target&&!bouncex.contains(target,related))if(!from||from.nodeName=="HTML")if(bouncex.browser.msie&&bouncex.direction=="up"){if(bouncex.campaigns[ca_id].iao>0){var alt_x=bouncex.lastX;if(alt_x<bouncex.campaigns[ca_id].iao)return false}if(bouncex.campaigns[ca_id].rao>0){var alt_x=
bouncex.lastX;if(width-alt_x<bouncex.campaigns[ca_id].rao)return false}trigger_ad("bounce",ca_id);if(!can_show_ad(ca_id,true))jQuery("html,body").unbind("mouseout.bouncex_show_"+ca_id)}else if(!bouncex.browser.msie)if(obj.clientY<5&&obj.clientY>-50||bouncex.browser.safari&&(obj.clientY==-32768||obj.clientY==671)&&bouncex.direction=="up"){if(bouncex.campaigns[ca_id].iao>0){var alt_x=obj.layerX?obj.layerX:obj.pageX;if(alt_x<bouncex.campaigns[ca_id].iao)return false}if(bouncex.campaigns[ca_id].rao>0){var alt_x=
obj.layerX?obj.layerX:obj.pageX;if(width-alt_x<bouncex.campaigns[ca_id].rao)return false}if(bouncex.browser.chrome>40){if(!bouncex.events[ca_id]["bouncex_timeout"])bouncex.events[ca_id]["bouncex_timeout"]=setTimeout2(function(){trigger_ad("bounce",ca_id);bouncex.events[ca_id]["bouncex_timeout"]=false;jQuery(document).unbind("mouseenter.bx_bouncex_mousenter_"+ca_id);if(!can_show_ad(ca_id,true))jQuery("html,body").unbind("mouseout.bouncex_show_"+ca_id)},0);bxBind(document,"mouseenter.bx_bouncex_mousenter_"+
ca_id,function(){jQuery(document).unbind("mouseenter.bx_bouncex_mousenter_"+ca_id);clearTimeout(bouncex.events[ca_id]["bouncex_timeout"]);bouncex.events[ca_id]["bouncex_timeout"]=false},ca_id)}else{trigger_ad("bounce",ca_id);if(!can_show_ad(ca_id,true))jQuery("html,body").unbind("mouseout.bouncex_show_"+ca_id)}}}function teleport(type,url){if(type=="_blank")return window.open(url,type);return setTimeout2(function(){window.open(url,type)},300)}
function setIosBounceTouchTimeout(browserData){return setTimeout2(function(){if(browserData.touchEnded){if(wndsize().height>browserData.thresholdHeight)browserData.threshold=wndsize().height-browserData.thresholdHeight;browserData.touchLock=false;browserData.previousHeight=wndsize().height}},900)}
function setIosBounceTimeout(ca_id,browserData,closeOnReverse,args){return setTimeout2(function(){var currentHeight=wndsize().height;if(browserData.touchLock){browserData.previousHeight=currentHeight;return}if(browserData.previousOrientation!==wndorientation()){browserData.previousOrientation=wndorientation();browserData.previousHeight=currentHeight;return}if(browserData.isScrollingUp){browserData.isScrollingUp=false;return}if(currentHeight<browserData.previousHeight&&browserData.previousHeight-currentHeight==
browserData.threshold){trigger_ad("iosbounce",ca_id,args);if(!closeOnReverse&&!can_show_ad(ca_id,true)){bxPassiveUnbind(window,"resize.bouncex_iosbounce_"+ca_id);bxPassiveUnbind(window,"touchstart.bouncex_iobounce_"+ca_id);bxPassiveUnbind(window,"touchend.bouncex_iosbounce_"+ca_id)}}else if(closeOnReverse&&bouncex.campaigns[ca_id].ad_visible){close_ad(ca_id,true);if(!can_show_ad(ca_id,true)){bxPassiveUnbind(window,"resize.bouncex_iosbounce_"+ca_id);bxPassiveUnbind(window,"touchstart.bouncex_iobounce_"+
ca_id);bxPassiveUnbind(window,"touchend.bouncex_iosbounce_"+ca_id)}}browserData.previousHeight=currentHeight},100)}var flash_objects={};function setTimeout2(func,delay){if(bouncex.website.fbe&&delay<1){tryCatch(func)();return false}else return setTimeout(tryCatch(func),delay)}
function evalCalloutTarget(campaign){if(campaign.callout_t.length>0&&campaign.callout_t[0]==="{"){var siteElement=campaign.callout_t.substr(1,campaign.callout_t.length-2);campaign.callout_t=bouncex.website.els[siteElement]}}function setInterval2(func,delay){return setInterval(tryCatch(func),delay)}
function isMissingTarget(campaign){if(campaign.type!=="annotation"&&campaign.type!=="agilityzone")return false;if(campaign.callout_t&&campaign.callout_t.length>0&&jQuery(campaign.callout_t).length>0)return false;return true}
function loadBounceCss(callback){perf.times("loadBounceCss");callback=typeof callback==="function"?callback:function(){};if(!bouncex.css_added){if(bouncex.website.fbe&&bouncex.v2css){bouncex.addCss(bouncex.v2css,bouncex.head[0]);callback()}else{var link=document.createElement("link");link.href=(bouncex.website.force_https?"https:":"")+bouncex.website.BCU;link.id="bcx_stylesheet";link.rel="stylesheet";link.media="all";link.type="text/css";link.onload=function(){callback()};bouncex.head[0].appendChild(link)}bouncex.css_added=
true}else callback()}function bxBind(obj,type,fn,ca_id){var obj=jQuery(obj);if(ca_id)bouncex.events[ca_id][type]=obj;obj.bind(type,tryCatch(fn,{source:"bxBind",ca_id:ca_id}))}
function bxPassiveBind(obj,type,fn,ca_id){var types=type.split(" ");bouncex.passiveEventRegistry[type]=fn;if(ca_id)bouncex.events[ca_id][type]=function(){bxPassiveUnbind(obj,type)};for(var i=0,l=types.length;i<l;i++){var typeWithoutNamespace=types[i].split(".")[0];addEvent(obj,typeWithoutNamespace,tryCatch(fn,{source:"bxPassiveBind",ca_id:ca_id}),true)}}
function bxPassiveUnbind(obj,type){var fn=bouncex.passiveEventRegistry[type];var types=type.split(" ");for(var i=0,l=types.length;i<l;i++){var typeWithoutNamespace=types[i].split(".")[0];removeEvent(obj,typeWithoutNamespace,fn,true)}}
function addEvent(obj,type,fn,isPassive){var eventOptions=isPassive?{passive:true,capture:false}:false;if(obj.addEventListener)obj.addEventListener(type,tryCatch(fn),eventOptions);else if(obj.attachEvent)obj.attachEvent("on"+type,tryCatch(function(){fn.apply(obj,new Array(window.event))}))}
function removeEvent(obj,type,fn,isPassive){var eventOptions=isPassive?{passive:true,capture:false}:false;if(obj.removeEventListener)obj.removeEventListener(type,fn,eventOptions);else if(obj.attachEvent)obj.detachEvent("on"+type,function(){return fn.apply(obj,new Array(window.event))})}function hide_flash(){flash_objects=jQuery("object,embed");flash_objects.css("visibility","hidden")}
function calc_delay_cvt(delay_time){var delay=(bouncex.cookie.cvt-getTime2()+delay_time)*1E3;return delay<0?0:delay}function fs(){if(!bouncex.browser.msie)return true;if(typeof bouncex.fixed_supported=="undefined")try{bouncex.fixed_supported=isFixedSupported()}catch(e){bouncex.fixed_supported=true}return bouncex.fixed_supported}
function isFixedSupported(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x";t.style.cssText="position:fixed;top:100px;";e.appendChild(t);var n=e.style.height,r=e.scrollTop;e.style.height="3000px";e.scrollTop=500;var i=t.getBoundingClientRect().top;e.style.height=n;var s=i===100;e.removeChild(t);e.scrollTop=r;return s}return null}
function getTime2(){var timeDiff=bouncex.server_client_time_diff?bouncex.server_client_time_diff:0;return parseInt((new Date).getTime()/1E3)+timeDiff}function getTimeMs(){return(new Date).getTime()}function zoomDisable(w){}function zoomEnable(){}function get_top(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}
function getStyle(e,t){if(e.currentStyle)var n=e.currentStyle[t];else if(window.getComputedStyle)var n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);return n}function slide(what,duration,ca_id){var mid=document.getElementById("campaign_"+ca_id+"_middle");if(mid){mid.style.display="none";bSlideDown(mid,"top")}what.style.display="block"}function fade(what,duration){jQuery(what).fadeIn(duration*10+500)}
function setOpacity(el,val){el.style.opacity=val;el.style.filter="alpha(opacity="+val*100+")"}function bSlideDown(el,prop,onsuccess){var props={};props[prop]=getStyle(el,prop);el.style[prop]=0;el.style.display="block";jQuery(el).animate(props,{duration:400,complete:function(){bouncex.window.trigger("scroll");if(typeof onsuccess!=="undefined")onsuccess()}})}
function bSlideUp(el,onsuccess){jQuery(el).animate({"height":0},{duration:400,complete:function(){el.style.display="none";bouncex.window.trigger("scroll");if(typeof onsuccess!=="undefined")onsuccess()}})}function queryStringToObject(qs){var result=[];var qsSplit=qs.split("&");for(var i=0;i<qsSplit.length;i++){var superSplit=qsSplit[i].split("=");result[superSplit[0]]=superSplit[1]?decodeURIComponent(superSplit[1].replace(/\+/g," ")):""}return result}
function getBrowserPushType(){if(navigator.serviceWorker)return"sw";else if(bouncex.browser.safari&&window.safari&&window.safari.pushNotification)return"apn";else return undefined}
function googleTrustedStoresBadgeFix(ca_id){if(bouncex.campaigns[ca_id].type=="conversionbar"||bouncex.campaigns[ca_id].type=="conversioncorner"||bouncex.campaigns[ca_id].type=="liquidscreen"||bouncex.campaigns[ca_id].type=="nanobar"||bouncex.campaigns[ca_id].type=="nanotab"||bouncex.campaigns[ca_id].type=="overlay"||bouncex.campaigns[ca_id].type=="railbar")bouncex.addCss("body > #___ratingbadge_0 { z-index: 2147483627 !important; }",bouncex.campaigns[ca_id].obj1[0],"bx-campaign-"+ca_id+"-gts")}
bouncex.utils={addNamespace:function(obj,name){var namespacedObj={};for(var k in obj)if(obj.hasOwnProperty(k)){var namespacedKey=k;if(k.indexOf(":")===-1)namespacedKey=name+":"+k;namespacedObj[namespacedKey]=obj[k]}return namespacedObj},getOrigin:function(){return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},cookies:{create:function(obj){defaults={name:"",value:"",domain:false,days:14};obj=jQuery.extend(defaults,
obj);if(!obj.name)return false;var date=new Date;date.setTime(date.getTime()+obj.days*24*60*60*1E3);var exp="; expires="+date.toGMTString();var cookieString=obj.name+"="+obj.value+exp+"; path=/;";if(obj.domain)cookieString+="domain="+obj.domain+";";document.cookie=cookieString},destroy:function(name){return this.create({name:name,days:-1})},read:function(name){var t=name+"=",vars=document.cookie.split(";");for(var r=0;r<vars.length;r++){var i=vars[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);
if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null}},url:{allowParams:function(paramsToAllow,url){url=url||window.location.href;var segments=url.split(/([\?\#])/);if(!paramsToAllow)return segments[0];for(var i=1;i<segments.length;i++)if(segments[i]!=="?"&&segments[i]!=="#")segments[i]=this.filterParams(segments[i],function(param){return paramsToAllow.indexOf(param)>-1});return segments.join("").replace(/([\?\#](?=[\?\#])|[\?\#]+$)/g,"")},filterParams:function(qstring,condition){var params=
qstring.replace(/[\?\#]/,"").split("&");var filtered="";for(var i=0;i<params.length;i++){var key=params[i].split("=")[0].replace(/[\[]/,"").replace(/[\]]/,"");if(condition(key))filtered+="&"+params[i]}return filtered.replace("&","")},getParam:function(name,qstring){var param_string=qstring?"?"+qstring:window.location.href;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&#]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(param_string);if(results==null)return"";
else return decodeURIComponent(results[1])},removeParams:function(paramsToRemove,url){url=url||window.location.href;paramsToRemove=["_ke","bxid","cid","email","et_rid","gclid","ibx_source","mc_cid","mc_eid","pid","RIID","spUserID","sfmc_sub","ueh","utm_source","utm_medium","utm_campaign","utm_term","utm_content"].concat(paramsToRemove);var segments=url.split(/([\?\#])/);for(var i=1;i<segments.length;i++)if(segments[i]!=="?"&&segments[i]!=="#")segments[i]=this.filterParams(segments[i],function(param){return paramsToRemove.indexOf(param)===
-1});return segments.join("").replace(/([\?\#](?=[\?\#])|[\?\#]+$)/g,"")}},validate:{email:function(email){var regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return regex.test(email)},integer:function(val){return!isNaN(parseInt(val))},url:function(url){var regex=/^(https?):\/\/[^\s/$.?#].[^\s]*$/;return regex.test(url)}}};bouncex.utils.getParam=bouncex.utils.url.getParam;

		bouncex.et={init:function(){this.stopAll();try{eval(bouncex.website.etjs)}catch(err){bouncex.err(err,{source:"event tracking js"})}},hoverTime:1E3,log:function(msg){if(bouncex.debug)bouncex.log("%c et log: "+msg,"color: #4b0082")},on:function(target,event,callback,selector){var listener={event:event,selector:selector,stop:function(){bouncex.off(target,event+"."+listenerId,selector)}};var listenerId=this.register(listener);bouncex.on(target,event+"."+listenerId,callback,selector);return listenerId},
onHover:function(selector,callback){var timeout;var time=this.hoverTime;var hoverListener={event:"hover",selector:selector,stop:function(){bouncex.off(bouncex.body,"mouseenter."+listenerId,selector);bouncex.off(bouncex.body,"mouseleave."+listenerId,selector);clearTimeout(timeout)}};var listenerId=this.register(hoverListener);var handle=function(){var $el=jQuery(this);clearTimeout(timeout);if(!$el.attr("data-bxhover-"+listenerId))timeout=setTimeout(function(){$el.attr("data-bxhover-"+listenerId,true);
bouncex.tryCatch(callback)($el)},time)};var unhandle=function(){clearTimeout(timeout)};bouncex.on(bouncex.body,"mouseenter."+listenerId,handle,selector);bouncex.on(bouncex.body,"mouseleave."+listenerId,unhandle,selector)},onTrue:function(condition,callback,maxTries){var tries=0;maxTries=maxTries||5;if(condition())callback();else var intId=bouncex.et.setInterval(function(){if(condition()){bouncex.et.stop(intId);callback()}else if(tries>maxTries)bouncex.et.stop(intId);tries++})},onVisible:function(selector,
callback){var prevVisible=false;var visible;function executeCallbackIfVisible(){visible=jQuery(selector).is(":visible");if(!prevVisible&&visible)bouncex.tryCatch(callback)(jQuery(selector));prevVisible=visible}executeCallbackIfVisible();return this.setInterval(executeCallbackIfVisible)},register:function(listener){var id=getTimeMs()+Math.random();bouncex.listeners=bouncex.listeners||{};bouncex.listeners[id]=listener;return id},setInterval:function(callback,milliseconds){milliseconds=milliseconds||
1E3;var intervalId=setInterval(bouncex.tryCatch(callback),milliseconds);var listener={event:"interval",milliseconds:milliseconds,stop:function(){clearInterval(intervalId)}};var listenerId=this.register(listener);return listenerId},stop:function(id){if(bouncex.listeners.hasOwnProperty(id)){bouncex.listeners[id].stop();delete bouncex.listeners[id]}},stopAll:function(){for(var id in bouncex.listeners)this.stop(id)},cart:{init:function(obj){var defaults={storeCartVariable:"cart",cartCountVariable:"cart_qty",
maxVariableSize:bouncex.local_storage_enabled?1500:400,storeValues:["count","items"],maxItems:10};obj=jQuery.extend(defaults,obj);this.config=obj;this.replenish=obj.replenish||this.replenish;this.validateReplenishment=obj.validateReplenishment||this.validateReplenishment;this.reportReplenishment=obj.reportReplenishment||this.reportReplenishment;this.tryReplenishment();this.reportReplenishment()},getCart:function(){if(this.state)return this.state;else if(this.config.storeCartVariable&&bouncex.vars[this.config.storeCartVariable]){this.state=
JSON.parse(bouncex.vars[this.config.storeCartVariable]);return this.state}else return{}},getCount:function(){return bouncex.vars[this.config.cartCountVariable]},inferCount:function(cart){if(bouncex.utils.validate.integer(cart.count))return parseInt(cart.count);else if(cart.items){var count=0;for(var i=0;i<cart.items.length;i++){var qty=parseInt(cart.items[i].qty)||1;count+=qty}return count}else if(bouncex.utils.validate.integer(this.getCount()))return parseInt(this.getCount());else return 0},tryReplenishment:function(){var bx_cart=
bouncex.utils.getParam("bx_cart");var cart={};this.replenishing=false;if(bx_cart){if(bx_cart.charAt(0)!=="{")bx_cart=atob(bx_cart);try{cart=JSON.parse(bx_cart)}catch(e){bouncex.err(e);return false}}else return false;if(!this.validateReplenishment(cart))return false;var cartCopy=jQuery.extend(true,{},cart);this.save(cartCopy);this.replenishing=true;return this.replenish(cart)},replenish:function(cart){bouncex.et.log("Replenish function not defined");return null},save:function(cart){if(!cart)return false;
this.state=cart;if(this.config.storeCartVariable){var storedCart={};if(cart.count===0)storedCart={count:0};else for(var i=0;i<this.config.storeValues.length;i++){var k=this.config.storeValues[i];if(cart.hasOwnProperty(k))storedCart[k]=cart[k]}this.saveToVariable(storedCart)}},saveToVariable:function(storedCart){var cartString=JSON.stringify(storedCart);if(cartString.length<=this.config.maxVariableSize){bouncex.setv(this.config.storeCartVariable,cartString);setBounceCookie()}else if(storedCart.items&&
storedCart.items.length){var lastItemLength=JSON.stringify(storedCart.items[storedCart.items.length-1]).length;if(lastItemLength>=this.config.maxVariableSize)storedCart.items.pop();else storedCart.items.shift();this.saveToVariable(storedCart)}},track:function(cart){var trackCart=jQuery.extend({},cart);if(trackCart.items)trackCart.items=JSON.stringify(trackCart.items);if(trackCart.ids)trackCart.ids=trackCart.ids.join(",");trackCart=bouncex.utils.addNamespace(trackCart,"cart");bouncex.push(["cart",
trackCart])},update:function(cart){if(this.replenishing)return false;if(cart.newItem){var oldCart=this.getCart();var allItems=oldCart.items||[];allItems.push(cart.newItem);cart.items=allItems}if(this.config.maxItems&&cart.items&&cart.items.length>this.config.maxItems)cart.items=cart.items.slice(cart.items.length-this.config.maxItems);cart.count=this.inferCount(cart);if(!cart.ids&&cart.items){var ids=[];for(var i=0;i<cart.items.length;i++)if(cart.items[i].id)ids.push(cart.items[i].id);if(ids.length)cart.ids=
ids}if(cart.newItem||cart.addToCart)bouncex.push(["add to cart",{}]);delete cart.newItem;delete cart.addToCart;this.save(cart);this.track(cart)},validateReplenishment:function(cart){var cartCount=this.getCount();if(bouncex.utils.validate.integer(cartCount)&&cartCount>0)return false;if(!cart)return false;if(!cart.value&&!cart.token&&!cart.items)return false;return true},reportReplenishment:function(){var bx_replen=bouncex.utils.getParam("bx_replen");if(bx_replen)setTimeout(function(){var cartCount=
bouncex.et.cart.getCount();bouncex.push(["cart replenish",{"cart:count":cartCount,"cart:success":cartCount>0}])},1100)}},item:{requirements:[{name:"id"},{name:"copy"},{name:"url",tests:[bouncex.utils.validate.url]},{name:"imageurl",tests:[bouncex.utils.validate.url]}],requireImageLoad:true,validate:function(item){var errorMsg="Invalid Item. ";for(var i=0;i<this.requirements.length;i++){var requirement=this.requirements[i];if(!item["item:"+requirement.name]){bouncex.et.log(errorMsg+requirement.name+
" empty");return false}if(requirement.tests)for(var j=0;j<requirement.tests.length;j++){var test=requirement.tests[j];var itemValue=item["item:"+requirement.name];if(typeof test=="function"&&!test(itemValue)){bouncex.et.log(errorMsg+"The following "+requirement.name+" failed "+test.name+" test: "+itemValue);return false}}}return true}}};
bouncex.dg={init:function(){this.persistCookie=bouncex.website.dgp;var settings=bouncex.website.dgs;var gcrNorm=bouncex.cookie.gcr>100?100:bouncex.cookie.gcr;if(!settings||!settings.trafficPercentage||!settings.tagData||gcrNorm>settings.trafficPercentage)return;var script=document.createElement("script");script.setAttribute("data-cb","bouncex.dg.initPostDeviceGraph");script.setAttribute("data-adcb","bouncex.dg.getAdsOptStatus");for(var attr in settings.tagData)if(settings.tagData.hasOwnProperty(attr))script.setAttribute(attr,
settings.tagData[attr]);script.setAttribute("data-id",'{"deviceid":"'+bouncex.cookie.did+'","clientid":'+bouncex.website.id+',"visitid":"'+bouncex.cookie.vid+'"}');if(this.persistCookie){script.setAttribute("data-pe","1");this.dg_timeout=setTimeout2(function(){CustomVariables.evalVars("devicegraph");bouncex.err("dg timeout")},3E3)}document.body.appendChild(script)},initPostDeviceGraph:function(error,json){if(error!==null)return;this._deviceID=json.deviceID;if(this.persistCookie){clearTimeout(this.dg_timeout);
this.store=bouncex.parseJSON(json.cookie);this._replenishCookie();CustomVariables.evalVars("devicegraph")}if(json.deviceID&&json.cookieID){var signature=json.deviceID.slice(-10)+json.cookieID.slice(-10);if(bouncex.cookie.vpv===1||bouncex.cookie.dgsig&&bouncex.cookie.dgsig!==signature){bouncex.cookie.dgsig=signature;setBounceCookie();var dg_event_params={"device_graph:cookie_id":json.cookieID,"device_graph:device_id":json.deviceID};event_stream_report("device_graph",dg_event_params)}}},getAdsOptStatus:function(error,
json){if(error!==null)return;var deviceId=json.deviceID;window.bouncex.gbi.deviceOptedStatus=deviceId?deviceId:""},_replenishCookie:function(){var updatedValues=[];var previousCvars=bouncex.stringify(bouncex.cookie.v);if(this.store&&this.store.v)for(var name in this.store.v)if(this.store.v.hasOwnProperty(name)&&bouncex.cookie.v[name]!==this.store.v[name]){if(typeof CustomVariables.getVar(name)==="undefined"){delete this.store.v[name];continue}updatedValues.push(name);bouncex.setv(name,this.store.v[name])}if(updatedValues.length){setBounceCookie();
reload_campaigns("device_graph_hydration",updatedValues.join(","));var dg_hydrate_params={"hydrated_deviceid":this.store.did,"hydrated_visitid":this.store.vid,"hydrated_cookie":bouncex.stringify(this.store),"cookie":bouncex.stringify(bouncex.cookie),"hydrated_cvar":bouncex.stringify(this.store.v),"previous_cvar":previousCvars};event_stream_report("device_graph_hydration",dg_hydrate_params)}},updateDeviceGraphCookie:function(){this.store.did=bouncex.cookie.did;this.store.vid=bouncex.cookie.vid;var updateParams=
{bxwid:bouncex.website.id,deviceID:this._deviceID,obj:encodeURIComponent(bouncex.stringify(this.store))};jQuery.ajax({type:"GET",url:"https://ids.cdnwidget.com/u?"+qs(updateParams),error:function(){bouncex.err("device graph update failed")}})}};

		perf.times('tag');
		if(bouncex.website.sd>0 && !bouncex.website.fbe){
			setTimeout(bcx_init, bouncex.website.sd);
		} else {
			bcx_init();
		}

	})(); 
} 